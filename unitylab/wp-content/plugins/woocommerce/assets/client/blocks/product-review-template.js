(()=>{var e,t,o,n={5047:(e,t,o)=>{"use strict";const n=window.wp.blocks;var r=o(5534);const s=JSON.parse('{"UU":"woocommerce/product-review-template"}');var c=o(6087);const i=window.wp.data;var m=o(7723);const a=window.wp.components,d=window.wp.coreData,l=window.wp.blockEditor,p=window.wp.url,u=window.wp.apiFetch;var w=o.n(u),v=o(790);const f=[["core/avatar"],["woocommerce/product-review-author-name"],["woocommerce/product-review-date"],["woocommerce/product-review-content"]],g=(0,c.memo)((({blocks:e,commentId:t,setActiveCommentId:o,isHidden:n})=>{const r=(0,l.__experimentalUseBlockPreview)({blocks:e}),s=()=>{o(t)},c={display:n?"none":void 0};return(0,v.jsx)("div",{...r,tabIndex:0,role:"button",style:c,onClick:s,onKeyDown:s})})),b=(0,c.memo)((function({comment:e,activeCommentId:t,setActiveCommentId:o,firstCommentId:n,blocks:r}){const{children:s,...c}=(0,l.useInnerBlocksProps)({},{template:f});return(0,v.jsxs)("li",{...c,children:[e.commentId===(t||n)?s:null,(0,v.jsx)(g,{blocks:r,commentId:e.commentId,setActiveCommentId:o,isHidden:e.commentId===(t||n)})]})}));o(9951),(0,n.registerBlockType)(s.UU,{icon:r.A,edit:function({clientId:e,context:{postId:t}}){const o=(0,l.useBlockProps)(),[n,r]=(0,c.useState)(0),{commentOrder:s,commentsPerPage:u,pageComments:f}=(0,i.useSelect)((e=>{const{getSettings:t}=e(l.store);return t().__experimentalDiscussionSettings}),[]),g=(({postId:e})=>{const t=(0,c.useMemo)((()=>({status:"approve",order:"asc",context:"embed",parent:0,type:"review"})),[]),{pageComments:o,commentsPerPage:n,defaultCommentsPage:r}=(0,i.useSelect)((e=>{const{getSettings:t}=e(l.store),{__experimentalDiscussionSettings:o}=t();return o}),[]),s=o?Math.min(n,100):100,m=(({defaultPage:e,postId:t,perPage:o,queryArgs:n})=>{const[r,s]=(0,c.useState)({}),i=`${t}_${o}`,m=r[i]||0;return(0,c.useEffect)((()=>{m||"newest"!==e||w()({path:(0,p.addQueryArgs)("/wp/v2/comments",{...n,post:t,per_page:o,_fields:"id"}),method:"HEAD",parse:!1}).then((e=>{const t=parseInt(e.headers.get("X-WP-TotalPages")||"1",10);s({...r,[i]:t<=1?1:t})})).catch((()=>{s({...r,[i]:1})}))}),[e,t,o,s,m,n,r,i]),"newest"===e?m:1})({defaultPage:r,postId:e,perPage:s,queryArgs:t});return(0,c.useMemo)((()=>m?{...t,post:e,per_page:s,page:m}:null),[m,t,e,s])})({postId:null!=t?t:0}),{topLevelComments:h,blocks:I}=(0,i.useSelect)((t=>{const{getEntityRecords:o}=t(d.store),{getBlocks:n}=t(l.store);return{topLevelComments:g?o("root","comment",g):null,blocks:n(e)}}),[e,g]);let k=(e=>(0,c.useMemo)((()=>e?.map((({id:e})=>({commentId:e})))),[e]))("desc"===s&&h?[...h].reverse():h);return h?(t||(k=(({perPage:e,pageComments:t})=>{const o=t?Math.min(e,3):3;return Array.from({length:o},((e,t)=>({commentId:-(t+1)})))})({perPage:u,pageComments:f})),k.length?(0,v.jsx)("ol",{...o,children:k&&k.map((({commentId:e},t)=>(0,v.jsx)(l.BlockContextProvider,{value:{commentId:e<0?null:e},children:(0,v.jsx)(b,{comment:{commentId:e},activeCommentId:n,setActiveCommentId:r,blocks:I,firstCommentId:k[0]?.commentId})},e||t)))}):(0,v.jsx)("p",{...o,children:(0,m.__)("No results found.","woocommerce")})):(0,v.jsx)("p",{...o,children:(0,v.jsx)(a.Spinner,{})})},save:function(){return(0,v.jsx)(l.InnerBlocks.Content,{})}})},9951:()=>{},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},5573:e=>{"use strict";e.exports=window.wp.primitives}},r={};function s(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,s),o.exports}s.m=n,e=[],s.O=(t,o,n,r)=>{if(!o){var c=1/0;for(d=0;d<e.length;d++){for(var[o,n,r]=e[d],i=!0,m=0;m<o.length;m++)(!1&r||c>=r)&&Object.keys(s.O).every((e=>s.O[e](o[m])))?o.splice(m--,1):(i=!1,r<c&&(c=r));if(i){e.splice(d--,1);var a=n();void 0!==a&&(t=a)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,n,r]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var r=Object.create(null);s.r(r);var c={};t=t||[null,o({}),o([]),o(o)];for(var i=2&n&&e;"object"==typeof i&&!~t.indexOf(i);i=o(i))Object.getOwnPropertyNames(i).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,s.d(r,c),r},s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.j=6732,(()=>{var e={6732:0};s.O.j=t=>0===e[t];var t=(t,o)=>{var n,r,[c,i,m]=o,a=0;if(c.some((t=>0!==e[t]))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(m)var d=m(s)}for(t&&t(o);a<c.length;a++)r=c[a],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},o=globalThis.webpackChunkwebpackWcBlocksMainJsonp=globalThis.webpackChunkwebpackWcBlocksMainJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var c=s.O(void 0,[94],(()=>s(5047)));c=s.O(c),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-review-template"]=c})();