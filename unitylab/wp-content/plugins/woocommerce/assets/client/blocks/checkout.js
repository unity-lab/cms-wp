(()=>{var e,t,s,o={8470:(e,t,s)=>{"use strict";var o=s(4921),r=s(5573),c=s(790);const n=(0,c.jsxs)(r.SVG,{xmlns:"http://www.w3.org/2000/SVG",viewBox:"0 0 24 24",fill:"none",children:[(0,c.jsx)("path",{stroke:"currentColor",strokeWidth:"1.5",fill:"none",d:"M5 3.75h14c.69 0 1.25.56 1.25 1.25v14c0 .69-.56 1.25-1.25 1.25H5c-.69 0-1.25-.56-1.25-1.25V5c0-.69.56-1.25 1.25-1.25z"}),(0,c.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.4 10.75c0-.47.38-.85.85-.85h9.5c.47 0 .85.38.85.85v1.5c0 .47-.38.85-.85.85h-9.5a.85.85 0 01-.85-.85v-1.5zm1.2.35v.8h8.8v-.8H7.6zM12.4 15.25c0-.47.38-.85.85-.85h3.5c.47 0 .85.38.85.85v1.5c0 .47-.38.85-.85.85h-3.5a.85.85 0 01-.85-.85v-1.5zm1.2.35v.8h2.8v-.8h-2.8zM6.5 15.9a.6.6 0 01.6-.6h2.8a.6.6 0 010 1.2H7.1a.6.6 0 01-.6-.6zM6.5 7.9a.6.6 0 01.6-.6h9.8a.6.6 0 110 1.2H7.1a.6.6 0 01-.6-.6z",clipRule:"evenodd"})]});var i=s(4530);const a=window.wp.blocks,l=window.wp.blockEditor;var d=s(6087),p=s(9491);const m=(0,d.createContext)({hasContainerWidth:!1,containerClassName:"",isMobile:!1,isSmall:!1,isMedium:!1,isLarge:!1}),u=()=>(0,d.useContext)(m),h=({children:e,className:t=""})=>{const[s,r]=(()=>{const[e,{width:t}]=(0,p.useResizeObserver)();let s="";return t>700?s="is-large":t>520?s="is-medium":t>400?s="is-small":t&&(s="is-mobile"),[e,s]})(),n={hasContainerWidth:""!==r,containerClassName:r,isMobile:"is-mobile"===r,isSmall:"is-small"===r,isMedium:"is-medium"===r,isLarge:"is-large"===r};return(0,c.jsx)(m.Provider,{value:n,children:(0,c.jsxs)("div",{className:(0,o.A)(t,r),children:[s,e]})})};s(9163);const g=({children:e,className:t})=>(0,c.jsx)(h,{className:(0,o.A)("wc-block-components-sidebar-layout",t),children:e}),_=window.wp.data,k=(0,d.createContext)({isEditor:!1,currentPostId:0,currentView:"",previewData:{},getPreviewData:()=>({})}),b=()=>(0,d.useContext)(k),w=({children:e,currentPostId:t=0,previewData:s={},currentView:o="",isPreview:r=!1})=>{const n=(0,_.useSelect)((e=>t||e("core/editor").getCurrentPostId()),[t]),i=(0,d.useCallback)(((e,t={})=>s&&e in s?s[e]:t),[s]),a={isEditor:!0,currentPostId:n,currentView:o,previewData:s,getPreviewData:i,isPreview:r};return(0,c.jsx)(k.Provider,{value:a,children:e})},y=window.wp.plugins,x=window.wc.wcSettings;var v=s(7723);const f=(0,x.getSetting)("wcBlocksConfig",{pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),S=f.pluginUrl+"assets/images/",j=(f.pluginUrl,x.STORE_PAGES.shop,x.STORE_PAGES.checkout?.id),C=(x.STORE_PAGES.checkout,x.STORE_PAGES.privacy?.permalink),P=(x.STORE_PAGES.privacy,x.STORE_PAGES.terms?.permalink),E=(x.STORE_PAGES.terms,x.STORE_PAGES.cart?.id),N=x.STORE_PAGES.cart?.permalink,A=(x.STORE_PAGES.myaccount?.permalink?x.STORE_PAGES.myaccount.permalink:(0,x.getSetting)("wpLoginUrl","/wp-login.php"),(0,x.getSetting)("localPickupEnabled",!1)),I=((0,x.getSetting)("shippingMethodsExist",!1),(0,x.getSetting)("shippingEnabled",!0)),R=(0,x.getSetting)("countries",{}),T=(0,x.getSetting)("countryData",{}),M=Object.fromEntries(Object.keys(T).filter((e=>!0===T[e].allowBilling)).map((e=>[e,R[e]||""]))),D=Object.fromEntries(Object.keys(T).filter((e=>!0===T[e].allowShipping)).map((e=>[e,R[e]||""]))),B={...M,...D},O=Object.fromEntries(Object.keys(B).map((e=>[e,T[e].states||{}]))),L=Object.fromEntries(Object.keys(B).map((e=>[e,T[e].locale||{}]))),F={address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],order:[]},V=(0,x.getSetting)("addressFieldsLocations",F).address,$=(0,x.getSetting)("addressFieldsLocations",F).contact,U=(0,x.getSetting)("addressFieldsLocations",F).order,H=((0,x.getSetting)("additionalOrderFields",{}),(0,x.getSetting)("additionalContactFields",{}),(0,x.getSetting)("additionalAddressFields",{}),()=>{const{experimentalBlocksEnabled:e}=(0,x.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e}),z=({imageUrl:e=`${S}/block-error.svg`,header:t=(0,v.__)("Oops!","woocommerce"),text:s=(0,v.__)("There was an error loading the content.","woocommerce"),errorMessage:o,errorMessagePrefix:r=(0,v.__)("Error:","woocommerce"),button:n,showErrorBlock:i=!0})=>i?(0,c.jsxs)("div",{className:"wc-block-error wc-block-components-error",children:[e&&(0,c.jsx)("img",{className:"wc-block-error__image wc-block-components-error__image",src:e,alt:""}),(0,c.jsxs)("div",{className:"wc-block-error__content wc-block-components-error__content",children:[t&&(0,c.jsx)("p",{className:"wc-block-error__header wc-block-components-error__header",children:t}),s&&(0,c.jsx)("p",{className:"wc-block-error__text wc-block-components-error__text",children:s}),o&&(0,c.jsxs)("p",{className:"wc-block-error__message wc-block-components-error__message",children:[r?r+" ":"",o]}),n&&(0,c.jsx)("p",{className:"wc-block-error__button wc-block-components-error__button",children:n})]})]}):null;s(5893);class q extends d.Component{state={errorMessage:"",hasError:!1};static getDerivedStateFromError(e){return void 0!==e.statusText&&void 0!==e.status?{errorMessage:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("strong",{children:e.status}),":Â ",e.statusText]}),hasError:!0}:{errorMessage:e.message,hasError:!0}}render(){const{header:e,imageUrl:t,showErrorMessage:s=!0,showErrorBlock:o=!0,text:r,errorMessagePrefix:n,renderError:i,button:a}=this.props,{errorMessage:l,hasError:d}=this.state;return d?"function"==typeof i?i({errorMessage:l}):(0,c.jsx)(z,{showErrorBlock:o,errorMessage:s?l:null,header:e,imageUrl:t,text:r,errorMessagePrefix:n,button:a}):this.props.children}}const W=q,X=window.wc.wcBlocksData;var Y=s(4040),G=s.n(Y);let J=function(e){return e.ADD_EVENT_CALLBACK="add_event_callback",e.REMOVE_EVENT_CALLBACK="remove_event_callback",e}({});const K={},Z=(e=K,{type:t,eventType:s,id:o,callback:r,priority:c})=>{const n=e.hasOwnProperty(s)?new Map(e[s]):new Map;switch(t){case J.ADD_EVENT_CALLBACK:return n.set(o,{priority:c,callback:r}),{...e,[s]:n};case J.REMOVE_EVENT_CALLBACK:return n.delete(o),{...e,[s]:n}}},Q=(e,t)=>(s,o=10)=>{const r=((e,t,s=10)=>({id:Math.floor(Math.random()*Date.now()).toString(),type:J.ADD_EVENT_CALLBACK,eventType:e,callback:t,priority:s}))(e,s,o);return t(r),()=>{var s;t((s=e,{id:r.id,type:J.REMOVE_EVENT_CALLBACK,eventType:s}))}},ee=(0,d.createContext)({onPaymentProcessing:()=>()=>()=>{},onPaymentSetup:()=>()=>()=>{}}),te=({children:e})=>{const{isProcessing:t,isIdle:s,isCalculating:o,hasError:r}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{isProcessing:t.isProcessing(),isIdle:t.isIdle(),hasError:t.hasError(),isCalculating:t.isCalculating()}})),{isPaymentReady:n}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{isPaymentProcessing:t.isPaymentProcessing(),isPaymentReady:t.isPaymentReady()}})),{setValidationErrors:i}=(0,_.useDispatch)(X.validationStore),[a,l]=(0,d.useReducer)(Z,{}),{onPaymentSetup:p}=(e=>(0,d.useMemo)((()=>({onPaymentSetup:Q("payment_setup",e)})),[e]))(l),m=(0,d.useRef)(a);(0,d.useEffect)((()=>{m.current=a}),[a]);const{__internalSetPaymentProcessing:u,__internalSetPaymentIdle:h,__internalEmitPaymentProcessingEvent:g}=(0,_.useDispatch)(X.paymentStore);(0,d.useEffect)((()=>{!t||r||o||(u(),g(m.current,i))}),[t,r,o,u,g,i]),(0,d.useEffect)((()=>{s&&!n&&h()}),[s,n,h]),(0,d.useEffect)((()=>{r&&n&&h()}),[r,n,h]);const k={onPaymentProcessing:(0,d.useMemo)((()=>function(...e){return G()("onPaymentProcessing",{alternative:"onPaymentSetup",plugin:"WooCommerce Blocks"}),p(...e)}),[p]),onPaymentSetup:p};return(0,c.jsx)(ee.Provider,{value:k,children:e})},se={NONE:"none",INVALID_ADDRESS:"invalid_address",UNKNOWN:"unknown_error"},oe={INVALID_COUNTRY:"woocommerce_rest_cart_shipping_rates_invalid_country",MISSING_COUNTRY:"woocommerce_rest_cart_shipping_rates_missing_country",INVALID_STATE:"woocommerce_rest_cart_shipping_rates_invalid_state"},re={shippingErrorStatus:{isPristine:!0,isValid:!1,hasInvalidAddress:!1,hasError:!1},dispatchErrorStatus:e=>e,shippingErrorTypes:se,onShippingRateSuccess:()=>()=>{},onShippingRateFail:()=>()=>{},onShippingRateSelectSuccess:()=>()=>{},onShippingRateSelectFail:()=>()=>{}},ce=(e,{type:t})=>Object.values(se).includes(t)?t:e,ne="shipping_rates_success",ie="shipping_rates_fail",ae="shipping_rate_select_success",le="shipping_rate_select_fail",de=e=>({onSuccess:Q(ne,e),onFail:Q(ie,e),onSelectSuccess:Q(ae,e),onSelectFail:Q(le,e)}),pe=window.wc.wcTypes;let me=function(e){return e.CART="wc/cart",e.CHECKOUT="wc/checkout",e.PAYMENTS="wc/checkout/payments",e.EXPRESS_PAYMENTS="wc/checkout/express-payments",e.CONTACT_INFORMATION="wc/checkout/contact-information",e.SHIPPING_ADDRESS="wc/checkout/shipping-address",e.BILLING_ADDRESS="wc/checkout/billing-address",e.SHIPPING_METHODS="wc/checkout/shipping-methods",e.CHECKOUT_ACTIONS="wc/checkout/checkout-actions",e.ORDER_INFORMATION="wc/checkout/order-information",e}({});const ue=async(e,t,s)=>{const o=((e,t)=>e[t]?Array.from(e[t].values()).sort(((e,t)=>e.priority-t.priority)):[])(e,t),r=[];for(const e of o)try{const t=await Promise.resolve(e.callback(s));"object"==typeof t&&r.push(t)}catch(e){console.error(e)}return!r.length||r};var he=s(1824),ge=s.n(he);const _e=window.wp.htmlEntities,ke=Object.entries(L).reduce(((e,[t,s])=>(e[t]=Object.entries(s).reduce(((e,[t,s])=>(e[t]=(e=>{const t={};return void 0!==e.label&&(t.label=e.label),void 0!==e.required&&(t.required=e.required),void 0!==e.hidden&&(t.hidden=e.hidden),void 0===e.label||e.optionalLabel||(t.optionalLabel=(0,v.sprintf)(/* translators: %s Field label. */ /* translators: %s Field label. */
(0,v.__)("%s (optional)","woocommerce"),e.label)),void 0!==e.optionalLabel&&(t.optionalLabel=e.optionalLabel),e.index&&((0,pe.isNumber)(e.index)&&(t.index=e.index),(0,pe.isString)(e.index)&&(t.index=parseInt(e.index,10))),e.hidden&&(t.required=!1),t})(s),e)),{}),e)),{}),be=(e,t,s="")=>{const o=s&&void 0!==ke[s]?ke[s]:{};return e.map((e=>({key:e,...t&&e in t?t[e]:{},...o&&e in o?o[e]:{}}))).sort(((e,t)=>e.index-t.index))},we=["state","country","postcode","city"],ye=(e,t)=>e in t,xe=e=>{const t=be(V,x.defaultFields,e.country),s=Object.assign({},e);return t.forEach((({key:t,hidden:o})=>{!0===o&&ye(t,e)&&(s[t]="")})),s},ve=e=>!!e.country&&be(V,x.defaultFields,e.country).filter((({key:e})=>we.includes(e))).every((({key:t,hidden:s,required:o})=>!0===s||!1===o||ye(t,e)&&""!==e[t])),fe=window.CustomEvent||null,Se=(e,t,s=!1,o=!1)=>{if("function"!=typeof jQuery)return()=>{};const r=()=>{((e,{bubbles:t=!1,cancelable:s=!1,element:o,detail:r={}})=>{if(!fe)return;o||(o=document.body);const c=new fe(e,{bubbles:t,cancelable:s,detail:r});o.dispatchEvent(c)})(t,{bubbles:s,cancelable:o})};return jQuery(document).on(e,r),()=>jQuery(document).off(e,r)},je=e=>{const t=e?.detail;t&&t.preserveCartData||(0,_.dispatch)(X.cartStore).invalidateResolutionForStore()},Ce=e=>{(e?.persisted||"back_forward"===(window.performance&&window.performance.getEntriesByType("navigation").length?window.performance.getEntriesByType("navigation")[0].type:""))&&(0,_.dispatch)(X.cartStore).invalidateResolutionForStore()},Pe=()=>{1===window.wcBlocksStoreCartListeners.count&&window.wcBlocksStoreCartListeners.remove(),window.wcBlocksStoreCartListeners.count--},Ee={first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",phone:""},Ne={...Ee,email:""},Ae={total_items:"",total_items_tax:"",total_fees:"",total_fees_tax:"",total_discount:"",total_discount_tax:"",total_shipping:"",total_shipping_tax:"",total_price:"",total_tax:"",tax_lines:X.EMPTY_TAX_LINES,currency_code:"",currency_symbol:"",currency_minor_unit:2,currency_decimal_separator:"",currency_thousand_separator:"",currency_prefix:"",currency_suffix:""},Ie=e=>Object.fromEntries(Object.entries(e).map((([e,t])=>[e,(0,_e.decodeEntities)(t)]))),Re=(e,t)=>{const s=xe(Ie(e));return ge()(t.current,s)||(t.current=s),t.current},Te={billingAddress:Ne,billingData:Ne,cartCoupons:X.EMPTY_CART_COUPONS,cartErrors:X.EMPTY_CART_ERRORS,cartFees:X.EMPTY_CART_FEES,cartHasCalculatedShipping:!1,cartIsLoading:!0,cartItemErrors:X.EMPTY_CART_ITEM_ERRORS,cartItems:X.EMPTY_CART_ITEMS,cartItemsCount:0,cartItemsWeight:0,cartNeedsPayment:!0,cartNeedsShipping:!0,cartTotals:Ae,crossSellsProducts:X.EMPTY_CART_CROSS_SELLS,extensions:X.EMPTY_EXTENSIONS,hasPendingItemsOperations:!1,isLoadingRates:!1,paymentMethods:X.EMPTY_PAYMENT_METHODS,paymentRequirements:X.EMPTY_PAYMENT_REQUIREMENTS,receiveCart:()=>{},receiveCartContents:()=>{},shippingAddress:Ee,shippingRates:X.EMPTY_SHIPPING_RATES},Me=(e={shouldSelect:!0})=>{const{shouldSelect:t}=e,s=(0,d.useRef)(),o=(0,d.useRef)(Ne),r=(0,d.useRef)(Ee);(0,d.useEffect)((()=>((()=>{if(window.wcBlocksStoreCartListeners||(window.wcBlocksStoreCartListeners={count:0,remove:()=>{}}),window.wcBlocksStoreCartListeners?.count>0)return void window.wcBlocksStoreCartListeners.count++;document.body.addEventListener("wc-blocks_added_to_cart",je),document.body.addEventListener("wc-blocks_removed_from_cart",je),window.addEventListener("pageshow",Ce);const e=Se("added_to_cart","wc-blocks_added_to_cart"),t=Se("removed_from_cart","wc-blocks_removed_from_cart");window.wcBlocksStoreCartListeners.count=1,window.wcBlocksStoreCartListeners.remove=()=>{document.body.removeEventListener("wc-blocks_added_to_cart",je),document.body.removeEventListener("wc-blocks_removed_from_cart",je),window.removeEventListener("pageshow",Ce),e(),t()}})(),Pe)),[]);const{receiveCart:c,receiveCartContents:n}=(0,_.useDispatch)(X.cartStore),{cartData:i,cartErrors:a,cartTotals:l,cartIsLoading:p,isLoadingRates:m,hasPendingItemsOperations:u}=(0,_.useSelect)((e=>{const t=e(X.cartStore),s=!t.hasFinishedResolution("getCartData",[]);return{cartData:t.getCartData(),cartErrors:t.getCartErrors(),cartTotals:t.getCartTotals(),cartIsLoading:s,isLoadingRates:t.isAddressFieldsForShippingRatesUpdating(),hasPendingItemsOperations:t.hasPendingItemsOperations()}}),[]);if(!t)return Te;const h=Re(i.billingAddress,o),g=i.needsShipping?Re(i.shippingAddress,r):h,k={billingAddress:h,billingData:h,cartCoupons:(y=i.coupons,y.length>0?y.map((e=>({...e,label:(0,_e.decodeEntities)(e.code)}))):X.EMPTY_CART_COUPONS),cartErrors:a,cartFees:(w=i.fees,w.length>0?w.map((e=>Ie(e))):X.EMPTY_CART_FEES),cartHasCalculatedShipping:i.hasCalculatedShipping,cartIsLoading:p,cartItemErrors:i.errors,cartItems:i.items,cartItemsCount:i.itemsCount,cartItemsWeight:i.itemsWeight,cartNeedsPayment:i.needsPayment,cartNeedsShipping:i.needsShipping,cartTotals:l,crossSellsProducts:i.crossSells,extensions:i.extensions,hasPendingItemsOperations:u,isLoadingRates:m,paymentMethods:i.paymentMethods,paymentRequirements:i.paymentRequirements,receiveCart:c,receiveCartContents:n,shippingAddress:g,shippingRates:(b=i.shippingRates,b.length>0?b.map((e=>({...e,shipping_rates:e.shipping_rates.length>0?e.shipping_rates.map((e=>Ie(e))):[]}))):[])};var b,w,y;return s.current&&ge()(s.current,k)||(s.current=k),s.current},De=e=>e.length,Be=(0,x.getSetting)("collectableMethodIds",[]),Oe=e=>Be.includes(e.method_id),Le=e=>!!A&&(Array.isArray(e)?!!e.find((e=>Be.includes(e))):Be.includes(e)),Fe=e=>e.some((e=>!!e.shipping_rates.length)),Ve=e=>!!Fe(e)&&e.some((e=>e.shipping_rates.some((e=>e.selected)))),$e=e=>Array.from(new Set(e.flatMap((e=>e.shipping_rates.filter((e=>e.selected)).map((e=>e.name)))))),Ue=e=>Object.fromEntries(e.map((({package_id:e,shipping_rates:t})=>[e,t.find((e=>e.selected))?.rate_id||""])));var He=s(923),ze=s.n(He);const qe=window.wp.hooks,We=()=>({dispatchStoreEvent:(0,d.useCallback)(((e,t={})=>{try{(0,qe.doAction)(`experimental__woocommerce_blocks-${e}`,t)}catch(e){console.error(e)}}),[]),dispatchCheckoutEvent:(0,d.useCallback)(((e,t={})=>{try{(0,qe.doAction)(`experimental__woocommerce_blocks-checkout-${e}`,{...t,storeCart:(0,_.select)("wc/store/cart").getCartData()})}catch(e){console.error(e)}}),[])}),Xe=()=>{const{shippingRates:e,needsShipping:t,hasCalculatedShipping:s,isLoadingRates:o,isCollectable:r,isSelectingRate:c}=(0,_.useSelect)((e=>{const t=e(X.cartStore),s=t.getShippingRates();return{shippingRates:s,needsShipping:t.getNeedsShipping(),hasCalculatedShipping:t.getHasCalculatedShipping(),isLoadingRates:t.isAddressFieldsForShippingRatesUpdating(),isCollectable:s.every((({shipping_rates:e})=>e.find((({method_id:e})=>Le(e))))),isSelectingRate:t.isShippingRateBeingSelected()}}),[]),n=(0,d.useRef)({});(0,d.useEffect)((()=>{const t=Ue(e);(0,pe.isObject)(t)&&!ze()(n.current,t)&&(n.current=t)}),[e]);const{selectShippingRate:i}=(0,_.useDispatch)(X.cartStore),a=Le(Object.values(n.current).map((e=>e.split(":")[0]))),{dispatchCheckoutEvent:l}=We(),p=(0,d.useCallback)(((e,t)=>{let s;void 0!==e&&(s=Le(e.split(":")[0])?i(e,null):i(e,t),s.then((()=>{l("set-selected-shipping-rate",{shippingRateId:e})})).catch((e=>{(0,X.processErrorResponse)(e)})))}),[i,l]);return{isSelectingRate:c,selectedRates:n.current,selectShippingRate:p,shippingRates:e,needsShipping:t,hasCalculatedShipping:s,isLoadingRates:o,isCollectable:r,hasSelectedLocalPickup:a}},{NONE:Ye,INVALID_ADDRESS:Ge,UNKNOWN:Je}=se,Ke=(0,d.createContext)(re),Ze=()=>(0,d.useContext)(Ke),Qe=({children:e})=>{const{__internalStartCalculation:t,__internalFinishCalculation:s}=(0,_.useDispatch)(X.checkoutStore),{shippingRates:o,isLoadingRates:r,cartErrors:n}=Me(),{selectedRates:i,isSelectingRate:a}=Xe(),[l,p]=(0,d.useReducer)(ce,Ye),[m,u]=(0,d.useReducer)(Z,{}),h=(0,d.useRef)(m),g=(0,d.useMemo)((()=>({onShippingRateSuccess:de(u).onSuccess,onShippingRateFail:de(u).onFail,onShippingRateSelectSuccess:de(u).onSelectSuccess,onShippingRateSelectFail:de(u).onSelectFail})),[u]);(0,d.useEffect)((()=>{h.current=m}),[m]),(0,d.useEffect)((()=>{r?t():s()}),[r,t,s]),(0,d.useEffect)((()=>{a?t():s()}),[t,s,a]),(0,d.useEffect)((()=>{n.length>0&&n.some((e=>!(!e.code||!Object.values(oe).includes(e.code))))?p({type:Ge}):p({type:Ye})}),[n]);const k=(0,d.useMemo)((()=>({isPristine:l===Ye,isValid:l===Ye,hasInvalidAddress:l===Ge,hasError:l===Je||l===Ge})),[l]);(0,d.useEffect)((()=>{r||0!==o.length&&!k.hasError||ue(h.current,ie,{hasInvalidAddress:k.hasInvalidAddress,hasError:k.hasError})}),[o,r,k.hasError,k.hasInvalidAddress]),(0,d.useEffect)((()=>{!r&&o.length>0&&!k.hasError&&ue(h.current,ne,o)}),[o,r,k.hasError]),(0,d.useEffect)((()=>{a||(k.hasError?ue(h.current,le,{hasError:k.hasError,hasInvalidAddress:k.hasInvalidAddress}):ue(h.current,ae,i.current))}),[i,a,k.hasError,k.hasInvalidAddress]);const b={shippingErrorStatus:k,dispatchErrorStatus:p,shippingErrorTypes:se,...g};return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(Ke.Provider,{value:b,children:e})})};function et(e,t){const s=(0,d.useRef)();return(0,d.useEffect)((()=>{s.current===e||t&&!t(e,s.current)||(s.current=e)}),[e,t]),s.current}const tt=window.wp.notices,st=window.wc.blocksCheckoutEvents,ot=window.wc.wcBlocksRegistry,rt=(0,d.createContext)({onSubmit:()=>{},onCheckoutAfterProcessingWithSuccess:()=>()=>{},onCheckoutAfterProcessingWithError:()=>()=>{},onCheckoutBeforeProcessing:()=>()=>{},onCheckoutValidationBeforeProcessing:()=>()=>{},onCheckoutSuccess:()=>()=>{},onCheckoutFail:()=>()=>{},onCheckoutValidation:()=>()=>{}}),ct=({children:e,redirectUrl:t})=>{const s=(0,ot.getPaymentMethods)(),o=(0,ot.getExpressPaymentMethods)(),r=(0,ot.getExpressPaymentMethods)(),{isEditor:n}=b(),{__internalUpdateAvailablePaymentMethods:i,__internalSetRegisteredExpressPaymentMethods:a}=(0,_.useDispatch)(X.paymentStore);(0,d.useEffect)((()=>{a((e=>{const t={};return Object.keys(e).forEach((s=>{const o=e[s];t[s]={name:o.name,title:o.title,description:o.description,gatewayId:o.gatewayId,supportsStyle:o.supports?.style||[]}})),t})(r))}),[r]),(0,d.useEffect)((()=>{(n||0!==Object.keys(s).length||0!==Object.keys(o).length)&&i()}),[n,s,o,i]);const{__internalSetRedirectUrl:l,__internalEmitValidateEvent:p,__internalEmitAfterProcessingEvents:m,__internalSetBeforeProcessing:u}=(0,_.useDispatch)(X.checkoutStore),{checkoutRedirectUrl:h,checkoutStatus:g,isCheckoutBeforeProcessing:k,isCheckoutAfterProcessing:w,checkoutHasError:y,checkoutOrderId:x,checkoutOrderNotes:v,checkoutCustomerId:f}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{checkoutRedirectUrl:t.getRedirectUrl(),checkoutStatus:t.getCheckoutStatus(),isCheckoutBeforeProcessing:t.isBeforeProcessing(),isCheckoutAfterProcessing:t.isAfterProcessing(),checkoutHasError:t.hasError(),checkoutOrderId:t.getOrderId(),checkoutOrderNotes:t.getOrderNotes(),checkoutCustomerId:t.getCustomerId()}}));t&&t!==h&&l(t);const{setValidationErrors:S}=(0,_.useDispatch)(X.validationStore),{dispatchCheckoutEvent:j}=We(),C=Object.values(me).filter((e=>e!==me.PAYMENTS&&e!==me.EXPRESS_PAYMENTS)),P=(0,_.useSelect)((e=>{const{getNotices:t}=e(tt.store);return C.reduce(((e,s)=>[...e,...t(s)]),[])}),[C]),{paymentNotices:E,expressPaymentNotices:N}=(0,_.useSelect)((e=>{const{getNotices:t}=e(tt.store);return{paymentNotices:t(me.PAYMENTS),expressPaymentNotices:t(me.EXPRESS_PAYMENTS)}}),[]),[A]=(0,d.useReducer)(Z,{}),I=(0,d.useRef)(A),{onCheckoutValidation:R,onCheckoutSuccess:T,onCheckoutFail:M}=st.checkoutEvents;(0,d.useEffect)((()=>{I.current=A}),[A]);const D=(0,d.useMemo)((()=>function(...e){return G()("onCheckoutBeforeProcessing",{alternative:"onCheckoutValidation",plugin:"WooCommerce Blocks"}),R(...e)}),[R]),B=(0,d.useMemo)((()=>function(...e){return G()("onCheckoutValidationBeforeProcessing",{since:"9.7.0",alternative:"onCheckoutValidation",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8381"}),R(...e)}),[R]),O=(0,d.useMemo)((()=>function(...e){return G()("onCheckoutAfterProcessingWithSuccess",{since:"9.7.0",alternative:"onCheckoutSuccess",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8381"}),T(...e)}),[T]),L=(0,d.useMemo)((()=>function(...e){return G()("onCheckoutAfterProcessingWithError",{since:"9.7.0",alternative:"onCheckoutFail",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8381"}),M(...e)}),[M]);(0,d.useEffect)((()=>{k&&p({setValidationErrors:S})}),[k,S,p]);const F=et(g),V=et(y);(0,d.useEffect)((()=>{g===F&&y===V||w&&m({notices:{checkoutNotices:P,paymentNotices:E,expressPaymentNotices:N}})}),[g,y,h,x,f,v,w,k,F,V,P,N,E,p,m]);const $={onSubmit:(0,d.useCallback)((()=>{j("submit"),u()}),[j,u]),onCheckoutBeforeProcessing:D,onCheckoutValidationBeforeProcessing:B,onCheckoutAfterProcessingWithSuccess:O,onCheckoutAfterProcessingWithError:L,onCheckoutSuccess:T,onCheckoutFail:M,onCheckoutValidation:R};return(0,c.jsx)(rt.Provider,{value:$,children:e})},nt=window.wp.apiFetch;var it=s.n(nt);(0,v.__)("Something went wrong. Please contact us to get assistance.","woocommerce");const at=(e,t,s)=>{const o=Object.keys(e).map((t=>({key:t,value:e[t]})),[]),r=`wc-${s}-new-payment-method`;return o.push({key:r,value:t}),o},lt=e=>{if(!e)return;const{__internalSetCustomerId:t}=(0,_.dispatch)(X.checkoutStore);it().setNonce&&"function"==typeof it().setNonce&&it().setNonce(e),it().setCartHash&&"function"==typeof it().setCartHash&&it().setCartHash(e),e?.get("User-ID")&&t(parseInt(e.get("User-ID")||"0",10))},dt=()=>{const{customerData:e,isInitialized:t}=(0,_.useSelect)((e=>{const t=e(X.cartStore);return{customerData:t.getCustomerData(),isInitialized:t.hasFinishedResolution("getCartData")}})),{setShippingAddress:s,setBillingAddress:o}=(0,_.useDispatch)(X.cartStore);return{isInitialized:t,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,setBillingAddress:o,setShippingAddress:s}},pt=()=>{const{isEditor:e,getPreviewData:t}=b(),{needsShipping:s}=Xe(),{useShippingAsBilling:o,prefersCollection:r,editingBillingAddress:c,editingShippingAddress:n}=(0,_.useSelect)((e=>({useShippingAsBilling:e(X.checkoutStore).getUseShippingAsBilling(),prefersCollection:e(X.checkoutStore).prefersCollection(),editingBillingAddress:e(X.checkoutStore).getEditingBillingAddress(),editingShippingAddress:e(X.checkoutStore).getEditingShippingAddress()}))),{__internalSetUseShippingAsBilling:i,setEditingBillingAddress:a,setEditingShippingAddress:l}=(0,_.useDispatch)(X.checkoutStore),{billingAddress:p,setBillingAddress:m,shippingAddress:u,setShippingAddress:h}=dt(),g=(0,d.useCallback)((e=>{m({email:e})}),[m]),k=(0,x.getSetting)("forcedBillingAddress",!1);return{shippingAddress:u,billingAddress:p,setShippingAddress:h,setBillingAddress:m,setEmail:g,defaultFields:e?t("defaultFields",x.defaultFields):x.defaultFields,useShippingAsBilling:o,setUseShippingAsBilling:i,editingBillingAddress:c,editingShippingAddress:n,setEditingBillingAddress:a,setEditingShippingAddress:l,needsShipping:s,showShippingFields:!k&&s&&!r,showShippingMethods:s&&!r,showBillingFields:!s||!o||!!r,forcedBillingAddress:k,useBillingAsShipping:k||!!r}},mt=()=>{const{onCheckoutValidation:e}=st.checkoutEvents,{additionalFields:t,customerId:s,customerPassword:o,extensionData:r,hasError:c,isBeforeProcessing:n,isComplete:i,isProcessing:a,orderNotes:l,redirectUrl:p,shouldCreateAccount:m}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{additionalFields:t.getAdditionalFields(),customerId:t.getCustomerId(),customerPassword:t.getCustomerPassword(),extensionData:t.getExtensionData(),hasError:t.hasError(),isBeforeProcessing:t.isBeforeProcessing(),isComplete:t.isComplete(),isProcessing:t.isProcessing(),orderNotes:t.getOrderNotes(),redirectUrl:t.getRedirectUrl(),shouldCreateAccount:t.getShouldCreateAccount()}}),[]),{__internalSetHasError:u,__internalProcessCheckoutResponse:h}=(0,_.useDispatch)(X.checkoutStore),g=(0,_.useSelect)((e=>e(X.validationStore).hasValidationErrors),[]),{shippingErrorStatus:k}=Ze(),{shippingAddress:b,billingAddress:w,useBillingAsShipping:y}=pt(),{cartNeedsPayment:x,cartNeedsShipping:f,receiveCartContents:S}=Me(),{activePaymentMethod:j,paymentMethodData:C,isExpressPaymentMethodActive:P,hasPaymentError:E,isPaymentReady:N,shouldSavePayment:A}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{activePaymentMethod:t.getActivePaymentMethod(),paymentMethodData:t.getPaymentMethodData(),isExpressPaymentMethodActive:t.isExpressPaymentMethodActive(),hasPaymentError:t.hasPaymentError(),isPaymentReady:t.isPaymentReady(),shouldSavePayment:t.getShouldSavePaymentMethod()}}),[]),I=(0,ot.getPaymentMethods)(),R=(0,ot.getExpressPaymentMethods)(),T=(0,d.useRef)(w),M=(0,d.useRef)(b),D=(0,d.useRef)(p),[B,O]=(0,d.useState)(!1),L=(0,d.useMemo)((()=>{const e={...R,...I};return e?.[j]?.paymentMethodId}),[j,R,I]),F=g()&&!P||E||k.hasError,V=!c&&!F&&(N||!x)&&a;(0,d.useEffect)((()=>{F===c||!a&&!n||P||u(F)}),[F,c,a,n,P,u]),(0,d.useEffect)((()=>{T.current=w,M.current=b,D.current=p}),[w,b,p]);const $=(0,d.useCallback)((()=>g()?void 0!==(0,_.select)(X.validationStore).getValidationError("shipping-rates-error")&&{type:pe.responseTypes.ERROR,errorMessage:(0,v.__)("Sorry, this order requires a shipping option.","woocommerce")}:E?{type:pe.responseTypes.ERROR,errorMessage:(0,v.__)("There was a problem with your payment option.","woocommerce"),context:"wc/checkout/payments"}:!k.hasError||{type:pe.responseTypes.ERROR,errorMessage:(0,v.__)("There was a problem with your shipping option.","woocommerce"),context:"wc/checkout/shipping-methods"}),[g,E,k.hasError]);(0,d.useEffect)((()=>{let t;return P||(t=e($,0)),()=>{P||"function"!=typeof t||t()}}),[e,$,P]),(0,d.useEffect)((()=>{window.localStorage.removeItem("WOOCOMMERCE_CHECKOUT_IS_CUSTOMER_DATA_DIRTY"),D.current&&(window.location.href=D.current)}),[i]);const U=(0,d.useCallback)((async()=>{if(B)return;O(!0),(()=>{const e=(0,_.select)("wc/store/store-notices").getRegisteredContainers(),{removeNotice:t}=(0,_.dispatch)(tt.store),{getNotices:s}=(0,_.select)(tt.store);e.forEach((e=>{s(e).forEach((s=>{t(s.id,e)}))}))})();const e=x?{payment_method:L,payment_data:at(C,A,j)}:{},c=xe(T.current),n=y?c:xe(M.current),i={additional_fields:t,billing_address:c,create_account:m,customer_note:l,customer_password:o,extensions:{...r},shipping_address:f?n:void 0,...e};(0,X.clearCheckoutPutRequests)(),it()({path:"/wc/store/v1/checkout",method:"POST",data:i,cache:"no-store",parse:!1}).then((e=>{if((0,pe.assertResponseIsValid)(e),lt(e.headers),!e.ok)throw e;return e.json()})).then((e=>{h(e),O(!1)})).catch((e=>{lt(e?.headers);try{e.json().then((e=>e)).then((e=>{e.data?.cart&&S(e.data.cart),(0,X.processErrorResponse)(e),h(e)}))}catch{let e=(0,v.__)("Something went wrong when placing the order. Check your email for order updates before retrying.","woocommerce");0!==s&&(e=(0,v.__)("Something went wrong when placing the order. Check your account's order history or your email for order updates before retrying.","woocommerce")),(0,X.processErrorResponse)({code:"unknown_error",message:e,data:null})}u(!0),O(!1)}))}),[B,x,L,C,A,j,l,m,s,o,r,t,f,S,u,h,y]);return(0,d.useEffect)((()=>{V&&!B&&U()}),[U,V,B]),null},ut=({children:e,redirectUrl:t})=>(0,c.jsx)(ct,{redirectUrl:t,children:(0,c.jsx)(Qe,{children:(0,c.jsxs)(te,{children:[e,(0,c.jsx)(W,{renderError:x.CURRENT_USER_IS_ADMIN?null:()=>null,children:(0,c.jsx)(y.PluginArea,{scope:"woocommerce-checkout"})}),(0,c.jsx)(mt,{})]})})}),ht={currency_code:x.SITE_CURRENCY.code,currency_symbol:x.SITE_CURRENCY.symbol,currency_minor_unit:x.SITE_CURRENCY.minorUnit,currency_decimal_separator:x.SITE_CURRENCY.decimalSeparator,currency_thousand_separator:x.SITE_CURRENCY.thousandSeparator,currency_prefix:x.SITE_CURRENCY.prefix,currency_suffix:x.SITE_CURRENCY.suffix},gt=(e,t=2)=>{const s=x.SITE_CURRENCY.minorUnit;if(s===t||!e)return e;const o=Math.pow(10,s);return(Math.round(parseInt(e,10)/Math.pow(10,t))*o).toString()},_t=(0,x.getSetting)("localPickupEnabled",!1),kt=(0,x.getSetting)("localPickupText",(0,v.__)("Local pickup","woocommerce")),bt=(0,x.getSetting)("localPickupCost",""),wt=_t?(0,x.getSetting)("localPickupLocations",[]):[],yt=wt?Object.values(wt).map(((e,t)=>({...ht,name:`${kt} (${e.name})`,description:"",delivery_time:"",price:gt(bt,0)||"0",taxes:"0",rate_id:`pickup_location:${t+1}`,instance_id:t+1,meta_data:[{key:"pickup_location",value:e.name},{key:"pickup_address",value:e.formatted_address},{key:"pickup_details",value:e.details}],method_id:"pickup_location",selected:!1}))):[],xt=[{destination:{address_1:"",address_2:"",city:"",state:"",postcode:"",country:""},package_id:0,name:(0,v.__)("Shipping","woocommerce"),items:[{key:"33e75ff09dd601bbe69f351039152189",name:(0,v._x)("Beanie with Logo","example product in Cart Block","woocommerce"),quantity:2},{key:"6512bd43d9caa6e02c990b0a82652dca",name:(0,v._x)("Beanie","example product in Cart Block","woocommerce"),quantity:1}],shipping_rates:[{...ht,name:(0,v.__)("Flat rate shipping","woocommerce"),description:"",delivery_time:"",price:gt("500"),taxes:"0",rate_id:"flat_rate:0",instance_id:0,meta_data:[],method_id:"flat_rate",selected:!1},{...ht,name:(0,v.__)("Free shipping","woocommerce"),description:"",delivery_time:"",price:"0",taxes:"0",rate_id:"free_shipping:1",instance_id:0,meta_data:[],method_id:"flat_rate",selected:!0},...yt]}],vt=(0,x.getSetting)("displayCartPricesIncludingTax",!1),ft={coupons:[],shipping_rates:(0,x.getSetting)("shippingMethodsExist",!1)||(0,x.getSetting)("localPickupEnabled",!1)?xt:[],items:[{key:"1",id:1,type:"simple",quantity:2,catalog_visibility:"visible",name:(0,v.__)("Beanie","woocommerce"),summary:(0,v.__)("Beanie","woocommerce"),short_description:(0,v.__)("Warm hat for winter","woocommerce"),description:"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.",sku:"woo-beanie",permalink:"https://example.org",low_stock_remaining:2,backorders_allowed:!1,show_backorder_badge:!1,sold_individually:!1,quantity_limits:{minimum:1,maximum:99,multiple_of:1,editable:!0},images:[{id:10,src:S+"previews/beanie.jpg",thumbnail:S+"previews/beanie.jpg",srcset:"",sizes:"",name:"",alt:""}],variation:[{attribute:(0,v.__)("Color","woocommerce"),value:(0,v.__)("Yellow","woocommerce")},{attribute:(0,v.__)("Size","woocommerce"),value:(0,v.__)("Small","woocommerce")}],prices:{...ht,price:gt(vt?"12000":"10000"),regular_price:gt(vt?"120":"100"),sale_price:gt(vt?"12000":"10000"),price_range:null,raw_prices:{precision:6,price:vt?"12000000":"10000000",regular_price:vt?"12000000":"10000000",sale_price:vt?"12000000":"10000000"}},totals:{...ht,line_subtotal:gt("2000"),line_subtotal_tax:gt("400"),line_total:gt("2000"),line_total_tax:gt("400")},extensions:{},item_data:[]},{key:"2",id:2,type:"simple",quantity:1,catalog_visibility:"visible",name:(0,v.__)("Cap","woocommerce"),summary:(0,v.__)("Cap","woocommerce"),short_description:(0,v.__)("Lightweight baseball cap","woocommerce"),description:"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.",sku:"woo-cap",low_stock_remaining:null,permalink:"https://example.org",backorders_allowed:!1,show_backorder_badge:!1,sold_individually:!1,quantity_limits:{minimum:1,maximum:99,multiple_of:1,editable:!0},images:[{id:11,src:S+"previews/cap.jpg",thumbnail:S+"previews/cap.jpg",srcset:"",sizes:"",name:"",alt:""}],variation:[{attribute:(0,v.__)("Color","woocommerce"),value:(0,v.__)("Orange","woocommerce")}],prices:{...ht,price:gt(vt?"2400":"2000"),regular_price:gt(vt?"2400":"2000"),sale_price:gt(vt?"2400":"2000"),price_range:null,raw_prices:{precision:6,price:vt?"24000000":"20000000",regular_price:vt?"24000000":"20000000",sale_price:vt?"24000000":"20000000"}},totals:{...ht,line_subtotal:gt("2000"),line_subtotal_tax:gt("400"),line_total:gt("2000"),line_total_tax:gt("400")},extensions:{},item_data:[]}],cross_sells:[{id:1,name:(0,v.__)("Polo","woocommerce"),slug:"polo",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-polo",short_description:(0,v.__)("Polo","woocommerce"),description:(0,v.__)("Polo","woocommerce"),on_sale:!1,prices:{...ht,price:gt(vt?"24000":"20000"),regular_price:gt(vt?"24000":"20000"),sale_price:gt(vt?"12000":"10000"),price_range:null},price_html:"",average_rating:"4.5",review_count:2,images:[{id:17,src:S+"previews/polo.jpg",thumbnail:S+"previews/polo.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:2,name:(0,v.__)("Long Sleeve Tee","woocommerce"),slug:"long-sleeve-tee",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-long-sleeve-tee",short_description:(0,v.__)("Long Sleeve Tee","woocommerce"),description:(0,v.__)("Long Sleeve Tee","woocommerce"),on_sale:!1,prices:{...ht,price:gt(vt?"30000":"25000"),regular_price:gt(vt?"30000":"25000"),sale_price:gt(vt?"30000":"25000"),price_range:null},price_html:"",average_rating:"4",review_count:2,images:[{id:17,src:S+"previews/long-sleeve-tee.jpg",thumbnail:S+"previews/long-sleeve-tee.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:3,name:(0,v.__)("Hoodie with Zipper","woocommerce"),slug:"hoodie-with-zipper",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-hoodie-with-zipper",short_description:(0,v.__)("Hoodie with Zipper","woocommerce"),description:(0,v.__)("Hoodie with Zipper","woocommerce"),on_sale:!0,prices:{...ht,price:gt(vt?"15000":"12500"),regular_price:gt(vt?"30000":"25000"),sale_price:gt(vt?"15000":"12500"),price_range:null},price_html:"",average_rating:"1",review_count:2,images:[{id:17,src:S+"previews/hoodie-with-zipper.jpg",thumbnail:S+"previews/hoodie-with-zipper.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:4,name:(0,v.__)("Hoodie with Logo","woocommerce"),slug:"hoodie-with-logo",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-hoodie-with-logo",short_description:(0,v.__)("Polo","woocommerce"),description:(0,v.__)("Polo","woocommerce"),on_sale:!1,prices:{...ht,price:gt(vt?"4500":"4250"),regular_price:gt(vt?"4500":"4250"),sale_price:gt(vt?"4500":"4250"),price_range:null},price_html:"",average_rating:"5",review_count:2,images:[{id:17,src:S+"previews/hoodie-with-logo.jpg",thumbnail:S+"previews/hoodie-with-logo.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:5,name:(0,v.__)("Hoodie with Pocket","woocommerce"),slug:"hoodie-with-pocket",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-hoodie-with-pocket",short_description:(0,v.__)("Hoodie with Pocket","woocommerce"),description:(0,v.__)("Hoodie with Pocket","woocommerce"),on_sale:!0,prices:{...ht,price:gt(vt?"3500":"3250"),regular_price:gt(vt?"4500":"4250"),sale_price:gt(vt?"3500":"3250"),price_range:null},price_html:"",average_rating:"3.75",review_count:4,images:[{id:17,src:S+"previews/hoodie-with-pocket.jpg",thumbnail:S+"previews/hoodie-with-pocket.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:6,name:(0,v.__)("T-Shirt","woocommerce"),slug:"t-shirt",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-t-shirt",short_description:(0,v.__)("T-Shirt","woocommerce"),description:(0,v.__)("T-Shirt","woocommerce"),on_sale:!1,prices:{...ht,price:gt(vt?"1800":"1500"),regular_price:gt(vt?"1800":"1500"),sale_price:gt(vt?"1800":"1500"),price_range:null},price_html:"",average_rating:"3",review_count:2,images:[{id:17,src:S+"previews/tshirt.jpg",thumbnail:S+"previews/tshirt.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}}],fees:[{id:"fee",name:(0,v.__)("Fee","woocommerce"),totals:{...ht,total:gt("100"),total_tax:gt("20")}}],items_count:3,items_weight:0,needs_payment:!0,needs_shipping:I,has_calculated_shipping:!0,shipping_address:{first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",phone:""},billing_address:{first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",email:"",phone:""},totals:{...ht,total_items:gt("4000"),total_items_tax:gt("800"),total_fees:gt("100"),total_fees_tax:gt("20"),total_discount:"0",total_discount_tax:"0",total_shipping:"0",total_shipping_tax:"0",total_tax:gt("820"),total_price:gt("4920"),tax_lines:[{name:(0,v.__)("Sales tax","woocommerce"),rate:"20%",price:gt("820")}]},errors:[],payment_methods:["cod","bacs","cheque"],payment_requirements:["products"],extensions:{}},St={cc:[{method:{gateway:"credit-card",last4:"5678",brand:"Visa"},expires:"12/20",is_default:!1,tokenId:"1"}]},jt=window.wc.blocksCheckout,Ct=window.wp.url,Pt=window.wp.coreData;var Et=s(4782);const Nt=(0,d.forwardRef)((({children:e,className:t=""},s)=>(0,c.jsx)("div",{ref:s,className:(0,o.A)("wc-block-components-main",t),children:e}))),At={showOrderNotes:!0,showPolicyLinks:!0,showReturnToCart:!0,cartPageId:0,showRateAfterTaxName:!1,showFormStepNumbers:!1,defaultFields:x.defaultFields},It=(0,d.createContext)(At),Rt=()=>{const e=(0,d.useContext)(It);return{...At,...e}},Tt=["core/paragraph","core/image","core/separator"],Mt=e=>{const t=(0,jt.applyCheckoutFilter)({filterName:"additionalCartCheckoutInnerBlockTypes",defaultValue:[],extensions:(0,_.select)(X.cartStore).getCartData().extensions,arg:{block:e},validation:e=>{if(Array.isArray(e)&&e.every((e=>"string"==typeof e)))return!0;throw new Error("allowedBlockTypes filters must return an array of strings.")}});return Array.from(new Set([...(0,a.getBlockTypes)().filter((t=>(t?.parent||[]).includes(e))).map((({name:e})=>e)),...Tt,...t]))},Dt=({clientId:e,registeredBlocks:t,defaultTemplate:s=[]})=>{const o=(0,d.useRef)(t),r=(0,d.useRef)(s),c=(0,_.useRegistry)(),{isPreview:n}=b();(0,d.useEffect)((()=>{let t=!1;if(n)return;const{replaceInnerBlocks:s}=(0,_.dispatch)("core/block-editor");return c.subscribe((()=>{if(!c.select("core/block-editor").getBlock(e))return;const n=c.select("core/block-editor").getBlocks(e);if(0===n.length&&r.current.length>0&&!t){const o=(0,a.createBlocksFromInnerBlocksTemplate)(r.current);if(0!==o.length)return t=!0,void s(e,o)}const i=o.current.map((e=>(0,a.getBlockType)(e))),l=((e,t)=>{const s=t.filter((e=>e&&(({attributes:e})=>Boolean(e.lock?.remove||e.lock?.default?.remove))(e))),o=[];return s.forEach((t=>{if(void 0===t)return;const s=e.find((e=>e.name===t.name));s||o.push(t)})),o})(n,i);if(0===l.length)return;let d=-1;const p=l.map((e=>{const t=r.current.findIndex((([t])=>t===e.name)),s=(0,a.createBlock)(e.name);return-1===d&&(d=(({defaultTemplatePosition:e,innerBlocks:t,currentDefaultTemplate:s})=>{switch(e){case-1:return t.length;case 0:return 0;default:const o=s.current[e-1],r=t.findIndex((({name:e})=>e===o[0]));return-1===r?e:r+1}})({defaultTemplatePosition:t,innerBlocks:n,currentDefaultTemplate:r})),s}));c.batch((()=>{c.dispatch("core/block-editor").insertBlocks(p,d,e)}))}),"core/block-editor")}),[e,n,c])};s(4793);const Bt=window.wp.components,Ot=()=>{const{defaultFields:e}=Rt(),t=(e,t)=>{["phone","company","address_2"].includes(e)&&["optional","required","hidden"].includes(t)&&(0,_.dispatch)(Pt.store).editEntityRecord("root","site",void 0,{[`woocommerce_checkout_${e}_field`]:t})},s=[{label:(0,v.__)("Optional","woocommerce"),value:"false"},{label:(0,v.__)("Required","woocommerce"),value:"true"}];return(0,c.jsx)(l.InspectorControls,{children:(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Address Fields","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Show or hide fields in the checkout address forms.","woocommerce")}),(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Company","woocommerce"),checked:!e.company.hidden,onChange:()=>{e.company.hidden?t("company","optional"):t("company","hidden")}}),!e.company.hidden&&(0,c.jsx)(Bt.RadioControl,{selected:e.company.required?"true":"false",options:s,onChange:e=>{t("company","true"===e?"required":"optional")},className:"components-base-control--nested wc-block-components-require-company-field"}),(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Address line 2","woocommerce"),checked:!e.address_2.hidden,onChange:()=>{e.address_2.hidden?t("address_2","optional"):t("address_2","hidden")}}),!e.address_2.hidden&&(0,c.jsx)(Bt.RadioControl,{selected:e.address_2.required?"true":"false",options:s,onChange:e=>{t("address_2","true"===e?"required":"optional")},className:"components-base-control--nested wc-block-components-require-address_2-field"}),(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Phone","woocommerce"),checked:!e.phone.hidden,onChange:()=>{e.phone.hidden?t("phone","optional"):t("phone","hidden")}}),!e.phone.hidden&&(0,c.jsx)(Bt.RadioControl,{selected:e.phone.required?"true":"false",options:s,onChange:e=>{t("phone","true"===e?"required":"optional")},className:"components-base-control--nested wc-block-components-require-phone-field"})]})})},Lt=JSON.parse('{"DD":"Checkout Fields","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-fields-block",{apiVersion:Lt.XV,title:Lt.DD,icon:{src:(0,c.jsx)(i.A,{icon:Et.A,className:"wc-block-editor-components-block-icon"})},edit:({clientId:e,attributes:t})=>{const s=(0,l.useBlockProps)({className:(0,o.A)("wc-block-checkout__main",t?.className)}),r=Mt(jt.innerBlockAreas.CHECKOUT_FIELDS),{showFormStepNumbers:n}=Rt(),i=[["woocommerce/checkout-express-payment-block",{},[]],["woocommerce/checkout-contact-information-block",{},[]],["woocommerce/checkout-shipping-method-block",{},[]],["woocommerce/checkout-pickup-options-block",{},[]],["woocommerce/checkout-shipping-address-block",{},[]],["woocommerce/checkout-billing-address-block",{},[]],["woocommerce/checkout-shipping-methods-block",{},[]],["woocommerce/checkout-payment-block",{},[]],["woocommerce/checkout-additional-information-block",{},[]],["woocommerce/checkout-order-note-block",{},[]],["woocommerce/checkout-terms-block",{},[]],["woocommerce/checkout-actions-block",{},[]]].filter(Boolean);return Dt({clientId:e,registeredBlocks:r,defaultTemplate:i}),(0,c.jsxs)(Nt,{...s,children:[(0,c.jsx)(Ot,{}),(0,c.jsx)("form",{className:(0,o.A)("wc-block-components-form wc-block-checkout__form",{"wc-block-checkout__form--with-step-numbers":n}),children:(0,c.jsx)(l.InnerBlocks,{allowedBlocks:r,templateLock:!1,template:i,renderAppender:l.InnerBlocks.ButtonBlockAppender})})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(l.InnerBlocks.Content,{})})});const Ft=(0,d.forwardRef)((({children:e,className:t=""},s)=>(0,c.jsx)("div",{ref:s,className:(0,o.A)("wc-block-components-sidebar",t),children:e})));s(6811);const Vt=JSON.parse('{"DD":"Checkout Totals","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-totals-block",{apiVersion:Vt.XV,title:Vt.DD,icon:{src:(0,c.jsx)(i.A,{icon:Et.A,className:"wc-block-editor-components-block-icon"})},edit:({clientId:e,attributes:t})=>{const s=(0,l.useBlockProps)({className:(0,o.A)("wc-block-checkout__sidebar",t?.className)}),r=Mt(jt.innerBlockAreas.CHECKOUT_TOTALS),n=[["woocommerce/checkout-order-summary-block",{},[]]];return Dt({clientId:e,registeredBlocks:r,defaultTemplate:n}),(0,c.jsx)(Ft,{...s,children:(0,c.jsx)(l.InnerBlocks,{allowedBlocks:r,templateLock:!1,template:n,renderAppender:l.InnerBlocks.ButtonBlockAppender})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(l.InnerBlocks.Content,{})})});var $t=s(2216);const Ut=window.wc.blocksComponents,Ht=({children:e,stepHeadingContent:t})=>(0,c.jsxs)("div",{className:"wc-block-components-checkout-step__heading",children:[(0,c.jsx)(Ut.Title,{"aria-hidden":"true",className:"wc-block-components-checkout-step__title",headingLevel:"2",children:e}),!!t&&(0,c.jsx)("span",{className:"wc-block-components-checkout-step__heading-content",children:t})]}),zt=({attributes:e,setAttributes:t,className:s="",children:r})=>{const{showFormStepNumbers:n}=Rt(),{title:i="",description:a=""}=e,d=(0,l.useBlockProps)({className:(0,o.A)("wc-block-components-checkout-step",s,{"wc-block-components-checkout-step--with-step-number":n})});return(0,c.jsxs)("div",{...d,children:[(0,c.jsx)(Ht,{children:(0,c.jsx)(l.PlainText,{className:"",value:i,onChange:e=>t({title:e}),style:{backgroundColor:"transparent"}})}),(0,c.jsxs)("div",{className:"wc-block-components-checkout-step__container",children:[(0,c.jsx)("p",{className:"wc-block-components-checkout-step__description",children:(0,c.jsx)(l.PlainText,{className:a?"":"wc-block-components-checkout-step__description-placeholder",value:a,placeholder:(0,v.__)("Optional text for this form step.","woocommerce"),onChange:e=>t({description:e}),style:{backgroundColor:"transparent"}})}),(0,c.jsx)("div",{className:"wc-block-components-checkout-step__content",children:r})]})]})};s(2862);const qt=({block:e})=>{const{"data-block":t}=(0,l.useBlockProps)(),s=Mt(e);return Dt({clientId:t,registeredBlocks:s}),(0,c.jsx)("div",{className:"wc-block-checkout__additional_fields",children:(0,c.jsx)(l.InnerBlocks,{allowedBlocks:s})})},Wt=()=>(0,c.jsx)(l.InnerBlocks.Content,{});var Xt=s(5929),Yt=s(8107),Gt=s(4347);const Jt=["BUTTON","FIELDSET","INPUT","OPTGROUP","OPTION","SELECT","TEXTAREA","A"],Kt=({children:e,style:t={},...s})=>{const o=(0,d.useRef)(null),r=()=>{o.current&&Yt.focus.focusable.find(o.current).forEach((e=>{Jt.includes(e.nodeName)&&e.setAttribute("tabindex","-1"),e.hasAttribute("contenteditable")&&e.setAttribute("contenteditable","false")}))},n=(0,Gt.YQ)(r,0,{leading:!0});return(0,d.useLayoutEffect)((()=>{let e;return r(),o.current&&(e=new window.MutationObserver(n),e.observe(o.current,{childList:!0,attributes:!0,subtree:!0})),()=>{e&&e.disconnect(),n.cancel()}}),[n]),(0,c.jsx)("div",{ref:o,"aria-disabled":"true",style:{userSelect:"none",pointerEvents:"none",cursor:"normal",...t},...s,children:e})};s(4249);var Zt=s(2174);s(8306);const Qt=e=>{const{onChange:t,options:s,label:r,value:n="",className:a,size:l,errorId:p,required:m,errorMessage:u=(0,v.__)("Please select a valid option","woocommerce"),placeholder:h,...g}=e,k=(0,d.useCallback)((e=>{t(e.target.value)}),[t]),b=(0,jt.getFieldLabel)(r),w=(0,d.useMemo)((()=>({value:"",label:null!=h?h:(0,v.sprintf)(
// translators: %s will be label of the field. For example "country/region".
// translators: %s will be label of the field. For example "country/region".
(0,v.__)("Select a %s","woocommerce"),b),disabled:!!m})),[h,m,b]),y=(0,d.useId)(),x=g.id||`wc-blocks-components-select-${y}`,f=p||x,S=(0,d.useMemo)((()=>[w].concat(s)),[w,s]),{setValidationErrors:j,clearValidationError:C}=(0,_.useDispatch)(X.validationStore),{error:P,validationErrorId:E}=(0,_.useSelect)((e=>{const t=e(X.validationStore);return{error:t.getValidationError(f),validationErrorId:t.getValidationErrorId(f)}}),[f]);(0,d.useEffect)((()=>(!m||n?C(f):j({[f]:{message:u,hidden:!0}}),()=>{C(f)})),[C,n,f,u,m,j]);const N=(0,_.useSelect)((e=>e(X.validationStore).getValidationError(f||"")||{hidden:!0}),[f]);return(0,c.jsxs)("div",{className:(0,o.A)(a,{"has-error":!N.hidden}),children:[(0,c.jsx)("div",{className:"wc-blocks-components-select",children:(0,c.jsxs)("div",{className:"wc-blocks-components-select__container",children:[(0,c.jsx)("label",{htmlFor:x,className:"wc-blocks-components-select__label",children:r}),(0,c.jsx)("select",{className:"wc-blocks-components-select__select",id:x,size:void 0!==l?l:1,onChange:k,value:n,"aria-invalid":!(!P?.message||P?.hidden),"aria-errormessage":E,...g,children:S.map((e=>(0,c.jsx)("option",{value:e.value,"data-alternate-values":`[${e.label}]`,disabled:void 0!==e.disabled&&e.disabled,children:e.label},e.value)))}),(0,c.jsx)(i.A,{className:"wc-blocks-components-select__expand",icon:Zt.A})]})}),(0,c.jsx)(Ut.ValidationInputError,{propertyName:f})]})},es=({className:e,countries:t,id:s,errorId:r,label:n,onChange:i,value:a="",autoComplete:l="off",required:p=!1})=>{const m=(0,d.useMemo)((()=>Object.entries(t).map((([e,t])=>({value:e,label:(0,_e.decodeEntities)(t)})))),[t]);return(0,c.jsx)(Qt,{className:(0,o.A)(e,"wc-block-components-country-input"),id:s,errorId:r,label:n||"",onChange:i,options:m,value:a,required:p,autoComplete:l})},ts=e=>{const{...t}=e;return(0,c.jsx)(es,{countries:B,...t})},ss=e=>(0,c.jsx)(es,{countries:B,...e}),os=(e,t)=>{const s=t.find((t=>t.label.toLocaleUpperCase()===e.toLocaleUpperCase()||t.value.toLocaleUpperCase()===e.toLocaleUpperCase()));return s?s.value:""},rs=({className:e,id:t,states:s,country:r,label:n,onChange:i,autoComplete:a="off",value:l="",required:p=!1})=>{const m=s[r],u=(0,d.useMemo)((()=>m&&Object.keys(m).length>0?Object.keys(m).map((e=>({value:e,label:(0,_e.decodeEntities)(m[e])}))):[]),[m]),h=(0,d.useCallback)((e=>{const t=u.length>0?os(e,u):e;t!==l&&i(t)}),[i,u,l]),g=(0,d.useRef)(l);return(0,d.useEffect)((()=>{g.current!==l&&(g.current=l)}),[l]),(0,d.useEffect)((()=>{if(u.length>0&&g.current){const e=os(g.current,u);e!==g.current&&h(e)}}),[u,h]),u.length>0?(0,c.jsx)(Qt,{className:(0,o.$)(e,"wc-block-components-state-input"),options:u,label:n||"",id:t,onChange:h,value:l,autoComplete:a,required:p}):(0,c.jsx)(Ut.ValidatedTextInput,{className:e,id:t,label:n,onChange:h,autoComplete:a,value:l,required:p})},cs=e=>{const{...t}=e;return(0,c.jsx)(rs,{states:O,...t})},ns=e=>(0,c.jsx)(rs,{states:O,...e});function is(e){const t=(0,d.useRef)(e);return ze()(e,t.current)||(t.current=e),t.current}var as=s(111);s(2770);const ls=({field:e,props:t,onChange:s,value:o})=>{var r;const n=null!==(r=e?.required)&&void 0!==r&&r,i=et(n),[a,l]=(0,d.useState)((()=>Boolean(o)||n)),p=(0,jt.getFieldLabel)(e.label);(0,d.useEffect)((()=>{i!==n&&l(Boolean(o)||n)}),[o,i,n]);const m=(0,d.useCallback)((e=>{s(e),l(!0)}),[s]);return(0,d.useEffect)((()=>{o&&l(!0)}),[o]),(0,c.jsx)(d.Fragment,{children:a?(0,c.jsx)(Ut.ValidatedTextInput,{...t,type:e.type,label:n?e.label:e.optionalLabel,className:"wc-block-components-address-form__address_2",value:o,onChange:e=>s(e)}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(as.$,{render:(0,c.jsx)("span",{}),className:"wc-block-components-address-form__address_2-toggle",onClick:()=>l(!0),children:(0,v.sprintf)(
// translators: %s: address 2 field label.
// translators: %s: address 2 field label.
(0,v.__)("+ Add %s","woocommerce"),p)}),(0,c.jsx)("input",{type:"text",tabIndex:-1,className:"wc-block-components-address-form__address_2-hidden-input","aria-hidden":"true","aria-label":e.label,autoComplete:e.autocomplete,id:t?.id,value:o,onChange:e=>m(e.target.value)})]})})},ds=(e,t,s)=>({id:`${t}-${e?.key}`.replaceAll("/","-"),errorId:`${s}_${e?.key}`,label:(e?.required?e?.label:e?.optionalLabel)||"",autoCapitalize:e?.autocapitalize,autoComplete:e?.autocomplete,errorMessage:e?.errorMessage||"",required:e?.required,placeholder:e?.placeholder,className:`wc-block-components-address-form__${e?.key}`.replaceAll("/","-"),...e?.attributes}),ps=(e,t,s)=>{const o=t.find((t=>t.key===e)),r=(0,pe.objectHasProp)(s,e)?s[e]:"";return o?{field:{...o,key:e},value:r}:null},ms=(e,t)=>(0,pe.isObject)(e[t])&&Object.keys(e[t]).length>0;s(4927);const us=window.wc.sanitize;function hs(e,t){const s=(0,_e.decodeEntities)(e),o=[];let r=0;return Array.isArray(t)?(t.filter((e=>e&&"number"==typeof e.offset&&"number"==typeof e.length&&e.offset>=0&&e.length>0&&e.offset+e.length<=s.length)).forEach(((e,t)=>{e.offset>r&&o.push(s.slice(r,e.offset)),o.push((0,c.jsx)("strong",{children:s.slice(e.offset,e.offset+e.length)},`match-${t}`)),r=e.offset+e.length})),r<s.length&&o.push(s.slice(r)),o):[s]}const gs=({suggestions:e,branding:t,selectedSuggestion:s,addressType:o,onSuggestionClick:r})=>{if(!e)return null;const n=`address-suggestions-${o}-list`;return(0,c.jsxs)("div",{className:"wc-block-components-address-autocomplete-suggestions",role:"region","aria-live":"polite",children:[(0,c.jsx)("ul",{className:"suggestions-list",id:n,role:"listbox","aria-label":"Address suggestions",children:e.slice(0,5).map(((e,t)=>(0,c.jsx)("li",{id:`suggestion-item-${o}-${t}`,className:"wc-block-components-address-autocomplete-suggestion"+(s===t?" active":""),role:"option",tabIndex:-1,"aria-selected":s===t,onClick:()=>r(e.id),style:{cursor:"pointer"},children:hs(e?.label,e?.matchedSubstrings||[])},e.id)))}),t?(0,c.jsx)("div",{className:"woocommerce-address-autocomplete-branding",dangerouslySetInnerHTML:{__html:(0,us.sanitizeHTML)(t)}}):null]})},_s=(0,x.getSettingWithCoercion)("addressAutocompleteProviders",[],(e=>!!Array.isArray(e)&&e.every((e=>"string"==typeof e.name&&"string"==typeof e.id&&"string"==typeof e.branding_html))));function ks(e){const{country:t,registeredProviders:s}=(0,_.useSelect)((t=>{const s="shipping"===e?"shippingAddress":"billingAddress";return{country:t("wc/store/cart").getCartData()?.[s]?.country,registeredProviders:t("wc/store/checkout").getRegisteredAutocompleteProviders()}}),[e]),{setActiveAddressAutocompleteProvider:o}=(0,_.useDispatch)("wc/store/checkout");(0,d.useEffect)((()=>{if(!window?.wc?.addressAutocomplete?.providers)return o("",e),void(window?.wc?.addressAutocomplete?.activeProvider&&(window.wc.addressAutocomplete.activeProvider[e]=null));for(const s of _s){const r=window?.wc?.addressAutocomplete?.providers?.[s.id];if(r&&r.canSearch(t))return o(r.id,e),void(window.wc.addressAutocomplete.activeProvider[e]=r)}o("",e),window?.wc?.addressAutocomplete?.activeProvider&&(window.wc.addressAutocomplete.activeProvider[e]=null)}),[e,t,o,s])}const bs=({addressType:e,id:t,...s})=>{ks(e);const o=(0,d.useRef)(null),r=(0,d.useRef)(null),n=(0,x.getSettingWithCoercion)("addressAutocompleteProviders",[],(e=>!!Array.isArray(e)&&e.every((e=>"string"==typeof e.name&&"string"==typeof e.id&&"string"==typeof e.branding_html)))),{country:i,registeredProviders:a}=(0,_.useSelect)((t=>{const s=t(X.cartStore),o=t(X.checkoutStore),r="shipping"===e?"shippingAddress":"billingAddress",c=s.getCartData();return{country:c?.[r]?.country||"",registeredProviders:o.getRegisteredAutocompleteProviders()||[]}}),[e]),{setActiveAddressAutocompleteProvider:l}=(0,_.useDispatch)(X.checkoutStore),{setBillingAddress:p,setShippingAddress:m}=(0,_.useDispatch)(X.cartStore),[u,h]=(0,d.useState)(""),g=(0,_.useSelect)((t=>t(X.checkoutStore).getActiveAutocompleteProvider(e)),[e]);(0,d.useEffect)((()=>{if(!window?.wc?.addressAutocomplete?.providers)return;const e=n.find((e=>e.id===g))?.branding_html||"";h(e)}),[i,a,l,e,n,g]);const[k,b]=(0,d.useState)([]),[w,y]=(0,d.useState)(""),[v,f]=(0,d.useState)(!1),S=(0,d.useRef)(null);(0,d.useEffect)((()=>{if(v||w.length<3||S.current)return void b([]);const t=window?.wc?.addressAutocomplete?.activeProvider?.[e];t&&t.search(w,i).then((e=>{e&&e.length?b(e):b([])})).catch((()=>{b([])}))}),[w]),(0,d.useEffect)((()=>()=>{S.current&&clearTimeout(S.current)}),[]),(0,d.useEffect)((()=>{const e=o.current?.inputRef?.current;if(e)return r.current=new MutationObserver((()=>{"on"===e.getAttribute("data-disable-autocomplete")?(e.setAttribute("data-1p-ignore","true"),e.setAttribute("autocomplete","none")):(e.removeAttribute("data-1p-ignore"),e.setAttribute("autocomplete",s.autoComplete||""));const t=e.parentElement;if(t){const s=document.activeElement===e,o=e.selectionStart,r=e.selectionEnd;t.appendChild(t.removeChild(e)),s&&(e.focus(),null!==o&&null!==r&&e.setSelectionRange(o,r))}})),r.current.observe(e,{attributes:!0,attributeFilter:["data-disable-autocomplete"]}),()=>{r.current&&(r.current.disconnect(),r.current=null)}}),[s.autoComplete]);const[j,C]=(0,d.useState)(-1),P=`address-suggestions-${e}-list`,E=j>=0?`suggestion-item-${e}-${j}`:void 0;return(0,c.jsxs)("div",{className:"wc-block-components-address-autocomplete-container",children:[(0,c.jsx)(Ut.ValidatedTextInput,{...s,id:t,ref:o,onChange:e=>{s.onChange(e),v||S.current||y(e)},onKeyDown:t=>{if(0!==k.length)if("ArrowDown"===t.key)t.preventDefault(),C((e=>e<k.length-1?e+1:0));else if("ArrowUp"===t.key)t.preventDefault(),C((e=>e>0?e-1:k.length-1));else if("Enter"===t.key){if(t.preventDefault(),j>=0&&j<k.length){const t=k[j],s=window?.wc?.addressAutocomplete?.activeProvider?.[e];s&&(f(!0),S.current=setTimeout((()=>{S.current=null}),1e3),s.select(t.id,i).then((t=>{("shipping"===e?m:p)({...t})})).finally((()=>{f(!1),b([]),C(-1)})))}}else"Escape"===t.key&&(b([]),C(-1))},onBlurCapture:()=>{setTimeout((()=>{b([]),C(-1)}),200)},"aria-expanded":k.length>0,"aria-owns":k.length>0?P:void 0,"aria-activedescendant":E,"aria-autocomplete":"list",role:"combobox","data-disable-autocomplete":w.length>=3?"on":"off",icon:n.length>0?(0,c.jsx)("div",{className:"wc-block-components-address-autocomplete-icon","aria-hidden":"true"}):null}),w.length>=3&&k.length>0?(0,c.jsx)(gs,{selectedSuggestion:j,suggestions:k,branding:u,addressType:e,onSuggestionClick:async t=>{const s=window?.wc?.addressAutocomplete?.activeProvider?.[e];if(s){f(!0),S.current=setTimeout((()=>{S.current=null}),1e3);try{const o=await s.select(t,i);("shipping"===e?m:p)({...o})}finally{f(!1),b([]),C(-1)}}}}):null]})},ws=({formId:e,address1:t,address2:s,addressType:o,onChange:r})=>{const n=ds(t.field,e,o),i=ds(s.field,e,o),a=(0,x.getSettingWithCoercion)("addressAutocompleteProviders",[],(e=>!!Array.isArray(e)&&e.every((e=>"string"==typeof e.name&&"string"==typeof e.id&&"string"==typeof e.branding_html)))),l=a.length>0?bs:Ut.ValidatedTextInput;return(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)(l,{...n,type:t.field.type,...a.length>0?{addressType:o}:{},className:"wc-block-components-address-form__address_1",value:t.value,onChange:e=>r("address_1",e)}),s.field&&!s.field.hidden&&(0,c.jsx)(ls,{field:s.field,props:i,onChange:e=>r("address_2",e),value:s.value})]})};var ys=s(7740);const xs=e=>((e,t)=>Object.entries(e).reduce(((e,[s,o])=>({...e,[t(0,s)]:o})),{}))(e,((e,t)=>(0,ys.L)(t))),vs=e=>{const t=(e=>{const t=(0,d.useRef)({cart:{},checkout:{},customer:{}}),{cartData:s,prefersCollection:o,shouldCreateAccount:r,orderNotes:c,additionalFields:n,activePaymentMethod:i,customerId:a}=(0,_.useSelect)((e=>{const t=e(X.cartStore),s=e(X.checkoutStore),o=e(X.paymentStore);return{cartData:t.getCartData(),prefersCollection:s.prefersCollection(),shouldCreateAccount:s.getShouldCreateAccount(),orderNotes:s.getOrderNotes(),additionalFields:s.getAdditionalFields(),activePaymentMethod:o.getActivePaymentMethod(),customerId:s.getCustomerId()}}),[]),l=(0,d.useMemo)((()=>{const{coupons:t,shippingRates:l,shippingAddress:d,billingAddress:p,items:m,itemsCount:u,itemsWeight:h,needsShipping:g,totals:_,extensions:k}=s,b={cart:{coupons:t.map((e=>e.code)),shippingRates:[...new Set(l.map((e=>e.shipping_rates.find((e=>e.selected))?.rate_id)).filter(Boolean))],items:m.map((e=>Array(Math.ceil(e.quantity)).fill(e.id))).flat(),itemsType:[...new Set(m.map((e=>e.type)))],itemsCount:u,itemsWeight:h,needsShipping:g,prefersCollection:"boolean"==typeof o&&o,totals:{total_price:Number(_.total_price),total_tax:Number(_.total_tax)},extensions:k},checkout:{createAccount:r,customerNote:c,additionalFields:Object.entries(n).reduce(((e,[t,s])=>(U.includes(t)&&(e[t]=s),e)),{}),paymentMethod:i},customer:{id:a,billingAddress:p,shippingAddress:d,additionalFields:Object.entries(n).reduce(((e,[t,s])=>($.includes(t)&&(e[t]=s),e)),{}),..."billing"===e||"shipping"===e?{address:"billing"===e?p:d}:{}}};return{cart:xs(b.cart),checkout:xs(b.checkout),customer:xs(b.customer)}}),[s,o,r,c,n,i,a,e]);return t.current&&ge()(t.current,l)||(t.current=l),t.current})(e);return window.schemaParser?{parser:window.schemaParser,data:t}:{parser:null,data:t}},fs=(e,t,s,o="")=>{const r=(0,d.useRef)([]),{parser:c,data:n}=vs(s),i=be(e,t,o).map((e=>{const s=t[e.key]||{};if(c){if(ms(s,"required")){let t={};t=Object.keys(s.required).some((e=>"cart"===e||"checkout"===e||"customer"===e))?{type:"object",properties:s.required}:s.required;try{const s=c.validate(t,n);e.required=s}catch(e){x.CURRENT_USER_IS_ADMIN&&console.error(e)}}if(ms(s,"hidden")){let t={};t=Object.keys(s.hidden).some((e=>"cart"===e||"checkout"===e||"customer"===e))?{type:"object",properties:s.hidden}:s.hidden;try{const s=c.validate(t,n);e.hidden=s}catch(e){x.CURRENT_USER_IS_ADMIN&&console.error(e)}}}return e}));if(!r.current||!ge()(r.current,i)){const e=i.map((e=>({...e,hidden:"boolean"==typeof e.hidden&&e.hidden,required:"boolean"==typeof e.required&&e.required})));r.current=e}return r.current},Ss={};function js(e){let t=e;return function(e){const s=t;return t=e,s}}const Cs=js(),Ps=js(),Es=({id:e="",fields:t,onChange:s,addressType:r="shipping",values:n,children:i,isEditing:a,ariaDescribedBy:l=""})=>{const m=(0,p.useInstanceId)(Es),u=(0,d.useRef)(!0),{defaultFields:h}=pt(),g=is(t),k=is("country"in n?n.country:""),b=fs(g,h,r,k),w=et(b),y=et(a),x=et(n),f=(0,d.useRef)({}),{errors:S,previousErrors:j}=((e,t,s)=>{const{parser:o,data:r}=vs(t),c=(0,d.useRef)(Ss),n=et(c.current);if(!r)return{errors:c.current,previousErrors:void 0};let i;if(s)i=s;else switch(t){case"billing":case"shipping":i=r.customer.address||{};break;case"contact":case"order":i=r.checkout.additional_fields||{};break;default:i={}}const a=e.reduce(((e,t)=>(ms(t,"validation")&&!t.hidden&&(t.required||i[t.key])&&(e[t.key]=t.validation),e)),{});let l=Ss;if(Object.keys(a).length>0&&o){const s={type:"object",properties:{}};switch(t){case"shipping":s.properties={customer:{type:"object",properties:{shipping_address:{type:"object",properties:a}}}};break;case"billing":s.properties={customer:{type:"object",properties:{billing_address:{type:"object",properties:a}}}};break;default:s.properties={checkout:{type:"object",properties:{additional_fields:{type:"object",properties:a}}}}}const c=o.compile(s),n=c(r);l=!n&&c.errors?((e,t)=>e.reduce(((e,s)=>{var o;const r=(c=s.instancePath,c.split("/").pop()?.replace("~1","/"));var c;const n=t.find((e=>e.key===r));if(!n||!r)return e;const i=(0,jt.getFieldLabel)(n.label),a=(0,v.sprintf)(
// translators: %s is the label of the field.
// translators: %s is the label of the field.
(0,v.__)("%s is invalid","woocommerce"),i);if(r)switch(s.keyword){case"errorMessage":e[r]=null!==(o=s.message)&&void 0!==o?o:a;break;case"pattern":e[r]=(0,v.sprintf)(
// translators: %1$s is the label of the field, %2$s is the pattern.
// translators: %1$s is the label of the field, %2$s is the pattern.
(0,v.__)("%1$s must match the pattern %2$s","woocommerce"),i,s.params.pattern);break;default:e[r]=a}return e}),{}))(c.errors,e):Ss}const p=e.map((e=>l[e.key]?[e.key,l[e.key]]:e.hidden||!e.required&&!i[e.key]?null:"postcode"===e.key&&"country"in i&&!(0,jt.isPostcode)({postcode:i.postcode,country:i.country})?[e.key,(0,v.__)("Please enter a valid postcode","woocommerce")]:"email"===e.key&&"email"in i&&!(0,Ct.isEmail)(i.email)?[e.key,(0,v.__)("Please enter a valid email address","woocommerce")]:null)).filter(pe.nonNullable);return ge()(c.current,Object.fromEntries(p))||(c.current=Object.fromEntries(p)),{errors:c.current,previousErrors:n}})(b,r,"shipping"===r?n:void 0);return(0,d.useEffect)((()=>{if(Object.entries(S).forEach((([e,t])=>{const s=f.current[e];t&&(s?.setErrorMessage(t),(0,_.select)(X.validationStore).getValidationError(`${r}_${e}`)||(0,_.dispatch)(X.validationStore).setValidationErrors({[`${r}_${e}`]:{message:t,hidden:!!s?.isFocused()}}))})),j){const e=[];Object.entries(j).forEach((([t])=>{const s=f.current[t];t in S||(e.push(`${r}_${t}`),s?.setErrorMessage(""))})),e.length&&(0,_.dispatch)(X.validationStore).clearValidationErrors(e)}}),[S,j,r,n]),(0,d.useEffect)((()=>{f.current?.postcode?.revalidate()}),[k]),(0,d.useEffect)((()=>{let t;if(!u.current&&a&&f.current&&y!==a){const s=b.find((e=>!1===e.hidden));if(!s)return;const{id:o}=ds(s,e||`${m}`,r),c=document.getElementById(o);c&&(t=setTimeout((()=>{c.focus()}),300))}return u.current=!1,()=>{clearTimeout(t)}}),[a,b,e,m,r,y]),(0,d.useEffect)((()=>{if(ge()(w,b))return;const e={...n,...Object.fromEntries(b.filter((e=>e.hidden)).map((e=>[e.key,""])))};ze()(n,e)||s(e)}),[s,b,w,n]),(0,d.useEffect)((()=>{if((!ge()(w,b)||!ge()(x,n))&&("country"in n&&((e,t)=>{const s=`${e}_country`,o=(0,_.select)(X.validationStore).getValidationError(s),r=t.city||t.state||t.postcode;try{if(!t.country&&r)throw(0,v.__)("Please select your country","woocommerce");if("billing"===e&&t.country&&!Object.keys(M).includes(t.country))throw(0,v.__)("Sorry, we do not allow orders from the selected country","woocommerce");if("shipping"===e&&t.country&&!Object.keys(D).includes(t.country))throw(0,v.__)("Sorry, we do not ship orders to the selected country","woocommerce");o&&(0,_.dispatch)(X.validationStore).clearValidationError(s)}catch(e){o?(0,_.dispatch)(X.validationStore).showValidationError(s):(0,_.dispatch)(X.validationStore).setValidationErrors({[s]:{message:String(e),hidden:!1}})}})(r,n),"state"in n)){const e=b.find((e=>"state"===e.key));e&&((e,t,s)=>{const o=`${e}_state`,r=(0,_.select)(X.validationStore).getValidationError(o),c=s.required,n="shipping"===e?Cs(t):Ps(t),i=!!n&&!ze()(n,t);r?!c||t.state?(0,_.dispatch)(X.validationStore).clearValidationError(o):i||(0,_.dispatch)(X.validationStore).showValidationError(o):!r&&c&&!t.state&&t.country&&(0,_.dispatch)(X.validationStore).setValidationErrors({[o]:{message:(0,v.sprintf)(/* translators: %s will be the state field label in lowercase e.g. "state" */ /* translators: %s will be the state field label in lowercase e.g. "state" */
(0,v.__)("Please select a %s","woocommerce"),s.label.toLowerCase()),hidden:!0}})})(r,n,e)}}),[n,x,r,b,w]),e=e||`${m}`,(0,c.jsxs)("div",{id:e,className:"wc-block-components-address-form",children:[b.map((t=>{var i;if(t.hidden)return null;const a=ds(t,e,r),d=(e=>{const{autoCapitalize:t,autoComplete:s,placeholder:o,...r}=e;return r})(a);if("email"===t.key&&(a.id="email",a.errorId="billing_email"),"checkbox"===t.type){const e=t.key in n&&n[t.key],o={checked:Boolean(e),onChange:e=>{s({...n,[t.key]:e})},...d};return t.required?(0,c.jsx)(Ut.ValidatedCheckboxControl,{...t.errorMessage?{errorMessage:t.errorMessage}:{},...o},t.key):(0,c.jsx)(Ut.CheckboxControl,{...o},t.key)}if("address_1"===t.key&&"address_1"in n){const o=ps("address_1",b,n),i=ps("address_2",b,n);return(0,pe.isNull)(o)||(0,pe.isNull)(i)?null:(0,c.jsx)(ws,{address1:o,address2:i,addressType:r,formId:e,onChange:(e,t)=>{s({...n,[e]:t})}},t.key)}if("address_2"===t.key)return null;if("country"===t.key&&"country"in n){const e="shipping"===r?ss:ts;return(0,c.jsx)(e,{...a,value:n.country,onChange:e=>{s({...n,country:e,state:"",postcode:""})}},t.key)}if("state"===t.key&&"state"in n&&"country"in n){const e="shipping"===r?ns:cs;return(0,c.jsx)(e,{...a,country:n.country,value:n.state,onChange:e=>s({...n,state:e})},t.key)}return"select"===t.type&&"options"in t?void 0===t.options?null:(0,c.jsx)(Qt,{...a,label:a.label||"",className:(0,o.A)("wc-block-components-select-input",`wc-block-components-select-input-${t.key}`.replaceAll("/","-")),value:t.key in n?n[t.key]:"",onChange:e=>{s({...n,[t.key]:e})},options:t.options,required:t.required,errorMessage:a.errorMessage||void 0},t.key):(0,c.jsx)(Ut.ValidatedTextInput,{ref:e=>f.current[t.key]=e,...a,type:t.type,ariaDescribedBy:l,value:null!==(i=(0,_e.decodeEntities)(n[t.key]))&&void 0!==i?i:"",onChange:e=>s({...n,[t.key]:e}),customFormatter:e=>"postcode"===t.key?e.trimStart().toUpperCase():e},t.key)})),i]})},Ns=Es;s(1121);const As=({isEditing:e=!1,addressCard:t,addressForm:s,shouldAnimate:r=!1})=>{const n=(0,o.A)("wc-block-components-address-address-wrapper",{"is-editing":e,"is-animated":r});return(0,c.jsxs)("div",{className:n,children:[(0,c.jsx)("div",{className:"wc-block-components-address-card-wrapper",children:t}),(0,c.jsx)("div",{className:"wc-block-components-address-form-wrapper",children:s})]})},Is=e=>(0,pe.isObject)(O[e.country])&&(0,pe.isString)(O[e.country][e.state])?(0,_e.decodeEntities)(O[e.country][e.state]):e.state,Rs=e=>(0,pe.isString)(B[e.country])?(0,_e.decodeEntities)(B[e.country]):e.country;s(8796);const Ts=({address:e,onEdit:t,target:s,isExpanded:o})=>{const r=(0,x.getSetting)("countryData",{});let n=(0,x.getSetting)("defaultAddressFormat","{name}\n{company}\n{address_1}\n{address_2}\n{city}\n{state}\n{postcode}\n{country}");(0,pe.objectHasProp)(r,e?.country)&&(0,pe.objectHasProp)(r[e.country],"format")&&(0,pe.isString)(r[e.country].format)&&(n=r[e.country].format);const{name:i,address:a}=((e,t)=>{const s=(e=>["{name}","{name_upper}","{first_name} {last_name}","{last_name} {first_name}","{first_name_upper} {last_name_upper}","{last_name_upper} {first_name_upper}","{first_name} {last_name_upper}","{first_name_upper} {last_name}","{last_name} {first_name_upper}","{last_name_upper} {first_name}"].find((t=>e.indexOf(t)>=0))||"")(t),o=t.replace(`${s}\n`,""),r=[["{company}",e?.company||""],["{address_1}",e?.address_1||""],["{address_2}",e?.address_2||""],["{city}",e?.city||""],["{state}",Is(e)],["{postcode}",e?.postcode||""],["{country}",Rs(e)],["{company_upper}",(e?.company||"").toUpperCase()],["{address_1_upper}",(e?.address_1||"").toUpperCase()],["{address_2_upper}",(e?.address_2||"").toUpperCase()],["{city_upper}",(e?.city||"").toUpperCase()],["{state_upper}",Is(e).toUpperCase()],["{state_code}",e?.state||""],["{postcode_upper}",(e?.postcode||"").toUpperCase()],["{country_upper}",Rs(e).toUpperCase()]],c=[["{name}",e?.first_name+(e?.first_name&&e?.last_name?" ":"")+e?.last_name],["{name_upper}",(e?.first_name+(e?.first_name&&e?.last_name?" ":"")+e?.last_name).toUpperCase()],["{first_name}",e?.first_name||""],["{last_name}",e?.last_name||""],["{first_name_upper}",(e?.first_name||"").toUpperCase()],["{last_name_upper}",(e?.last_name||"").toUpperCase()]];let n=s;c.forEach((([e,t])=>{n=n.replace(e,t)}));let i=o;r.forEach((([e,t])=>{i=i.replace(e,t)}));const a=i.replace(/^,\s|,\s$/g,"").replace(/\n{2,}/,"\n").split("\n").filter(Boolean);return{name:n,address:a}})(e,n),l="shipping"===s?(0,v.__)("Edit shipping address","woocommerce"):(0,v.__)("Edit billing address","woocommerce");return(0,c.jsxs)("div",{className:"wc-block-components-address-card",children:[(0,c.jsxs)("address",{children:[(0,c.jsx)("span",{className:"wc-block-components-address-card__address-section",children:(0,_e.decodeEntities)(i)}),(0,c.jsx)("div",{className:"wc-block-components-address-card__address-section",children:a.filter((e=>!!e)).map(((e,t)=>(0,c.jsx)("span",{children:(0,_e.decodeEntities)(e)},"address-"+t)))}),e.phone?(0,c.jsx)("div",{className:"wc-block-components-address-card__address-section",children:e.phone},"address-phone"):""]}),t&&(0,c.jsx)(as.$,{render:(0,c.jsx)("span",{}),className:"wc-block-components-address-card__edit","aria-controls":s,"aria-expanded":o,"aria-label":l,onClick:e=>{e.preventDefault(),t()},type:"button",children:(0,v.__)("Edit","woocommerce")})]})},Ms=()=>{const{shippingAddress:e,setShippingAddress:t,setBillingAddress:s,useShippingAsBilling:o,editingShippingAddress:r,setEditingShippingAddress:n}=pt(),{dispatchCheckoutEvent:i}=We(),[a,l]=(0,d.useState)(!1),{isInitialized:p}=dt(),{validationErrors:m}=(0,_.useSelect)((e=>({validationErrors:e(X.validationStore).getValidationErrors()})),[e]);(0,d.useEffect)((()=>{const t=Object.keys(e).some((e=>void 0!==m[`shipping_${e}`]));p&&t&&!1===r&&n(!0)}),[r,e,p,m]);const u=(0,d.useCallback)((e=>{t(e),o&&(s(e),i("set-billing-address")),i("set-shipping-address")}),[i,s,t,o]),h=(0,d.useCallback)((()=>{l(!0),n(!0)}),[n]);return(0,c.jsx)(As,{isEditing:r,shouldAnimate:a,addressCard:(0,c.jsx)(Ts,{address:e,target:"shipping",onEdit:h,isExpanded:r}),addressForm:(0,c.jsx)(Ns,{id:"shipping",addressType:"shipping",onChange:u,values:e,fields:V,isEditing:r})})},Ds=()=>{const{defaultFields:e,setBillingAddress:t,shippingAddress:s,billingAddress:o,useShippingAsBilling:r,setUseShippingAsBilling:n,setEditingBillingAddress:i}=pt(),{isEditor:a}=b(),l=0===(0,x.getSetting)("currentUserId"),p=()=>{const r={...s};e?.phone?.hidden&&delete r.phone,e?.company?.hidden&&delete r.company,(Object.keys(r).length!==Object.keys(o).length||!Object.keys(r).every((e=>r[e]===o[e])))&&t(r)};(0,Xt.Su)((()=>{r&&p()}));const m=a?Kt:d.Fragment,u=r?[me.SHIPPING_ADDRESS,me.BILLING_ADDRESS]:[me.SHIPPING_ADDRESS];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ut.StoreNoticesContainer,{context:u}),(0,c.jsx)(m,{children:(0,c.jsx)(Ms,{})}),(0,c.jsx)(Ut.CheckboxControl,{className:"wc-block-checkout__use-address-for-billing",label:(0,v.__)("Use same address for billing","woocommerce"),checked:r,onChange:e=>{n(e),e?p():(i(!0),(e=>{if(!e||!l)return;const s=(e=>{const t=be(V,x.defaultFields,e.country),s=Object.assign({},e);return t.forEach((({key:t})=>{"country"!==t&&"state"!==t&&ye(t,e)&&(s[t]="")})),s})(e);t(s)})(o))}})]})},Bs=({defaultTitle:e=(0,v.__)("Step","woocommerce"),defaultDescription:t=(0,v.__)("Step description text.","woocommerce"),defaultShowStepNumber:s=!0})=>({title:{type:"string",default:e},description:{type:"string",default:t},showStepNumber:{type:"boolean",default:s}}),Os={...Bs({defaultTitle:(0,v.__)("Shipping address","woocommerce"),defaultDescription:(0,v.__)("Enter the address where you want your order delivered.","woocommerce")}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},Ls=JSON.parse('{"DD":"Shipping Address","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-shipping-address-block",{apiVersion:Ls.XV,title:Ls.DD,icon:{src:(0,c.jsx)(i.A,{icon:$t.A,className:"wc-block-editor-components-block-icon"})},attributes:Os,edit:({attributes:e,setAttributes:t})=>{const{showShippingFields:s}=pt();return s?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ot,{}),(0,c.jsxs)(zt,{setAttributes:t,attributes:e,className:(0,o.A)("wc-block-checkout__shipping-fields",e?.className),children:[(0,c.jsx)(Ds,{}),(0,c.jsx)(qt,{block:jt.innerBlockAreas.SHIPPING_ADDRESS})]})]}):null},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Wt,{})})});var Fs=s(7223);s(6223);const Vs=P?`<a href="${P}" target="_blank">${(0,v.__)("Terms and Conditions","woocommerce")}</a>`:(0,v.__)("Terms and Conditions","woocommerce"),$s=C?`<a href="${C}" target="_blank">${(0,v.__)("Privacy Policy","woocommerce")}</a>`:(0,v.__)("Privacy Policy","woocommerce"),Us=(0,v.sprintf)(/* translators: %1$s terms page link, %2$s privacy page link. */ /* translators: %1$s terms page link, %2$s privacy page link. */
(0,v.__)("By proceeding with your purchase you agree to our %1$s and %2$s","woocommerce"),Vs,$s),Hs=(0,v.sprintf)(/* translators: %1$s terms page link, %2$s privacy page link. */ /* translators: %1$s terms page link, %2$s privacy page link. */
(0,v.__)("You must accept our %1$s and %2$s to continue with your purchase.","woocommerce"),Vs,$s),zs=JSON.parse('{"DD":"Terms and Conditions","XV":3}');s(5763),(0,a.registerBlockType)("woocommerce/checkout-terms-block",{apiVersion:zs.XV,title:zs.DD,icon:{src:(0,c.jsx)(i.A,{icon:Fs.A,className:"wc-block-editor-components-block-icon"})},edit:({attributes:{checkbox:e,text:t,showSeparator:s},setAttributes:r})=>{const n=(0,l.useBlockProps)(),i=t||(e?Hs:Us);return(0,c.jsxs)("div",{...n,children:[(0,c.jsxs)(l.InspectorControls,{children:[(!P||!C)&&(0,c.jsxs)(Bt.Notice,{className:"wc-block-checkout__terms_notice",status:"warning",isDismissible:!1,children:[(0,v.__)("Link to your store's Terms and Conditions and Privacy Policy pages by creating pages for them.","woocommerce"),(0,c.jsx)("br",{}),!P&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),(0,c.jsx)(Bt.ExternalLink,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=advanced`,children:(0,v.__)("Setup a Terms and Conditions page","woocommerce")})]}),!C&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),(0,c.jsx)(Bt.ExternalLink,{href:`${x.ADMIN_URL}options-privacy.php`,children:(0,v.__)("Setup a Privacy Policy page","woocommerce")})]})]}),P&&C&&!(i.includes(P)&&i.includes(C))&&(0,c.jsx)(Bt.Notice,{className:"wc-block-checkout__terms_notice",status:"warning",isDismissible:!1,actions:Us!==t?[{label:(0,v.__)("Restore default text","woocommerce"),onClick:()=>r({text:""})}]:[],children:(0,c.jsx)("p",{children:(0,v.__)("Ensure you add links to your policy pages in this section.","woocommerce")})}),(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Display options","woocommerce"),children:[(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Require checkbox","woocommerce"),checked:e,onChange:()=>r({checkbox:!e})}),(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Show separator","woocommerce"),checked:s,onChange:()=>r({showSeparator:!s})})]})]}),(0,c.jsx)("div",{className:(0,o.A)("wc-block-checkout__terms",{"wc-block-checkout__terms--with-separator":s}),children:e?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ut.CheckboxControl,{id:"terms-condition",checked:!1}),(0,c.jsx)(l.RichText,{value:i,onChange:e=>r({text:e})})]}):(0,c.jsx)(l.RichText,{tagName:"span",value:i,onChange:e=>r({text:e})})})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});var qs=s(5634),Ws=s(3558);s(6713);const Xs=[(0,v.__)("Too weak","woocommerce"),(0,v.__)("Weak","woocommerce"),(0,v.__)("Medium","woocommerce"),(0,v.__)("Strong","woocommerce"),(0,v.__)("Very strong","woocommerce")],Ys=({password:e="",onChange:t})=>{var s;const r=(0,p.useInstanceId)(Ys,"woocommerce-password-strength-meter");let n=-1;e.length>0&&(n=(e=>void 0===window.zxcvbn?(0,Ws.Bi)(e,[{id:0,value:Xs[0],minDiversity:0,minLength:0},{id:1,value:Xs[1],minDiversity:1,minLength:4},{id:2,value:Xs[2],minDiversity:2,minLength:8},{id:3,value:Xs[3],minDiversity:4,minLength:12},{id:4,value:Xs[4],minDiversity:4,minLength:20}]).id:window.zxcvbn(e).score)(e));const i=et(n);return(0,d.useEffect)((()=>{n!==i&&t&&t(n)}),[n,i,t]),(0,c.jsxs)("div",{id:r,className:(0,o.A)("wc-block-components-password-strength",{hidden:-1===n}),children:[(0,c.jsx)("label",{htmlFor:r+"-meter",className:"screen-reader-text",children:(0,v.__)("Password strength","woocommerce")}),(0,c.jsx)("meter",{id:r+"-meter",className:"wc-block-components-password-strength__meter",min:0,max:4,value:n>-1?n:0,children:null!==(s=Xs[n])&&void 0!==s?s:""}),!!Xs[n]&&(0,c.jsxs)("div",{id:r+"-result",className:"wc-block-components-password-strength__result",children:[(0,c.jsx)("span",{className:"screen-reader-text","aria-live":"polite",children:(0,v.sprintf)(/* translators: %s: Password strength */ /* translators: %s: Password strength */
(0,v.__)("Password strength: %1$s (%2$d characters long)","woocommerce"),Xs[n],e.length)})," ",(0,c.jsx)("span",{"aria-hidden":!0,children:Xs[n]})]})]})},Gs=Ys,Js=()=>{const[e,t]=(0,d.useState)(0),{customerPassword:s}=(0,_.useSelect)((e=>({customerPassword:e(X.checkoutStore).getCustomerPassword()})),[]),{__internalSetCustomerPassword:o}=(0,_.useDispatch)(X.checkoutStore),{setValidationErrors:r,clearValidationError:n}=(0,_.useDispatch)(X.validationStore);return(0,d.useEffect)((()=>{s&&(e<2?r({"account-password":{message:(0,v.__)("Please create a stronger password","woocommerce"),hidden:!0}}):n("account-password"))}),[n,s,e,r]),(0,c.jsx)(Ut.ValidatedTextInput,{type:"password",label:(0,v.__)("Create a password","woocommerce"),className:"wc-block-components-address-form__password",value:s,required:!0,errorId:"account-password",onChange:e=>{o(e),e||r({"account-password":{message:(0,v.__)("Please enter a valid password","woocommerce"),hidden:!0}})},feedback:(0,c.jsx)(Gs,{password:s,onChange:e=>t(e)})})},Ks="wc-guest-checkout-notice",Zs=()=>{const{shouldCreateAccount:e}=(0,_.useSelect)((e=>({shouldCreateAccount:e(X.checkoutStore).getShouldCreateAccount()}))),{__internalSetShouldCreateAccount:t,__internalSetCustomerPassword:s}=(0,_.useDispatch)(X.checkoutStore),o=(0,x.getSetting)("checkoutAllowsGuest",!1),r=(0,x.getSetting)("checkoutAllowsSignup",!1),n=o&&r,i=!(0,x.getSetting)("generatePassword",!1)&&(n&&e||!o);return o||n||i?(0,c.jsxs)(c.Fragment,{children:[o&&(0,c.jsx)("p",{id:Ks,className:"wc-block-checkout__guest-checkout-notice",children:(0,v.__)("You are currently checking out as a guest.","woocommerce")}),n&&(0,c.jsx)(Ut.CheckboxControl,{className:"wc-block-checkout__create-account",label:(0,v.sprintf)(/* translators: Store name */ /* translators: Store name */
(0,v.__)("Create an account with %s","woocommerce"),(0,x.getSetting)("siteTitle","")),checked:e,onChange:e=>{t(e),s("")}}),i&&(0,c.jsx)(Js,{})]}):null},Qs=()=>{const{additionalFields:e,customerId:t}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{additionalFields:t.getAdditionalFields(),customerId:t.getCustomerId()}})),{setAdditionalFields:s}=(0,_.useDispatch)(X.checkoutStore),{billingAddress:o,setEmail:r}=pt(),{dispatchCheckoutEvent:n}=We(),i={email:o.email,...e};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ut.StoreNoticesContainer,{context:me.CONTACT_INFORMATION}),(0,c.jsx)(Ns,{id:"contact",addressType:"contact",ariaDescribedBy:Ks,onChange:e=>{const{email:t,...o}=e;r(t),n("set-email-address"),s(o)},values:i,fields:$,children:!t&&(0,c.jsx)(Zs,{})})]})},eo={...Bs({defaultTitle:(0,v.__)("Contact information","woocommerce"),defaultDescription:(0,v.__)("We'll use this email to send you details and updates about your order.","woocommerce")}),className:{type:"string",default:""},lock:{type:"object",default:{remove:!0,move:!0}}},to=JSON.parse('{"DD":"Contact Information","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-contact-information-block",{apiVersion:to.XV,title:to.DD,icon:{src:(0,c.jsx)(i.A,{icon:qs.A,className:"wc-block-editor-components-block-icon"})},attributes:eo,edit:({attributes:e,setAttributes:t})=>(0,c.jsxs)(zt,{attributes:e,setAttributes:t,className:(0,o.A)("wc-block-checkout__contact-fields",e?.className),children:[(0,c.jsx)(l.InspectorControls,{children:(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Account creation and guest checkout","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Account creation and guest checkout settings can be managed in your store settings.","woocommerce")}),(0,c.jsx)(Bt.ExternalLink,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=account`,children:(0,v.__)("Manage account settings","woocommerce")})]})}),(0,c.jsx)(Kt,{children:(0,c.jsx)(Qs,{})}),(0,c.jsx)(qt,{block:jt.innerBlockAreas.CONTACT_INFORMATION})]}),save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Wt,{})})});const so=()=>{const{billingAddress:e,setShippingAddress:t,setBillingAddress:s,useBillingAsShipping:o,editingBillingAddress:r,setEditingBillingAddress:n}=pt(),{dispatchCheckoutEvent:i}=We(),{isInitialized:a}=dt(),{validationErrors:l}=(0,_.useSelect)((e=>({validationErrors:e(X.validationStore).getValidationErrors()})),[e]);(0,d.useEffect)((()=>{const t=Object.keys(e).some((e=>void 0!==l[`billing_${e}`]));a&&t&&!1===r&&n(!0)}),[r,e,a,l]);const p=(0,d.useCallback)((e=>{s(e),o&&(t(e),i("set-shipping-address")),i("set-billing-address")}),[i,s,t,o]);return(0,c.jsx)(As,{isEditing:r,addressCard:(0,c.jsx)(Ts,{address:e,target:"billing",onEdit:()=>{n(!0)},isExpanded:r}),addressForm:(0,c.jsx)(Ns,{id:"billing",addressType:"billing",onChange:p,values:e,fields:V,isEditing:r})})},oo=()=>{const{defaultFields:e,billingAddress:t,setShippingAddress:s,useBillingAsShipping:o}=pt(),{isEditor:r}=b();(0,Xt.Su)((()=>{if(o){const{email:o,...r}=t,c={...r};e?.phone?.hidden&&delete c.phone,e?.company?.hidden&&delete c.company,s(c)}}));const n=r?Kt:d.Fragment,i=o?[me.BILLING_ADDRESS,me.SHIPPING_ADDRESS]:[me.BILLING_ADDRESS];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ut.StoreNoticesContainer,{context:i}),(0,c.jsx)(n,{children:(0,c.jsx)(so,{})})]})},ro=(0,v.__)("Billing address","woocommerce"),co=(0,v.__)("Enter the billing address that matches your payment method.","woocommerce"),no=(0,v.__)("Billing and shipping address","woocommerce"),io=(0,v.__)("Enter the billing and shipping address that matches your payment method.","woocommerce"),ao={...Bs({defaultTitle:ro,defaultDescription:co}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},lo=JSON.parse('{"DD":"Billing Address","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-billing-address-block",{apiVersion:lo.XV,title:lo.DD,icon:{src:(0,c.jsx)(i.A,{icon:$t.A,className:"wc-block-editor-components-block-icon"})},attributes:ao,edit:({attributes:e,setAttributes:t})=>{const{showBillingFields:s,forcedBillingAddress:r,useBillingAsShipping:n}=pt();return s||n?(e.title=((e,t)=>t?e===ro?no:e:e===no?ro:e)(e.title,r),e.description=((e,t)=>t?e===co?io:e:e===io?co:e)(e.description,r),(0,c.jsxs)(zt,{setAttributes:t,attributes:e,className:(0,o.A)("wc-block-checkout__billing-fields",e?.className),children:[(0,c.jsx)(Ot,{}),(0,c.jsx)(oo,{}),(0,c.jsx)(qt,{block:jt.innerBlockAreas.BILLING_ADDRESS})]})):null},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Wt,{})})});var po=s(6012);const mo=(0,v.__)("Place Order","woocommerce"),uo=(0,v.__)("Return to Cart","woocommerce"),ho={placeOrderButtonLabel:{type:"string",default:mo},returnToCartButtonLabel:{type:"string",default:uo}},go=(e,t)=>{if(!e.title.raw)return e.slug;const s=1===t.filter((t=>t.title.raw===e.title.raw)).length;return e.title.raw+(s?"":` - ${e.slug}`)},_o=({setPageId:e,pageId:t,labels:s})=>{const o=(0,_.useSelect)((e=>e("core").getEntityRecords("postType","page",{status:"publish",orderby:"title",order:"asc",per_page:100})),[])||null;return o?(0,c.jsx)(Bt.PanelBody,{title:s.title,children:(0,c.jsx)(Bt.SelectControl,{label:(0,v.__)("Link to","woocommerce"),value:t,options:[{label:s.default,value:0},...o.map((e=>({label:go(e,o),value:parseInt(e.id,10)})))],onChange:t=>e(parseInt(t,10))})}):null};var ko=s(5181);s(2840);const bo=({href:e,children:t,element:s="a"})=>{const o=e||N;if(!o)return null;const r=s;return(0,c.jsxs)(r,{..."a"===s?{href:o}:{},className:"wc-block-components-checkout-return-to-cart-button",children:[(0,c.jsx)(i.A,{icon:ko.A}),t]})};s(6882);const wo=(0,d.forwardRef)(((e,t)=>{const{className:s,children:r,variant:n="contained",removeTextWrap:i=!1,...a}=e,l=(0,o.A)("wc-block-components-button","wp-element-button",s,n);if("href"in e)return(0,c.jsx)(as.$,{render:(0,c.jsx)("a",{ref:t,href:e.href,children:(0,c.jsx)("div",{className:"wc-block-components-button__text",children:r})}),className:l,...a});const d=i?e.children:(0,c.jsx)("div",{className:"wc-block-components-button__text",children:e.children});return(0,c.jsx)(as.$,{ref:t,className:l,...a,children:d})})),yo=({onChange:e,placeholder:t,value:s,children:o,...r})=>(0,c.jsxs)(wo,{...r,children:[(0,c.jsx)(l.RichText,{multiline:!1,allowedFormats:[],value:s,placeholder:t,onChange:e}),o]}),xo=window.wc.priceFormat;s(8599);const vo=JSON.parse('{"DD":"Actions","uK":{"lock":{"type":"object","default":{"remove":true,"move":true}},"cartPageId":{"type":"number","default":0},"showReturnToCart":{"type":"boolean","default":true},"className":{"type":"string","default":""},"priceSeparator":{"type":"string","default":"Â·"}},"XV":3}');s(7883);const fo={apiVersion:vo.XV,title:vo.DD,example:{attributes:{showPrice:!0,placeOrderButtonLabel:(0,v.__)("Place Order","woocommerce"),showReturnToCart:!1}},icon:{src:(0,c.jsx)(i.A,{icon:po.A,className:"wc-block-editor-components-block-icon"})},attributes:{...ho,...vo.uK},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()}),edit:({attributes:e,setAttributes:t})=>{const s=(0,l.useBlockProps)(),{cartPageId:r=0,showReturnToCart:n=!1,placeOrderButtonLabel:i,returnToCartButtonLabel:a}=e,{cartTotals:p}=Me(),m=(0,xo.getCurrencyFromPriceResponse)(p),{current:u}=(0,d.useRef)(r),h=(0,_.useSelect)((e=>u||e("core/editor").getCurrentPostId()),[u]),g=s.className.includes("is-style-with-price");return(0,c.jsxs)("div",{...s,children:[(0,c.jsxs)(l.InspectorControls,{children:[(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Options","woocommerce"),children:[(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)('Show a "Return to Cart" link',"woocommerce"),help:(0,v.__)("Recommended to enable only if there is no Cart link in the header.","woocommerce"),checked:n,onChange:()=>t({showReturnToCart:!n})}),g&&(0,c.jsx)(Bt.TextControl,{label:(0,v.__)("Price separator","woocommerce"),id:"price-separator",value:e.priceSeparator,onChange:e=>{t({priceSeparator:e})}})]}),n&&!(h===j&&0===u)&&(0,c.jsx)(_o,{pageId:r,setPageId:e=>t({cartPageId:e}),labels:{title:(0,v.__)("Return to Cart button","woocommerce"),default:(0,v.__)("WooCommerce Cart Page","woocommerce")}})]}),(0,c.jsx)("div",{className:"wc-block-checkout__actions",children:(0,c.jsxs)("div",{className:"wc-block-checkout__actions_row",children:[n&&(0,c.jsx)(bo,{element:"span",children:(0,c.jsx)(l.RichText,{multiline:!1,allowedFormats:[],value:a,placeholder:uo,onChange:e=>{t({returnToCartButtonLabel:e})}})}),(0,c.jsx)(yo,{className:(0,o.A)("wc-block-cart__submit-button","wc-block-components-checkout-place-order-button",{"wc-block-components-checkout-place-order-button--full-width":!n}),value:i,placeholder:mo,onChange:e=>{t({placeOrderButtonLabel:e})},children:g&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("style",{children:`.wp-block-woocommerce-checkout-actions-block {\n\t\t\t\t\t\t\t\t\t\t.wc-block-components-checkout-place-order-button__separator {\n\t\t\t\t\t\t\t\t\t\t\t&::after {\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: "${e.priceSeparator}";\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}`}),(0,c.jsx)("div",{className:"wc-block-components-checkout-place-order-button__separator"}),(0,c.jsx)("div",{className:"wc-block-components-checkout-place-order-button__price",children:(0,c.jsx)(Ut.FormattedMonetaryAmount,{value:p.total_price,currency:m})})]})})]})})]})}};(0,a.registerBlockType)("woocommerce/checkout-actions-block",fo);const So=()=>{const{additionalFields:e}=(0,_.useSelect)((e=>({additionalFields:e(X.checkoutStore).getAdditionalFields()})),[]),{isEditor:t}=b(),{setAdditionalFields:s}=(0,_.useDispatch)(X.checkoutStore),o={...e},r=t?Kt:d.Fragment;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ut.StoreNoticesContainer,{context:me.ORDER_INFORMATION}),(0,c.jsx)(r,{children:(0,c.jsx)(Ns,{id:"order",addressType:"order",onChange:e=>{s(e)},fields:U,values:o})})]})},jo={...Bs({defaultTitle:(0,v.__)("Additional order information","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!1,remove:!0}}},Co=JSON.parse('{"DD":"Additional information","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-additional-information-block",{apiVersion:Co.XV,title:Co.DD,attributes:jo,icon:{src:(0,c.jsx)(i.A,{icon:Fs.A,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e,setAttributes:t})=>{const{defaultFields:s}=pt(),r=fs(U,s,"order");return 0===r.length||r.every((e=>!!e.hidden))?null:(0,c.jsx)(zt,{setAttributes:t,attributes:e,className:(0,o.A)("wc-block-checkout__additional-information-fields",e?.className),children:(0,c.jsx)(So,{})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});var Po=s(7715);const Eo=({disabled:e,onChange:t,placeholder:s,value:o})=>{const[r,n]=(0,d.useState)(""!==o),[i,a]=(0,d.useState)("");return(0,c.jsxs)("div",{className:"wc-block-checkout__add-note",children:[(0,c.jsx)(Ut.CheckboxControl,{disabled:e,label:(0,v.__)("Add a note to your order","woocommerce"),checked:r,onChange:e=>{n(e),e?o!==i&&t(i):(t(""),a(o))}}),r&&(0,c.jsx)(Ut.Textarea,{disabled:e,onTextChange:t,placeholder:s,value:o})]})},No=({className:e})=>{const{needsShipping:t}=Xe(),{isProcessing:s,orderNotes:r}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{isProcessing:t.isProcessing(),orderNotes:t.getOrderNotes()}})),{__internalSetOrderNotes:n}=(0,_.useDispatch)(X.checkoutStore);return(0,c.jsx)(Ut.FormStep,{id:"order-notes",showStepNumber:!1,className:(0,o.A)("wc-block-checkout__order-notes",e),disabled:s,children:(0,c.jsx)(Eo,{disabled:s,onChange:n,placeholder:t?(0,v.__)("Notes about your order, e.g. special notes for delivery.","woocommerce"):(0,v.__)("Notes about your order.","woocommerce"),value:r})})};s(9003);const Ao=JSON.parse('{"DD":"Order Note","XV":3}');s(4255),(0,a.registerBlockType)("woocommerce/checkout-order-note-block",{apiVersion:Ao.XV,title:Ao.DD,icon:{src:(0,c.jsx)(i.A,{icon:Po.A,className:"wc-block-editor-components-block-icon"})},edit:()=>{const e=(0,l.useBlockProps)();return(0,c.jsx)("div",{...e,children:(0,c.jsx)(Kt,{children:(0,c.jsx)(No,{})})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const Io=(0,c.jsxs)(r.SVG,{xmlns:"http://www.w3.org/2000/SVG",viewBox:"0 0 24 24",fill:"none",children:[(0,c.jsx)("path",{stroke:"currentColor",strokeWidth:"1.5",fill:"none",d:"M6 3.75h12c.69 0 1.25.56 1.25 1.25v14c0 .69-.56 1.25-1.25 1.25H6c-.69 0-1.25-.56-1.25-1.25V5c0-.69.56-1.25 1.25-1.25z"}),(0,c.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.9 7.5A1.1 1.1 0 018 6.4h8a1.1 1.1 0 011.1 1.1v2a1.1 1.1 0 01-1.1 1.1H8a1.1 1.1 0 01-1.1-1.1v-2zm1.2.1v1.8h7.8V7.6H8.1z",clipRule:"evenodd"}),(0,c.jsx)("path",{fill:"currentColor",d:"M8.5 12h1v1h-1v-1zM8.5 14h1v1h-1v-1zM8.5 16h1v1h-1v-1zM11.5 12h1v1h-1v-1zM11.5 14h1v1h-1v-1zM11.5 16h1v1h-1v-1zM14.5 12h1v1h-1v-1zM14.5 14h1v1h-1v-1zM14.5 16h1v1h-1v-1z"})]});s(9961);const Ro=({children:e,className:t,screenReaderLabel:s,showSpinner:r=!1,isLoading:n=!0})=>(0,c.jsxs)("div",{className:(0,o.A)(t,{"wc-block-components-loading-mask":n}),children:[n&&r&&(0,c.jsx)(Ut.Spinner,{}),(0,c.jsx)("div",{className:(0,o.A)({"wc-block-components-loading-mask__children":n}),"aria-hidden":n,children:e}),n&&(0,c.jsx)("span",{className:"screen-reader-text",children:s||(0,v.__)("Loadingâ¦","woocommerce")})]});s(1962);const To=({instanceId:e,isLoading:t=!1,onSubmit:s,displayCouponForm:r=!1})=>{const[n,i]=(0,d.useState)(""),[a,l]=(0,d.useState)(r),p=`wc-block-components-totals-coupon__input-${e}`,{validationErrorId:m}=(0,_.useSelect)((t=>({validationErrorId:t(X.validationStore).getValidationErrorId(e)})),[e]),u=(0,d.useRef)(null);return(0,c.jsx)(Ut.Panel,{className:"wc-block-components-totals-coupon",initialOpen:a,hasBorder:!1,headingLevel:2,title:(0,v.__)("Add coupons","woocommerce"),state:[a,l],children:(0,c.jsx)(Ro,{screenReaderLabel:(0,v.__)("Applying couponâ¦","woocommerce"),isLoading:t,showSpinner:!1,children:(0,c.jsxs)("div",{className:"wc-block-components-totals-coupon__content",children:[(0,c.jsxs)("form",{className:"wc-block-components-totals-coupon__form",id:"wc-block-components-totals-coupon__form",children:[(0,c.jsx)(Ut.ValidatedTextInput,{id:p,errorId:"coupon",className:"wc-block-components-totals-coupon__input",label:(0,v.__)("Enter code","woocommerce"),value:n,ariaDescribedBy:m||"",onChange:e=>{i(e)},focusOnMount:!0,validateOnMount:!1,showError:!1,ref:u}),(0,c.jsxs)(wo,{className:(0,o.A)("wc-block-components-totals-coupon__button",{"wc-block-components-totals-coupon__button--loading":t}),disabled:t||!n,onClick:e=>{e.preventDefault(),void 0!==s?s(n)?.then((e=>{e?(i(""),l(!1)):u.current?.focus&&u.current.focus()})):(i(""),l(!0))},type:"submit",children:[t&&(0,c.jsx)(Ut.Spinner,{}),(0,v.__)("Apply","woocommerce")]})]}),(0,c.jsx)(Ut.ValidationInputError,{propertyName:"coupon",elementId:e})]})})})};s(619);const Mo={context:"summary"},Do=({cartCoupons:e=[],currency:t,isRemovingCoupon:s,removeCoupon:o,values:r,isLoading:n})=>{const{total_discount:i,total_discount_tax:a}=r,l=parseInt(i,10),d=(0,jt.applyCheckoutFilter)({arg:Mo,filterName:"coupons",defaultValue:e});if(!l&&0===d.length)return null;const p=parseInt(a,10),m=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?l+p:l;return(0,c.jsx)(Ut.TotalsItem,{className:"wc-block-components-totals-discount",currency:t,description:0!==d.length&&(0,c.jsx)(Ro,{screenReaderLabel:(0,v.__)("Removing couponâ¦","woocommerce"),isLoading:s,showSpinner:!1,children:(0,c.jsx)("ul",{className:"wc-block-components-totals-discount__coupon-list",children:d.map((e=>(0,c.jsx)(Ut.RemovableChip,{className:"wc-block-components-totals-discount__coupon-list-item",text:e.label,screenReaderText:(0,v.sprintf)(/* translators: %s Coupon code. */ /* translators: %s Coupon code. */
(0,v.__)("Coupon: %s","woocommerce"),e.label),disabled:s,onRemove:()=>{o(e.code)},radius:"large",ariaLabel:(0,v.sprintf)(/* translators: %s is a coupon code. */ /* translators: %s is a coupon code. */
(0,v.__)('Remove coupon "%s"',"woocommerce"),e.label)},"coupon-"+e.code)))})}),label:m?(0,v.__)("Discount","woocommerce"):(0,v.__)("Coupons","woocommerce"),value:m?-1*m:"-",showSkeleton:n})},Bo=(e="")=>{const{cartCoupons:t,cartIsLoading:s}=Me(),{applyCoupon:o,removeCoupon:r}=(0,_.useDispatch)(X.cartStore),{isApplyingCoupon:c,isRemovingCoupon:n,orderId:i}=(0,_.useSelect)((e=>({isApplyingCoupon:e(X.cartStore).isApplyingCoupon(),isRemovingCoupon:e(X.cartStore).isRemovingCoupon(),orderId:e(X.checkoutStore).getOrderId()})),[]),a=(0,d.useCallback)((e=>i&&i>0&&e?.data?.details?.checkout?e.data.details.checkout:e?.data?.details?.cart?e.data.details.cart:e.message),[i]);return{appliedCoupons:t,isLoading:s,applyCoupon:(0,d.useCallback)((t=>o(t).then((()=>((0,jt.applyCheckoutFilter)({filterName:"showApplyCouponNotice",defaultValue:!0,arg:{couponCode:t,context:e}})&&(0,_.dispatch)("core/notices").createNotice("info",(0,v.sprintf)(/* translators: %s coupon code. */ /* translators: %s coupon code. */
(0,v.__)('Coupon code "%s" has been applied to your cart.',"woocommerce"),t),{id:"coupon-form",type:"snackbar",context:e}),Promise.resolve(!0)))).catch((e=>{const t=a(e);return(0,_.dispatch)(X.validationStore).setValidationErrors({coupon:{message:(0,_e.decodeEntities)(t),hidden:!1}}),Promise.resolve(!1)}))),[o,a,e]),removeCoupon:(0,d.useCallback)((t=>r(t).then((()=>((0,jt.applyCheckoutFilter)({filterName:"showRemoveCouponNotice",defaultValue:!0,arg:{couponCode:t,context:e}})&&(0,_.dispatch)("core/notices").createNotice("info",(0,v.sprintf)(/* translators: %s coupon code. */ /* translators: %s coupon code. */
(0,v.__)('Coupon code "%s" has been removed from your cart.',"woocommerce"),(0,_e.decodeEntities)(t)),{id:"coupon-form",type:"snackbar",context:e}),Promise.resolve(!0)))).catch((t=>((0,_.dispatch)("core/notices").createErrorNotice(t.message,{id:"coupon-form",type:"snackbar",context:e}),Promise.resolve(!1))))),[r,e]),isApplyingCoupon:c,isRemovingCoupon:n}},Oo=()=>{const{cartIsLoading:e,isLoadingRates:t,hasPendingItemsOperations:s}=Me(),{isApplyingCoupon:o,isRemovingCoupon:r}=Bo(),c=(0,_.useSelect)((e=>e(X.checkoutStore).isCalculating()),[]);return{isLoading:e||t||o||r||c||s}};s(2405);const Lo=({tag:e="div",width:t="100%",height:s="8px",maxWidth:r="",className:n="",borderRadius:i="",isStatic:a=!1,ariaMessage:l})=>(0,c.jsx)(e,{className:(0,o.A)("wc-block-components-skeleton__element",{"wc-block-components-skeleton__element--static":a},n),...l?{"aria-live":"polite","aria-label":l}:{"aria-hidden":"true"},style:{width:t,height:s,borderRadius:i,maxWidth:r}}),Fo=({children:e,isLoading:t,skeleton:s})=>{const o=(0,p.useReducedMotion)(),[r,n]=(0,d.useState)(t),[i,a]=(0,d.useState)(null);return(0,d.useEffect)((()=>{if(o)return void n(t);let e;if(t)n(!0),a(Date.now());else if(i){const t=Date.now()-i,s=Math.max(0,2e3-t);e=setTimeout((()=>{n(!1),a(null)}),s)}return()=>{e&&clearTimeout(e)}}),[t,i,o]),(0,c.jsx)(c.Fragment,{children:r?s:e})};s(8413);const Vo=({currency:e,values:t,className:s,isEstimate:r=!1})=>{const n=(0,x.getSetting)("taxesEnabled",!0)&&(0,x.getSetting)("displayCartPricesIncludingTax",!1),{total_price:i,total_tax:a,tax_lines:l}=t,{receiveCart:p,...m}=Me(),{isLoading:u}=Oo(),h=(0,jt.applyCheckoutFilter)({filterName:"totalLabel",defaultValue:r?(0,v.__)("Estimated total","woocommerce"):(0,v.__)("Total","woocommerce"),extensions:m.extensions,arg:{cart:m}}),g=(0,jt.applyCheckoutFilter)({filterName:"totalValue",defaultValue:"<price/>",extensions:m.extensions,arg:{cart:m},validation:jt.productPriceValidation}),_=(0,c.jsx)(Ut.FormattedMonetaryAmount,{className:"wc-block-components-totals-footer-item-tax-value",currency:e,value:parseInt(i,10)}),k=(0,d.createInterpolateElement)(g,{price:_}),b=parseInt(a,10),w=l&&l.length>0?(0,v.sprintf)(/* translators: %s is a list of tax rates */ /* translators: %s is a list of tax rates */
(0,v.__)("Including %s","woocommerce"),l.map((({name:t,price:s})=>`${(0,xo.formatPrice)(s,e)} ${t}`)).join(", ")):(0,v.__)("Including <TaxAmount/> in taxes","woocommerce"),y=Ve(m.shippingRates),f=m.cartNeedsShipping,S=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{children:(0,v.__)("Including","woocommerce")}),(0,c.jsx)(Lo,{height:"1em",width:"45px",tag:"span",ariaMessage:(0,v.__)("Loading priceâ¦ ","woocommerce")})]});return(0,c.jsx)(Ut.TotalsItem,{className:(0,o.A)("wc-block-components-totals-footer-item",s),currency:e,label:h,value:k,description:(0,c.jsxs)(c.Fragment,{children:[n&&0!==b&&(0,c.jsx)("p",{className:"wc-block-components-totals-footer-item-tax",children:(0,c.jsx)(Fo,{isLoading:u,skeleton:S,children:(0,c.jsx)(c.Fragment,{children:(0,d.createInterpolateElement)(w,{TaxAmount:(0,c.jsx)(Ut.FormattedMonetaryAmount,{className:"wc-block-components-totals-footer-item-tax-value",currency:e,value:b})})})})}),r&&!y&&f&&(0,c.jsx)("p",{className:"wc-block-components-totals-footer-item-shipping",children:(0,v.__)("Shipping will be calculated at checkout","woocommerce")})]}),showSkeleton:u})},$o=()=>{const{shippingRates:e}=Me(),t=$e(e);return t?(0,c.jsx)("div",{className:"wc-block-components-totals-shipping__via",children:(0,_e.decodeEntities)(t.filter(((e,s)=>t.indexOf(e)===s)).join(", "))}):null},Uo=e=>{const t=(e=>(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.total_shipping,10)+parseInt(e.total_shipping_tax,10):parseInt(e.total_shipping,10))(e);return 0===t?(0,c.jsx)("strong",{children:(0,v.__)("Free","woocommerce")}):t};s(6562);const Ho=({label:e=(0,v.__)("Shipping","woocommerce"),placeholder:t=null,collaterals:s=null})=>{const{cartTotals:o,shippingRates:r}=Me(),{isLoading:n}=Oo(),i=Ve(r),a=$e(r),l=a.length>1,d=!i||l?e:a[0];return(0,c.jsx)("div",{className:"wc-block-components-totals-shipping",children:(0,c.jsx)(Ut.TotalsItem,{label:d,value:i?Uo(o):t,description:(0,c.jsxs)(c.Fragment,{children:[l&&(0,c.jsx)($o,{}),s&&(0,c.jsx)("div",{className:"wc-block-components-totals-shipping__collaterals",children:s})]}),currency:(0,xo.getCurrencyFromPriceResponse)(o),showSkeleton:n})})};var zo=s(559);const qo=()=>{const{extensions:e,receiveCart:t,...s}=Me(),o={extensions:e,cart:s,context:"woocommerce/checkout"};return(0,c.jsx)(jt.ExperimentalOrderMeta.Slot,{...o})},{Fill:Wo,Slot:Xo}=(0,jt.createSlotFill)("checkoutOrderSummaryActionArea"),Yo=JSON.parse('{"DD":"Order Summary","xY":{"align":false,"html":false,"multiple":false,"reusable":false,"inserter":false,"lock":false},"uK":{"lock":{"type":"object","default":{"remove":true}}},"XV":3}'),Go=[{attributes:Yo.uK,save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(l.InnerBlocks.Content,{})}),supports:Yo.xY,migrate:({attributes:e})=>[e,[(0,a.createBlock)("woocommerce/checkout-order-summary-cart-items-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-coupon-form-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-totals-block",{},[(0,a.createBlock)("woocommerce/checkout-order-summary-subtotal-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-fee-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-discount-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-shipping-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-taxes-block",{},[])])]],isEligible:(e,t)=>!t.some((e=>"woocommerce/checkout-order-summary-totals-block"===e.name))}],Jo=Go;s(6229),(0,a.registerBlockType)("woocommerce/checkout-order-summary-block",{apiVersion:Yo.XV,title:Yo.DD,icon:{src:(0,c.jsx)(i.A,{icon:Io,className:"wc-block-editor-components-block-icon"})},attributes:{className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},edit:({clientId:e})=>{const t=(0,l.useBlockProps)(),{cartTotals:s}=Me(),r=(0,xo.getCurrencyFromPriceResponse)(s),n=parseInt(s.total_price,10),i=Mt(jt.innerBlockAreas.CHECKOUT_ORDER_SUMMARY),{isLarge:a}=u(),[p,m]=(0,d.useState)(!1),h=(0,d.useId)(),g=a?{}:{role:"button",onClick:()=>m(!p),"aria-expanded":p,"aria-controls":h,tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||m(!p)}},_=[["woocommerce/checkout-order-summary-cart-items-block",{},[]],["woocommerce/checkout-order-summary-coupon-form-block",{},[]],["woocommerce/checkout-order-summary-totals-block",{},[]]];return Dt({clientId:e,registeredBlocks:i,defaultTemplate:_}),(0,c.jsxs)("div",{...t,children:[(0,c.jsxs)("div",{className:"wc-block-components-checkout-order-summary__title",...g,children:[(0,c.jsx)("p",{className:"wc-block-components-checkout-order-summary__title-text",role:"heading",children:(0,v.__)("Order summary","woocommerce")}),(0,c.jsx)(Ut.FormattedMonetaryAmount,{currency:r,value:n,className:"wc-block-components-checkout-order-summary__title-price"}),(0,c.jsx)("span",{className:"wc-block-components-checkout-order-summary__title-icon",children:(0,c.jsx)(Bt.Icon,{icon:p?zo.A:Zt.A})})]}),(0,c.jsxs)("div",{className:(0,o.A)("wc-block-components-checkout-order-summary__content",{"is-open":p}),id:h,children:[(0,c.jsx)(l.InnerBlocks,{allowedBlocks:i,template:_}),(0,c.jsx)("div",{className:"wc-block-components-totals-wrapper",children:(0,c.jsx)(Vo,{currency:r,values:s})}),(0,c.jsx)(qo,{})]})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(l.InnerBlocks.Content,{})}),deprecated:Jo});var Ko=s(6208),Zo=s(7035);const Qo={warning:"#F0B849",error:"#CC1818",success:"#46B450",info:"#0073AA"},er=({status:e="warning",...t})=>(0,c.jsxs)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:[(0,c.jsx)("path",{d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z",stroke:Qo[e],strokeWidth:"1.5"}),(0,c.jsx)("path",{d:"M13 7H11V13H13V7Z",fill:Qo[e]}),(0,c.jsx)("path",{d:"M13 15H11V17H13V15Z",fill:Qo[e]})]});s(4459);const tr=({href:e,title:t,description:s,warning:o})=>(0,c.jsxs)("a",{href:e,className:"wc-block-editor-components-external-link-card",target:"_blank",rel:"noreferrer",children:[(0,c.jsxs)("span",{className:"wc-block-editor-components-external-link-card__content",children:[(0,c.jsx)("strong",{className:"wc-block-editor-components-external-link-card__title",children:t}),s&&(0,c.jsx)("span",{className:"wc-block-editor-components-external-link-card__description",dangerouslySetInnerHTML:{__html:(0,us.sanitizeHTML)(s)}}),o?(0,c.jsxs)("span",{className:"wc-block-editor-components-external-link-card__warning",children:[(0,c.jsx)(i.A,{icon:(0,c.jsx)(er,{status:"error"})}),(0,c.jsx)("span",{children:o})]}):null]}),(0,c.jsx)(Bt.VisuallyHidden,{as:"span",children:/* translators: accessibility text */ /* translators: accessibility text */
(0,v.__)("(opens in a new tab)","woocommerce")}),(0,c.jsx)(i.A,{icon:Zo.A,className:"wc-block-editor-components-external-link-card__icon"})]}),sr=window.wp.autop,or=e=>e.replace(/<\/?[a-z][^>]*?>/gi,""),rr=(e,t)=>e.replace(/[\s|\.\,]+$/i,"")+t,cr=(e,t,s="&hellip;",o=!0)=>{const r=or(e),c=r.split(" ").splice(0,t).join(" ");return c===r?o?(0,sr.autop)(r):r:o?(0,sr.autop)(rr(c,s)):rr(c,s)},nr=(e,t,s=!0,o="&hellip;",r=!0)=>{const c=or(e),n=c.slice(0,t);if(n===c)return r?(0,sr.autop)(c):c;if(s)return(0,sr.autop)(rr(n,o));const i=n.match(/([\s]+)/g),a=i?i.length:0,l=c.slice(0,t+a);return r?(0,sr.autop)(rr(l,o)):rr(l,o)};s(9249);const ir=()=>(0,c.jsxs)("div",{className:"wc-block-components-skeleton wc-block-components-skeleton--checkout-payment","aria-live":"polite","aria-label":(0,v.__)("Loading payment optionsâ¦ ","woocommerce"),children:[(0,c.jsxs)("div",{className:"wc-block-components-skeleton--checkout-payment-container",children:[(0,c.jsx)(Lo,{height:"22px",width:"22px",borderRadius:"100%"}),(0,c.jsx)(Lo,{height:"22px",maxWidth:"148px"})]}),(0,c.jsx)(Lo,{height:"22px"})]});var ar=s(5614),lr=(s(7575),s(8034)),dr=s(2624),pr=s(4144);const mr=e=>{switch(e){case"success":case"warning":case"info":case"default":return"polite";default:return"assertive"}},ur=e=>{switch(e){case"success":return lr.A;case"warning":case"info":case"error":return dr.A;default:return pr.A}};var hr=s(195);const gr=({className:e,status:t="default",children:s,spokenMessage:r=s,onRemove:n=()=>{},isDismissible:a=!0,politeness:l=mr(t),summary:p})=>(((e,t)=>{const s="string"==typeof e?e:(0,d.renderToString)(e);(0,d.useEffect)((()=>{s&&(0,hr.speak)(s,t)}),[s,t])})(r,l),(0,c.jsxs)("div",{className:(0,o.A)(e,"wc-block-components-notice-banner","is-"+t,{"is-dismissible":a}),children:[(0,c.jsx)(i.A,{icon:ur(t)}),(0,c.jsxs)("div",{className:"wc-block-components-notice-banner__content",children:[p&&(0,c.jsx)("p",{className:"wc-block-components-notice-banner__summary",children:p}),s]}),!!a&&(0,c.jsx)(wo,{className:"wc-block-components-notice-banner__dismiss","aria-label":(0,v.__)("Dismiss this notice","woocommerce"),onClick:e=>{"function"==typeof e?.preventDefault&&e.preventDefault&&e.preventDefault(),n()},removeTextWrap:!0,children:(0,c.jsx)(i.A,{icon:ar.A})})]}));s(4147);const _r=()=>(0,c.jsx)(gr,{isDismissible:!1,className:"wc-block-checkout__no-payment-methods-notice",status:"error",children:(0,v.__)("There are no payment methods available. Please contact us for help placing your order.","woocommerce")});s(5193);const kr=()=>(0,c.jsx)(gr,{isDismissible:!1,className:"wc-block-checkout__only-express-payments-notice",status:"info",children:(0,v.__)("Only express payment methods are available for this order. Please select one to continue.","woocommerce")}),br=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,c.jsx)("path",{d:"M0 0h24v24H0z"}),(0,c.jsx)("path",{fill:"#000",fillRule:"nonzero",d:"M17.3 8v1c1 .2 1.4.9 1.4 1.7h-1c0-.6-.3-1-1-1-.8 0-1.3.4-1.3.9 0 .4.3.6 1.4 1 1 .2 2 .6 2 1.9 0 .9-.6 1.4-1.5 1.5v1H16v-1c-.9-.1-1.6-.7-1.7-1.7h1c0 .6.4 1 1.3 1 1 0 1.2-.5 1.2-.8 0-.4-.2-.8-1.3-1.1-1.3-.3-2.1-.8-2.1-1.8 0-.9.7-1.5 1.6-1.6V8h1.3zM12 10v1H6v-1h6zm2-2v1H6V8h8zM2 4v16h20V4H2zm2 14V6h16v12H4z"}),(0,c.jsx)("path",{stroke:"#000",strokeLinecap:"round",d:"M6 16c2.6 0 3.9-3 1.7-3-2 0-1 3 1.5 3 1 0 1-.8 2.8-.8"})]})});var wr=s(6600),yr=s(8486);s(9287);const xr={bank:wr.A,bill:yr.A,card:Ko.A,checkPayment:br},vr=({icon:e="",text:t=""})=>{const s=!!e,r=(0,d.useCallback)((e=>s&&(0,pe.isString)(e)&&(0,pe.objectHasProp)(xr,e)),[s]),n=(0,o.A)("wc-block-components-payment-method-label",{"wc-block-components-payment-method-label--with-icon":s});return(0,c.jsxs)("span",{className:n,children:[r(e)?(0,c.jsx)(i.A,{icon:xr[e]}):e,t]})},fr=e=>`wc-block-components-payment-method-icon wc-block-components-payment-method-icon--${e}`,Sr=({id:e,src:t=null,alt:s=""})=>t?(0,c.jsx)("img",{className:fr(e),src:t,alt:s}):null,jr=[{id:"alipay",alt:"Alipay",src:S+"payment-methods/alipay.svg"},{id:"amex",alt:"American Express",src:S+"payment-methods/amex.svg"},{id:"bancontact",alt:"Bancontact",src:S+"payment-methods/bancontact.svg"},{id:"diners",alt:"Diners Club",src:S+"payment-methods/diners.svg"},{id:"discover",alt:"Discover",src:S+"payment-methods/discover.svg"},{id:"eps",alt:"EPS",src:S+"payment-methods/eps.svg"},{id:"giropay",alt:"Giropay",src:S+"payment-methods/giropay.svg"},{id:"ideal",alt:"iDeal",src:S+"payment-methods/ideal.svg"},{id:"jcb",alt:"JCB",src:S+"payment-methods/jcb.svg"},{id:"laser",alt:"Laser",src:S+"payment-methods/laser.svg"},{id:"maestro",alt:"Maestro",src:S+"payment-methods/maestro.svg"},{id:"mastercard",alt:"Mastercard",src:S+"payment-methods/mastercard.svg"},{id:"multibanco",alt:"Multibanco",src:S+"payment-methods/multibanco.svg"},{id:"p24",alt:"Przelewy24",src:S+"payment-methods/p24.svg"},{id:"sepa",alt:"Sepa",src:S+"payment-methods/sepa.svg"},{id:"sofort",alt:"Sofort",src:S+"payment-methods/sofort.svg"},{id:"unionpay",alt:"Union Pay",src:S+"payment-methods/unionpay.svg"},{id:"visa",alt:"Visa",src:S+"payment-methods/visa.svg"},{id:"wechat",alt:"WeChat",src:S+"payment-methods/wechat.svg"}];s(6983);const Cr=({icons:e=[],align:t="center",className:s})=>{const r=(e=>{const t={};return e.forEach((e=>{let s={};"string"==typeof e&&(s={id:e,alt:e,src:null}),"object"==typeof e&&(s={id:e.id||"",alt:e.alt||"",src:e.src||null}),s.id&&(0,pe.isString)(s.id)&&!t[s.id]&&(t[s.id]=s)})),Object.values(t)})(e);if(0===r.length)return null;const n=(0,o.A)("wc-block-components-payment-method-icons",{"wc-block-components-payment-method-icons--align-left":"left"===t,"wc-block-components-payment-method-icons--align-right":"right"===t},s);return(0,c.jsx)("div",{className:n,children:r.map((e=>{const t={...e,...(s=e.id,jr.find((e=>e.id===s))||{})};var s;return(0,c.jsx)(Sr,{...t},"payment-method-icon-"+e.id)}))})},Pr=(e,t)=>{const s=[],o=(t,s)=>{const o=s+"_tax",r=(0,pe.objectHasProp)(e,s)&&(0,pe.isString)(e[s])?parseInt(e[s],10):0;return{key:s,label:t,value:r,valueWithTax:r+((0,pe.objectHasProp)(e,o)&&(0,pe.isString)(e[o])?parseInt(e[o],10):0)}};return s.push(o((0,v.__)("Subtotal:","woocommerce"),"total_items")),s.push(o((0,v.__)("Fees:","woocommerce"),"total_fees")),s.push(o((0,v.__)("Discount:","woocommerce"),"total_discount")),s.push({key:"total_tax",label:(0,v.__)("Taxes:","woocommerce"),value:parseInt(e.total_tax,10),valueWithTax:parseInt(e.total_tax,10)}),t&&s.push(o((0,v.__)("Shipping:","woocommerce"),"total_shipping")),s},Er=()=>{const{onCheckoutBeforeProcessing:e,onCheckoutValidationBeforeProcessing:t,onCheckoutAfterProcessingWithSuccess:s,onCheckoutAfterProcessingWithError:o,onSubmit:r}=(0,d.useContext)(rt),{onCheckoutValidation:c,onCheckoutSuccess:n,onCheckoutFail:i}=st.checkoutEvents,{isCalculating:a,isComplete:l,isIdle:p,isProcessing:m,customerId:u}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{isComplete:t.isComplete(),isIdle:t.isIdle(),isProcessing:t.isProcessing(),customerId:t.getCustomerId(),isCalculating:t.isCalculating()}}),[]),{paymentIsIdle:h,paymentIsStarted:g,paymentIsProcessing:k,paymentHasError:b,paymentIsReady:w,paymentIsDoingExpressPayment:y,activePaymentMethod:f,shouldSavePayment:S}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{paymentIsIdle:t.isPaymentIdle(),paymentIsStarted:t.isExpressPaymentStarted(),paymentIsProcessing:t.isPaymentProcessing(),paymentHasError:t.hasPaymentError(),paymentIsReady:t.isPaymentReady(),paymentIsDoingExpressPayment:t.isExpressPaymentMethodActive(),activePaymentMethod:t.getActivePaymentMethod(),shouldSavePayment:t.getShouldSavePaymentMethod()}}),[]),j={isIdle:h,isStarted:g,isProcessing:k,hasError:b,isReady:w,isDoingExpressPayment:y,get isPristine(){return G()("isPristine",{since:"9.6.0",alternative:"isIdle",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),h},get isFinished(){return G()("isFinished",{since:"9.6.0",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),b||w},get hasFailed(){return G()("hasFailed",{since:"9.6.0",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),b},get isSuccessful(){return G()("isSuccessful",{since:"9.6.0",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),w}},{__internalSetExpressPaymentError:C}=(0,_.useDispatch)(X.paymentStore),{onPaymentProcessing:P,onPaymentSetup:E}=(0,d.useContext)(ee),{shippingErrorStatus:N,shippingErrorTypes:A,onShippingRateSuccess:I,onShippingRateFail:R,onShippingRateSelectSuccess:T,onShippingRateSelectFail:M}=Ze(),{shippingRates:D,isLoadingRates:B,selectedRates:O,isSelectingRate:L,selectShippingRate:F,needsShipping:V}=Xe(),{billingAddress:$,shippingAddress:U}=(0,_.useSelect)((e=>e(X.cartStore).getCustomerData()),[]),{setShippingAddress:H}=(0,_.useDispatch)(X.cartStore),{cartItems:z,cartFees:q,cartTotals:W,extensions:Y}=Me(),{appliedCoupons:J}=Bo(),K=(0,d.useRef)(Pr(W,V)),Z=(0,d.useRef)({label:(0,v.__)("Total","woocommerce"),value:parseInt(W.total_price,10)});(0,d.useEffect)((()=>{K.current=Pr(W,V),Z.current={label:(0,v.__)("Total","woocommerce"),value:parseInt(W.total_price,10)}}),[W,V]);const Q=(0,d.useCallback)(((e="")=>{G()("setExpressPaymentError should only be used by Express Payment Methods (using the provided onError handler).",{alternative:"",plugin:"woocommerce-gutenberg-products-block",link:"https://github.com/woocommerce/woocommerce-gutenberg-products-block/pull/4228"}),C(e)}),[C]);return{activePaymentMethod:f,billing:{appliedCoupons:J,billingAddress:$,billingData:$,cartTotal:Z.current,cartTotalItems:K.current,currency:(0,xo.getCurrencyFromPriceResponse)(W),customerId:u,displayPricesIncludingTax:(0,x.getSetting)("displayCartPricesIncludingTax",!1)},cartData:{cartItems:z,cartFees:q,extensions:Y},checkoutStatus:{isCalculating:a,isComplete:l,isIdle:p,isProcessing:m},components:{LoadingMask:Ro,PaymentMethodIcons:Cr,PaymentMethodLabel:vr,ValidationInputError:Ut.ValidationInputError},emitResponse:{noticeContexts:me,responseTypes:pe.responseTypes},eventRegistration:{onCheckoutAfterProcessingWithError:o,onCheckoutAfterProcessingWithSuccess:s,onCheckoutBeforeProcessing:e,onCheckoutValidationBeforeProcessing:t,onCheckoutSuccess:n,onCheckoutFail:i,onCheckoutValidation:c,onPaymentProcessing:P,onPaymentSetup:E,onShippingRateFail:R,onShippingRateSelectFail:M,onShippingRateSelectSuccess:T,onShippingRateSuccess:I},onSubmit:r,paymentStatus:j,setExpressPaymentError:Q,shippingData:{isSelectingRate:L,needsShipping:V,selectedRates:O,setSelectedRates:F,setShippingAddress:H,shippingAddress:U,shippingRates:D,shippingRatesLoading:B},shippingStatus:{shippingErrorStatus:N,shippingErrorTypes:A},shouldSavePayment:S}};class Nr extends d.Component{state={errorMessage:"",hasError:!1};static getDerivedStateFromError(e){return{errorMessage:e.message,hasError:!0}}render(){const{hasError:e,errorMessage:t}=this.state,{isEditor:s}=this.props;if(e){let e=(0,v.__)("We are experiencing difficulties with this payment method. Please contact us for assistance.","woocommerce");(s||x.CURRENT_USER_IS_ADMIN)&&(e=t||(0,v.__)("There was an error with this payment method. Please verify it's configured correctly.","woocommerce"));const o=[{id:"0",content:e,isDismissible:!1,status:"error"}];return(0,c.jsx)(Ut.StoreNoticesContainer,{additionalNotices:o,context:me.PAYMENTS})}return this.props.children}}const Ar=Nr,Ir=({children:e,showSaveOption:t})=>{const{isEditor:s}=b(),{shouldSavePaymentMethod:o,customerId:r,shouldCreateAccount:n}=(0,_.useSelect)((e=>{const t=e(X.paymentStore),s=e(X.checkoutStore);return{shouldSavePaymentMethod:t.getShouldSavePaymentMethod(),customerId:s.getCustomerId(),shouldCreateAccount:s.getShouldCreateAccount()}}),[]),{__internalSetShouldSavePaymentMethod:i}=(0,_.useDispatch)(X.paymentStore),a=(0,x.getSetting)("checkoutAllowsGuest",!1),l=r>0||n||!a;return(0,d.useEffect)((()=>{!l&&o&&i(!1)}),[l,o,i]),(0,c.jsxs)(Ar,{isEditor:s,children:[e,l&&t&&(0,c.jsx)(Ut.CheckboxControl,{className:"wc-block-components-payment-methods__save-card-info",label:(0,v.__)("Save payment information to my account for future purchases.","woocommerce"),checked:o,onChange:()=>i(!o)})]})},Rr=()=>{const{activeSavedToken:e,activePaymentMethod:t,isExpressPaymentMethodActive:s,savedPaymentMethods:r,availablePaymentMethods:n}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{activeSavedToken:t.getActiveSavedToken(),activePaymentMethod:t.getActivePaymentMethod(),isExpressPaymentMethodActive:t.isExpressPaymentMethodActive(),savedPaymentMethods:t.getSavedPaymentMethods(),availablePaymentMethods:t.getAvailablePaymentMethods()}})),{__internalSetActivePaymentMethod:i}=(0,_.useDispatch)(X.paymentStore),a=(0,ot.getPaymentMethods)(),{...l}=Er(),{removeNotice:p}=(0,_.useDispatch)("core/notices"),{dispatchCheckoutEvent:m}=We(),{isEditor:u}=b(),h=Object.keys(n).map((e=>{const{edit:t,content:s,label:o,supports:r}=a[e],n=u?t:s;return{value:e,label:"string"==typeof o?o:(0,d.cloneElement)(o,{components:l.components}),name:`wc-saved-payment-method-token-${e}`,content:(0,c.jsx)(Ir,{showSaveOption:r.showSaveOption,children:(0,d.cloneElement)(n,{__internalSetActivePaymentMethod:i,...l})})}})),g=(0,d.useCallback)((e=>{i(e),p("wc-payment-error",me.PAYMENTS),m("set-active-payment-method",{paymentMethodSlug:e})}),[m,p,i]),k=0===Object.keys(r).length&&1===Object.keys(n).length,w=(0,o.A)({"disable-radio-control":k});return s?null:(0,c.jsx)(Ut.RadioControlAccordion,{highlightChecked:!0,id:"wc-payment-method-options",className:w,selected:e?null:t,onChange:g,options:h})},Tr="wc/store/cart",Mr=((0,v.__)("Unable to get cart data from the API.","woocommerce"),[]),Dr=[],Br={},Or={};V.forEach((e=>{Or[e]=""}));const Lr={};V.forEach((e=>{Lr[e]=""})),Lr.email="";const Fr={cartItemsPendingQuantity:[],cartItemsPendingDelete:[],productsPendingAdd:[],cartData:{coupons:[],shippingRates:[],shippingAddress:Or,billingAddress:Lr,items:[],itemsCount:0,itemsWeight:0,crossSells:[],needsShipping:!0,needsPayment:!1,hasCalculatedShipping:!0,fees:[],totals:{currency_code:"",currency_symbol:"",currency_minor_unit:2,currency_decimal_separator:".",currency_thousand_separator:",",currency_prefix:"",currency_suffix:"",total_items:"0",total_items_tax:"0",total_fees:"0",total_fees_tax:"0",total_discount:"0",total_discount_tax:"0",total_shipping:"0",total_shipping_tax:"0",total_price:"0",total_tax:"0",tax_lines:[]},errors:Mr,paymentMethods:[],paymentRequirements:[],extensions:Br},metaData:{updatingCustomerData:!1,updatingAddressFieldsForShippingRates:!1,updatingSelectedRate:!1,applyingCoupon:"",removingCoupon:"",isCartDataStale:!1},errors:Dr},Vr=({method:e,expires:t})=>{var s,o;return(0,v.sprintf)(/* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card, %3$s is referring to the expiry date.  */ /* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card, %3$s is referring to the expiry date.  */
(0,v.__)("%1$s ending in %2$s (expires %3$s)","woocommerce"),null!==(s=null!==(o=e?.display_brand)&&void 0!==o?o:e?.networks?.preferred)&&void 0!==s?s:e.brand,e.last4,t)},$r=({method:e})=>e.brand&&e.last4?(0,v.sprintf)(/* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card. */ /* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card. */
(0,v.__)("%1$s ending in %2$s","woocommerce"),e.brand,e.last4):(0,v.sprintf)(/* translators: %s is the name of the payment method gateway. */ /* translators: %s is the name of the payment method gateway. */
(0,v.__)("Saved token for %s","woocommerce"),e.gateway),Ur=()=>{const{activeSavedToken:e,activePaymentMethod:t,savedPaymentMethods:s}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{activeSavedToken:t.getActiveSavedToken(),activePaymentMethod:t.getActivePaymentMethod(),savedPaymentMethods:t.getSavedPaymentMethods()}})),{__internalSetActivePaymentMethod:o}=(0,_.useDispatch)(X.paymentStore),r=(()=>{let e;if((0,_.select)("core/editor")){const t={cartCoupons:ft.coupons,cartItems:ft.items,crossSellsProducts:ft.cross_sells,cartFees:ft.fees,cartItemsCount:ft.items_count,cartItemsWeight:ft.items_weight,cartNeedsPayment:ft.needs_payment,cartNeedsShipping:ft.needs_shipping,cartItemErrors:Mr,cartTotals:ft.totals,cartIsLoading:!1,cartErrors:Dr,billingData:Fr.cartData.billingAddress,billingAddress:Fr.cartData.billingAddress,shippingAddress:Fr.cartData.shippingAddress,extensions:Br,shippingRates:ft.shipping_rates,isLoadingRates:!1,cartHasCalculatedShipping:ft.has_calculated_shipping,paymentRequirements:ft.payment_requirements,receiveCart:()=>{}};e={cart:t,cartTotals:t.cartTotals,cartNeedsShipping:t.cartNeedsShipping,billingData:t.billingAddress,billingAddress:t.billingAddress,shippingAddress:t.shippingAddress,selectedShippingMethods:Ue(t.shippingRates),paymentMethods:ft.payment_methods,paymentRequirements:t.paymentRequirements}}else{const t=(0,_.select)(Tr),s=t.getCartData(),o=t.getCartErrors(),r=t.getCartTotals(),c=!t.hasFinishedResolution("getCartData"),n=t.isAddressFieldsForShippingRatesUpdating(),i=Ue(s.shippingRates);e={cart:{cartCoupons:s.coupons,cartItems:s.items,crossSellsProducts:s.crossSells,cartFees:s.fees,cartItemsCount:s.itemsCount,cartItemsWeight:s.itemsWeight,cartNeedsPayment:s.needsPayment,cartNeedsShipping:s.needsShipping,cartItemErrors:s.errors,cartTotals:r,cartIsLoading:c,cartErrors:o,billingData:xe(s.billingAddress),billingAddress:xe(s.billingAddress),shippingAddress:xe(s.shippingAddress),extensions:s.extensions,shippingRates:s.shippingRates,isLoadingRates:n,cartHasCalculatedShipping:s.hasCalculatedShipping,paymentRequirements:s.paymentRequirements,receiveCart:(0,_.dispatch)(Tr).receiveCart},cartTotals:s.totals,cartNeedsShipping:s.needsShipping,billingData:s.billingAddress,billingAddress:s.billingAddress,shippingAddress:s.shippingAddress,selectedShippingMethods:i,paymentMethods:s.paymentMethods,paymentRequirements:s.paymentRequirements}}return e})(),n=(0,ot.getPaymentMethods)(),i=Er(),{removeNotice:a}=(0,_.useDispatch)("core/notices"),{dispatchCheckoutEvent:l}=We(),p=(0,d.useMemo)((()=>{const e=Object.keys(s),t=new Set(e.flatMap((e=>s[e].map((e=>e.method.gateway))))),c=Array.from(t).filter((e=>n[e]?.canMakePayment(r)));return e.flatMap((e=>s[e].map((t=>{if(!c.includes(t.method.gateway))return;const s="cc"===e||"echeck"===e,r=t.method.gateway;return{name:`wc-saved-payment-method-token-${r}`,label:s?Vr(t):$r(t),value:t.tokenId.toString(),onChange:e=>{const t=`wc-${r}-payment-token`;o(r,{token:e,payment_method:r,[t]:e.toString(),isSavedToken:!0}),a("wc-payment-error",me.PAYMENTS),l("set-active-payment-method",{paymentMethodSlug:r})}}})))).filter((e=>void 0!==e))}),[s,n,o,a,l,r]),m=e&&n[t]&&void 0!==n[t]?.savedTokenComponent&&!(0,pe.isNull)(n[t].savedTokenComponent)?(0,d.cloneElement)(n[t].savedTokenComponent,{token:e,...i}):null;return p.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ut.RadioControl,{highlightChecked:!0,id:"wc-payment-method-saved-tokens",selected:e,options:p,onChange:()=>{}}),m]}):null};s(7215);const Hr=({noPaymentMethods:e=(0,c.jsx)(_r,{}),onlyExpressPayments:t=(0,c.jsx)(kr,{})})=>{const{paymentMethodsInitialized:s,expressPaymentMethodsInitialized:o,availablePaymentMethods:r,availableExpressPaymentMethods:n,savedPaymentMethods:i}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{paymentMethodsInitialized:t.paymentMethodsInitialized(),expressPaymentMethodsInitialized:t.expressPaymentMethodsInitialized(),availablePaymentMethods:t.getAvailablePaymentMethods(),availableExpressPaymentMethods:t.getAvailableExpressPaymentMethods(),savedPaymentMethods:t.getSavedPaymentMethods()}})),a=Object.keys(r).length>0,l=Object.keys(n).length>0;if(s&&o){if(!a&&!l)return e;if(l&&!a)return t}return(0,c.jsxs)(Fo,{isLoading:!s||!o,skeleton:(0,c.jsx)(ir,{}),children:[(0,c.jsx)(Ur,{}),Object.keys(i).length>0&&(0,c.jsx)(Ut.Label,{label:(0,v.__)("Use another payment method.","woocommerce"),screenReaderLabel:(0,v.__)("Other available payment methods","woocommerce"),wrapperElement:"p",wrapperProps:{className:["wc-block-components-checkout-step__description wc-block-components-checkout-step__description-payments-aligned"]}}),(0,c.jsx)(Rr,{})]})},zr=({noPaymentMethods:e})=>(0,c.jsx)(Hr,{noPaymentMethods:e});var qr=s(9143),Wr=s(5194);const Xr=({label:e,description:t,buttonLabel:s,buttonHref:o,icon:r=qr.A})=>(0,c.jsxs)(Bt.Placeholder,{icon:(0,c.jsx)(i.A,{icon:r}),label:e,className:"wc-block-checkout__configure-placeholder",children:[(0,c.jsx)("span",{className:"wc-block-checkout__configure-placeholder-description",children:t}),(0,c.jsx)(Bt.Button,{variant:"primary",href:o,target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:Wr.T.fN2,color:Wr.T.cai,pointerEvents:"all"},children:s})]}),Yr={...Bs({defaultTitle:(0,v.__)("Payment options","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},Gr=JSON.parse('{"DD":"Payment Options","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-payment-block",{apiVersion:Gr.XV,title:Gr.DD,icon:{src:(0,c.jsx)(i.A,{icon:Ko.A,className:"wc-block-editor-components-block-icon"})},attributes:Yr,edit:({attributes:e,setAttributes:t})=>{const s=(0,x.getSetting)("globalPaymentMethods"),r=(0,_.select)(X.paymentStore).getIncompatiblePaymentMethods(),n=(0,v.__)("Incompatible with block-based checkout","woocommerce"),i=f.wordCountType;return(0,c.jsxs)(zt,{attributes:e,setAttributes:t,className:(0,o.A)("wc-block-checkout__payment-method",e?.className),children:[(0,c.jsx)(l.InspectorControls,{children:s.length>0&&(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Methods","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("You currently have the following payment integrations active.","woocommerce")}),s.map((e=>{const t=!!r[e.id];let s;return s="words"===i?cr(e.description,30,void 0,!1):nr(e.description,30,"characters_including_spaces"===i,void 0,!1),(0,c.jsx)(tr,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=checkout&section=${e.id}`,title:e.title,description:s,...t?{warning:n}:{}},e.id)})),(0,c.jsx)(Bt.ExternalLink,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=checkout`,children:(0,v.__)("Manage payment methods","woocommerce")})]})}),(0,c.jsx)(Kt,{children:(0,c.jsx)(zr,{noPaymentMethods:(0,c.jsx)(Xr,{icon:Ko.A,label:(0,v.__)("Payment options","woocommerce"),description:(0,v.__)("Your store does not have any payment methods that support the Checkout block. Once you have configured a compatible payment method it will be displayed here.","woocommerce"),buttonLabel:(0,v.__)("Configure Payment Options","woocommerce"),buttonHref:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=checkout`})})}),(0,c.jsx)(qt,{block:jt.innerBlockAreas.PAYMENT_METHODS})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Wt,{})})});const Jr=(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,c.jsx)("path",{stroke:"#1E1E1E",strokeLinejoin:"round",strokeWidth:"1.5",d:"M18.25 12a6.25 6.25 0 1 1-12.5 0 6.25 6.25 0 0 1 12.5 0Z"}),(0,c.jsx)("path",{fill:"#1E1E1E",d:"M10 3h4v3h-4z"}),(0,c.jsx)("rect",{width:"1.5",height:"5",x:"11.25",y:"8",fill:"#1E1E1E",rx:".75"}),(0,c.jsx)("path",{fill:"#1E1E1E",d:"m15.7 4.816 1.66 1.078-1.114 1.718-1.661-1.078z"})]}),Kr=()=>((e=!1)=>{const{paymentMethodsInitialized:t,expressPaymentMethodsInitialized:s,availablePaymentMethods:o,availableExpressPaymentMethods:r}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{paymentMethodsInitialized:t.paymentMethodsInitialized(),expressPaymentMethodsInitialized:t.expressPaymentMethodsInitialized(),availableExpressPaymentMethods:t.getAvailableExpressPaymentMethods(),availablePaymentMethods:t.getAvailablePaymentMethods()}})),c=Object.values(o).map((({name:e})=>e)),n=Object.values(r).map((({name:e})=>e)),i=(0,ot.getPaymentMethods)(),a=(0,ot.getExpressPaymentMethods)(),l=Object.keys(i).reduce(((e,t)=>(c.includes(t)&&(e[t]=i[t]),e)),{}),d=Object.keys(a).reduce(((e,t)=>(n.includes(t)&&(e[t]=a[t]),e)),{}),p=is(l),m=is(d);return{paymentMethods:e?m:p,isInitialized:e?s:t}})(!0),Zr=["height","borderRadius"],Qr=e=>{const t=(0,_.select)(X.paymentStore).getAvailableExpressPaymentMethods();return Object.values(t).reduce(((t,s)=>t||s?.supportsStyle.some((t=>e.includes(t)))),!1)},ec=({attributes:e,setAttributes:t})=>{const{buttonHeight:s,buttonBorderRadius:o}=e;return(0,c.jsxs)(c.Fragment,{children:[Qr(["height"])&&(0,c.jsx)(Bt.RadioControl,{label:(0,v.__)("Button height","woocommerce"),selected:s,options:[{label:(0,v.__)("Small (40px)","woocommerce"),value:"40"},{label:(0,v.__)("Medium (48px)","woocommerce"),value:"48"},{label:(0,v.__)("Large (55px)","woocommerce"),value:"55"}],onChange:e=>t({buttonHeight:e})}),Qr(["borderRadius"])&&(0,c.jsx)("div",{className:"border-radius-control-container",children:(0,c.jsx)(l.HeightControl,{label:(0,v.__)("Button border radius","woocommerce"),value:o,onChange:e=>{const s=e.replace("px","");t({buttonBorderRadius:s})}})})]})},tc=({attributes:e,setAttributes:t})=>e.showButtonStyles?(0,c.jsx)(ec,{attributes:e,setAttributes:t}):null,sc=()=>{const e=(0,_.select)(X.paymentStore).getAvailableExpressPaymentMethods();return Object.entries(e).length<1?(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("You currently have no express payment integrations active.","woocommerce")}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("You currently have the following express payment integrations active.","woocommerce")}),Object.values(e).map((e=>(0,c.jsx)(tr,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=checkout&section=${encodeURIComponent(e.gatewayId)}`,title:e.title,description:e.description},e.name)))]})},oc=(0,c.jsxs)(c.Fragment,{children:[(0,v.__)("Apply uniform styles","woocommerce")," ",(0,c.jsx)("span",{className:"express-payment-styles-beta-badge",children:"Beta"})]}),rc=({attributes:e,setAttributes:t})=>(0,c.jsxs)(l.InspectorControls,{children:[Qr(Zr)&&(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Button Settings","woocommerce"),className:"express-payment-button-settings",children:[(0,c.jsx)(Bt.ToggleControl,{label:oc,checked:e.showButtonStyles,onChange:()=>t({showButtonStyles:!e.showButtonStyles}),help:(0,v.__)("Sets a consistent style for express payment buttons.","woocommerce")}),(0,c.jsxs)(Bt.Notice,{status:"warning",isDismissible:!1,className:"wc-block-checkout__notice express-payment-styles-notice",children:[(0,c.jsxs)("strong",{children:[(0,v.__)("Note","woocommerce"),":"]})," ",(0,v.__)("Some payment methods might not yet support all style controls","woocommerce")]}),(0,c.jsx)(tc,{attributes:e,setAttributes:t})]}),(0,c.jsx)(Bt.PanelBody,{title:(0,v.__)("Express Payment Methods","woocommerce"),children:(0,c.jsx)(sc,{})})]}),cc="wc/store/payment",nc=(0,d.createContext)({showButtonStyles:!1,buttonHeight:"48",buttonBorderRadius:"4"}),ic=()=>{const{isEditor:e}=b(),{showButtonStyles:t,buttonHeight:s,buttonBorderRadius:o}=(0,d.useContext)(nc),r=t?{height:s,borderRadius:o}:void 0,{activePaymentMethod:n,paymentMethodData:i}=(0,_.useSelect)((e=>{const t=e(cc);return{activePaymentMethod:t.getActivePaymentMethod(),paymentMethodData:t.getPaymentMethodData()}})),{__internalSetActivePaymentMethod:a,__internalSetExpressPaymentStarted:l,__internalSetPaymentIdle:p,__internalSetPaymentError:m,__internalSetPaymentMethodData:u,__internalSetExpressPaymentError:h}=(0,_.useDispatch)(cc),{paymentMethods:g}=Kr(),k=Er(),w=(0,d.useRef)(n),y=(0,d.useRef)(i),x=(0,d.useCallback)((e=>()=>{w.current=n,y.current=i,l(),a(e)}),[n,i,a,l]),f=(0,d.useCallback)((()=>{p(),a(w.current,y.current)}),[a,p]),S=(0,d.useCallback)((e=>{m(),u(e),h(e),a(w.current,y.current)}),[a,m,u,h]),j=(0,d.useCallback)(((e="")=>{G()("Express Payment Methods should use the provided onError handler instead.",{alternative:"onError",plugin:"woocommerce-gutenberg-products-block",link:"https://github.com/woocommerce/woocommerce-gutenberg-products-block/pull/4228"}),e?S(e):h("")}),[h,S]),C=Object.entries(g),P=C.length>1?"ul":"div",E=C.length>1?"li":"div",N=C.length>0?C.map((([t,s])=>{const o=e?s.edit:s.content;return(0,d.isValidElement)(o)?(0,c.jsx)(E,{id:`express-payment-method-${t}`,children:(0,d.cloneElement)(o,{...k,onClick:x(t),onClose:f,onError:S,setExpressPaymentError:j,buttonAttributes:r})},t):null})):(0,c.jsx)("div",{children:(0,v.__)("No registered Payment Methods","woocommerce")},"noneRegistered");return(0,c.jsx)(Ar,{isEditor:e,children:(0,c.jsx)(P,{className:"wc-block-components-express-payment__event-buttons",children:N})})};s(2831);const ac=()=>{const{isCalculating:e,isProcessing:t,isAfterProcessing:s,isBeforeProcessing:r,isComplete:n,hasError:i,availableExpressPaymentMethods:a={},expressPaymentMethodsInitialized:l,isExpressPaymentMethodActive:d,registeredExpressPaymentMethods:p={}}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore),s=e(X.paymentStore);return{isCalculating:t.isCalculating(),isProcessing:t.isProcessing(),isAfterProcessing:t.isAfterProcessing(),isBeforeProcessing:t.isBeforeProcessing(),isComplete:t.isComplete(),hasError:t.hasError(),availableExpressPaymentMethods:s.getAvailableExpressPaymentMethods(),expressPaymentMethodsInitialized:s.expressPaymentMethodsInitialized(),isExpressPaymentMethodActive:s.isExpressPaymentMethodActive(),registeredExpressPaymentMethods:s.getRegisteredExpressPaymentMethods()}}),[]),{isEditor:m}=b(),{hasRegisteredExpressPaymentMethods:u,hasRegisteredNotInitializedExpressPaymentMethods:h,hasNoValidRegisteredExpressPaymentMethods:g,availableExpressPaymentsCount:k}=(({availableExpressPaymentMethods:e={},expressPaymentMethodsInitialized:t=!1,registeredExpressPaymentMethods:s={}})=>{const o=Object.keys(s||{}),r=Object.keys(e||{}),c=o.length,n=r.length,i=c>0;return{hasRegisteredExpressPaymentMethods:i,hasRegisteredNotInitializedExpressPaymentMethods:!t&&i,hasNoValidRegisteredExpressPaymentMethods:t&&i&&!n,availableExpressPaymentsCount:n||2}})({availableExpressPaymentMethods:a,expressPaymentMethodsInitialized:l,registeredExpressPaymentMethods:p});if(!u||g)return m||x.CURRENT_USER_IS_ADMIN?(0,c.jsx)(Ut.StoreNoticesContainer,{context:me.EXPRESS_PAYMENTS}):null;const w=t||s||r||n&&!i||d,y=!d&&(e||h);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:(0,o.A)("wc-block-components-express-payment","wc-block-components-express-payment--checkout",{"wc-block-components-express-payment--disabled":w}),"aria-disabled":w,"aria-live":"polite",...w&&{"aria-busy":!0,"aria-label":(0,v.__)("Processing express checkout","woocommerce")},children:[(0,c.jsx)("div",{className:"wc-block-components-express-payment__title-container",children:(0,c.jsx)(Ut.Title,{className:"wc-block-components-express-payment__title",headingLevel:"2",children:h?(0,c.jsx)(Lo,{width:"127px",height:"18px",ariaMessage:(0,v.__)("Loading express payment areaâ¦","woocommerce")}):(0,v.__)(" Express Checkout","woocommerce")})}),(0,c.jsxs)("div",{className:"wc-block-components-express-payment__content",children:[(0,c.jsx)(Ut.StoreNoticesContainer,{context:me.EXPRESS_PAYMENTS}),y?(0,c.jsx)("ul",{className:"wc-block-components-express-payment__event-buttons",children:Array.from({length:k}).map(((e,t)=>(0,c.jsx)("li",{children:(0,c.jsx)(Lo,{height:"48px",ariaMessage:(0,v.__)("Loading express payment methodâ¦","woocommerce")})},t)))}):(0,c.jsx)(ic,{})]})]}),(0,c.jsx)("div",{className:"wc-block-components-express-payment-continue-rule wc-block-components-express-payment-continue-rule--checkout",children:(0,v.__)("Or continue below","woocommerce")})]})},lc=({className:e})=>{const{cartNeedsPayment:t}=Me();return t?(0,c.jsx)("div",{className:e,children:(0,c.jsx)(ac,{})}):null};s(6715);const dc=JSON.parse('{"DD":"Express Checkout","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-express-payment-block",{apiVersion:dc.XV,title:dc.DD,icon:{src:(0,c.jsx)(i.A,{style:{fill:"none"},icon:Jr,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e,setAttributes:t})=>{const{paymentMethods:s,isInitialized:r}=Kr(),n=Object.keys(s).length>0,i=(0,l.useBlockProps)({className:(0,o.A)({"wp-block-woocommerce-checkout-express-payment-block--has-express-payment-methods":n},e?.className),attributes:e});if(!r||!n)return null;const{buttonHeight:a,buttonBorderRadius:d,showButtonStyles:p}=e;return(0,c.jsxs)("div",{...i,children:[(0,c.jsx)(rc,{attributes:e,setAttributes:t}),(0,c.jsx)(nc.Provider,{value:{showButtonStyles:p,buttonHeight:a,buttonBorderRadius:d},children:(0,c.jsx)(lc,{})})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});var pc=s(4970),mc=s(8415);const uc=({minRate:e,maxRate:t,multiple:s=!1})=>{if(void 0===e||void 0===t)return null;const o=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10),r=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(t.price,10)+parseInt(t.taxes,10):parseInt(t.price,10),n=0===o?(0,c.jsx)("em",{children:(0,v.__)("free","woocommerce")}):(0,c.jsx)(Ut.FormattedMonetaryAmount,{currency:(0,xo.getCurrencyFromPriceResponse)(e),value:o});return(0,c.jsx)("span",{className:"wc-block-checkout__shipping-method-option-price",children:o!==r||s?(0,d.createInterpolateElement)(0===o&&0===r?"<price />":(0,v.__)("from <price />","woocommerce"),{price:n}):n})};function hc(e){return e?{min:e.reduce(((e,t)=>Le(t.method_id)?e:void 0===e||parseInt(t.price,10)<parseInt(e.price,10)?t:e),void 0),max:e.reduce(((e,t)=>Le(t.method_id)?e:void 0===e||parseInt(t.price,10)>parseInt(e.price,10)?t:e),void 0)}:{min:void 0,max:void 0}}function gc(e){return e?{min:e.reduce(((e,t)=>Le(t.method_id)&&(void 0===e||t.price<e.price)?t:e),void 0),max:e.reduce(((e,t)=>Le(t.method_id)&&(void 0===e||t.price>e.price)?t:e),void 0)}:{min:void 0,max:void 0}}s(6336);const _c=(0,v.__)("Pickup","woocommerce"),kc=(0,v.__)("Ship","woocommerce"),bc=({checked:e,rate:t,showPrice:s,showIcon:r,toggleText:n,setAttributes:a,onClick:d})=>(0,c.jsxs)(as.$,{render:(0,c.jsx)("div",{}),className:(0,o.A)("wc-block-checkout__shipping-method-option",{"wc-block-checkout__shipping-method-option--selected":"pickup"===e}),onClick:d,children:[!0===r&&(0,c.jsx)(i.A,{icon:mc.A,size:28,className:"wc-block-checkout__shipping-method-option-icon"}),(0,c.jsx)(l.RichText,{value:n,placeholder:_c,tagName:"span",className:"wc-block-checkout__shipping-method-option-title",onChange:e=>a({localPickupText:e}),__unstableDisableFormats:!0,preserveWhiteSpace:!0}),!0===s&&(0,c.jsx)(uc,{minRate:t.min,maxRate:t.max})]}),wc=({checked:e,rate:t,showPrice:s,showIcon:r,toggleText:n,setAttributes:a,onClick:d})=>{const p=void 0===t.min?(0,c.jsx)("span",{className:"wc-block-checkout__shipping-method-option-price",children:(0,v.__)("calculated with an address","woocommerce")}):(0,c.jsx)(uc,{minRate:t.min,maxRate:t.max});return(0,c.jsxs)(as.$,{render:(0,c.jsx)("div",{}),className:(0,o.A)("wc-block-checkout__shipping-method-option",{"wc-block-checkout__shipping-method-option--selected":"shipping"===e}),onClick:d,children:[!0===r&&(0,c.jsx)(i.A,{icon:pc.A,size:28,className:"wc-block-checkout__shipping-method-option-icon"}),(0,c.jsx)(l.RichText,{value:n,placeholder:kc,tagName:"span",className:"wc-block-checkout__shipping-method-option-title",onChange:e=>a({shippingText:e}),__unstableDisableFormats:!0,preserveWhiteSpace:!0}),!0===s&&p]})},yc={...Bs({defaultTitle:(0,v.__)("Delivery","woocommerce"),defaultDescription:(0,v.__)("Select how you would like to receive your order.","woocommerce")}),className:{type:"string",default:""},showIcon:{type:"boolean",default:!0},showPrice:{type:"boolean",default:!1},localPickupText:{type:"string",default:_c},shippingText:{type:"string",default:kc},lock:{type:"object",default:{move:!0,remove:!0}}},xc=JSON.parse('{"DD":"Delivery","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-shipping-method-block",{apiVersion:xc.XV,title:xc.DD,icon:{src:(0,c.jsx)(i.A,{icon:pc.A,className:"wc-block-editor-components-block-icon"})},attributes:yc,edit:({attributes:e,setAttributes:t})=>{(0,d.useEffect)((()=>{const s=(0,x.getSetting)("localPickupText",e.localPickupText);t({localPickupText:s})}),[t]);const{setPrefersCollection:s}=(0,_.useDispatch)(X.checkoutStore),{prefersCollection:r}=(0,_.useSelect)((e=>({prefersCollection:e(X.checkoutStore).prefersCollection()}))),{showPrice:n,showIcon:i,className:a,localPickupText:p,shippingText:m}=e,{shippingRates:u,needsShipping:h,hasCalculatedShipping:g,isCollectable:k}=Xe();if(!(h&&g&&u&&k&&A))return null;const b=e=>{s("pickup"===e)};return(0,c.jsxs)(zt,{attributes:e,setAttributes:t,className:(0,o.A)("wc-block-checkout__shipping-method",a),children:[(0,c.jsxs)(l.InspectorControls,{children:[(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Appearance","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Choose how this block is displayed to your customers.","woocommerce")}),(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Show icon","woocommerce"),checked:i,onChange:()=>t({showIcon:!i})}),(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Show costs","woocommerce"),checked:n,onChange:()=>t({showPrice:!n})})]}),(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Shipping Methods","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Methods can be made managed in your store settings.","woocommerce")}),(0,c.jsx)(tr,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping`,title:(0,v.__)("Shipping","woocommerce"),description:(0,v.__)("Manage your shipping zones, methods, and rates.","woocommerce")},"shipping_methods"),(0,c.jsx)(tr,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&section=pickup_location`,title:(0,v.__)("Pickup","woocommerce"),description:(0,v.__)("Allow customers to choose a local pickup location during checkout.","woocommerce")},"pickup_location")]})]}),(0,c.jsxs)("div",{id:"shipping-method",className:"wc-block-checkout__shipping-method-container",role:"radiogroup",children:[(0,c.jsx)(wc,{checked:r?"pickup":"shipping",rate:hc(u[0]?.shipping_rates),onClick:()=>{b("shipping")},showPrice:n,showIcon:i,setAttributes:t,toggleText:m}),(0,c.jsx)(bc,{checked:r?"pickup":"shipping",rate:gc(u[0]?.shipping_rates),showPrice:n,onClick:()=>{b("pickup")},showIcon:i,setAttributes:t,toggleText:p})]}),(0,c.jsx)(qt,{block:jt.innerBlockAreas.SHIPPING_METHOD})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Wt,{})})}),s(1215);const vc=()=>(0,c.jsxs)("div",{className:"wc-block-components-skeleton wc-block-components-skeleton--checkout-shipping","aria-live":"polite","aria-label":(0,v.__)("Loading shipping optionsâ¦","woocommerce"),children:[(0,c.jsx)(Lo,{height:"22px",width:"22px",borderRadius:"100%"}),(0,c.jsx)(Lo,{height:"22px",maxWidth:"148px"}),(0,c.jsx)(Lo,{height:"22px",width:"50px"})]}),fc=e=>{const t=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10);let s=(0,c.jsxs)(c.Fragment,{children:[Number.isFinite(t)&&(0,c.jsx)(Ut.FormattedMonetaryAmount,{currency:(0,xo.getCurrencyFromPriceResponse)(e),value:t}),(0,c.jsxs)("span",{className:"wc-block-components-shipping-rates-control__package__delivery_time",children:[Number.isFinite(t)&&e.delivery_time?" â ":null,(0,_e.decodeEntities)(e.delivery_time)]})]});return 0===t&&(s=(0,c.jsxs)("span",{className:"wc-block-components-shipping-rates-control__package__description--free",children:[(0,v.__)("Free","woocommerce"),(0,c.jsx)("span",{className:"wc-block-components-shipping-rates-control__package__delivery_time",children:e.delivery_time&&" â "+(0,_e.decodeEntities)(e.delivery_time)})]})),{label:(0,_e.decodeEntities)(e.name),value:e.rate_id,description:s}},Sc=({className:e="",noResultsMessage:t,onSelectRate:s,rates:o,renderOption:r=fc,selectedRate:n,disabled:i=!1,highlightChecked:a=!1})=>{const l=n?.rate_id,[p,m]=(0,d.useState)(null!=l?l:o[0]?.rate_id);return(0,d.useEffect)((()=>{p&&s(p)}),[]),(0,d.useEffect)((()=>{l&&l!==p&&m(l)}),[l]),0===o.length?t:(0,c.jsx)(Ut.RadioControl,{className:e,onChange:e=>{m(e),s(e)},highlightChecked:a,disabled:i,selected:null!=p?p:"",options:o.map(r),descriptionStackingDirection:"column"})},jc=({packageData:e})=>(0,c.jsx)("ul",{className:"wc-block-components-shipping-rates-control__package-items",children:Object.values(e.items).map((e=>{const t=(0,_e.decodeEntities)(e.name),s=e.quantity;return(0,c.jsx)("li",{className:"wc-block-components-shipping-rates-control__package-item",children:(0,c.jsx)(Ut.Label,{label:s>1?`${t} Ã ${s}`:`${t}`,allowHTML:!0,screenReaderLabel:(0,v.sprintf)(/* translators: %1$s name of the product (ie: Sunglasses), %2$d number of units in the current cart package */ /* translators: %1$s name of the product (ie: Sunglasses), %2$d number of units in the current cart package */
(0,v._n)("%1$s (%2$d unit)","%1$s (%2$d units)",s,"woocommerce"),t,s)})},e.key)}))});s(2793);const Cc=({packageId:e,className:t="",noResultsMessage:s,renderOption:r,packageData:n,collapsible:i,showItems:a,highlightChecked:l=!1})=>{const{selectShippingRate:p,shippingRates:m}=Xe(),u=m?.length||1,[h,g]=(0,d.useState)(0),_=u>1||h>1;(0,d.useEffect)((()=>{const e=()=>{g(document.querySelectorAll(".wc-block-components-shipping-rates-control__package").length)};e();const t=new MutationObserver(e);return t.observe(document.body,{childList:!0,subtree:!0}),()=>{t.disconnect()}}),[]);const k=null!=a?a:_,b=null!=i?i:_,w=(0,d.useMemo)((()=>n?.shipping_rates?.find((e=>e?.selected))),[n?.shipping_rates]),y=b||k?(0,c.jsxs)("div",{className:"wc-block-components-shipping-rates-control__package-header",children:[(0,c.jsx)("div",{className:"wc-block-components-shipping-rates-control__package-title",dangerouslySetInnerHTML:{__html:(0,us.sanitizeHTML)(n.name)}}),b&&(0,c.jsx)("div",{className:"wc-block-components-totals-shipping__via",children:(0,_e.decodeEntities)(w?.name)}),k&&(0,c.jsx)(jc,{packageData:n})]}):null,x=(0,d.useCallback)((t=>{p(t,e)}),[e,p]),v={className:t,noResultsMessage:s,rates:n.shipping_rates,onSelectRate:x,selectedRate:n.shipping_rates.find((e=>e.selected)),renderOption:r,highlightChecked:l};return b?(0,c.jsx)(Ut.Panel,{className:(0,o.A)("wc-block-components-shipping-rates-control__package",t),initialOpen:!1,title:y,children:(0,c.jsx)(Sc,{...v})}):(0,c.jsxs)("div",{className:(0,o.A)("wc-block-components-shipping-rates-control__package",t),children:[y,(0,c.jsx)(Sc,{...v})]})},Pc=({packages:e,showItems:t,collapsible:s,noResultsMessage:o,renderOption:r,context:n=""})=>e.length?(0,c.jsx)(c.Fragment,{children:e.map((({package_id:e,...i})=>(0,c.jsx)(Cc,{highlightChecked:"woocommerce/cart"!==n,packageId:e,packageData:i,collapsible:s,showItems:t,noResultsMessage:o,renderOption:r},e)))}):null,Ec=({shippingRates:e,isLoadingRates:t,className:s,collapsible:o,showItems:r,noResultsMessage:n=(0,c.jsx)(c.Fragment,{}),renderOption:i,context:a})=>{const l=(e=>e.reduce((function(e,t){return e+t.shipping_rates.length}),0))(e),p=De(e),m=et(l),u=et(p);(0,d.useEffect)((()=>{var e,s;t||m===l&&u===p||(s=l,1===(e=p)?(0,hr.speak)((0,v.sprintf)(/* translators: %d number of shipping options found. */ /* translators: %d number of shipping options found. */
(0,v._n)("%d shipping option was found.","%d shipping options were found.",s,"woocommerce"),s)):(0,hr.speak)((0,v.sprintf)(/* translators: %d number of shipping packages packages. */ /* translators: %d number of shipping packages packages. */
(0,v._n)("Shipping option searched for %d package.","Shipping options searched for %d packages.",e,"woocommerce"),e)+" "+(0,v.sprintf)(/* translators: %d number of shipping options available. */ /* translators: %d number of shipping options available. */
(0,v._n)("%d shipping option was found","%d shipping options were found",s,"woocommerce"),s)))}),[t,l,p,m,u]);const{extensions:h,receiveCart:g,..._}=Me(),k={className:s,collapsible:o,showItems:r,noResultsMessage:n,renderOption:i,extensions:h,cart:_,components:{ShippingRatesControlPackage:Cc},context:a},{isEditor:w}=b(),{hasSelectedLocalPickup:y,selectedRates:x}=Xe(),f=(0,pe.isObject)(x)?Object.values(x):[],S=f.every((e=>e===f[0]));return t?(0,c.jsx)(vc,{}):(0,c.jsxs)(Ro,{isLoading:t,screenReaderLabel:(0,v.__)("Loading shipping ratesâ¦","woocommerce"),showSpinner:!0,children:[y&&"woocommerce/cart"===a&&e.length>1&&!S&&!w&&(0,c.jsx)(gr,{className:"wc-block-components-notice",isDismissible:!1,status:"warning",children:(0,v.__)("Multiple shipments must have the same pickup location","woocommerce")}),(0,c.jsx)(jt.ExperimentalOrderShippingPackages.Slot,{...k}),(0,c.jsx)(jt.ExperimentalOrderShippingPackages,{children:(0,c.jsx)(Pc,{packages:e,noResultsMessage:n,renderOption:i})})]})},Nc=e=>{const t=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10),s=0===t?(0,c.jsx)("span",{className:"wc-block-checkout__shipping-option--free",children:(0,v.__)("Free","woocommerce")}):(0,c.jsx)(Ut.FormattedMonetaryAmount,{currency:(0,xo.getCurrencyFromPriceResponse)(e),value:t});return{label:(0,_e.decodeEntities)(e.name),value:e.rate_id,description:(0,_e.decodeEntities)(e.delivery_time),secondaryLabel:s,secondaryDescription:(0,_e.decodeEntities)(e.description)}},Ac=()=>(0,c.jsx)("p",{role:"status","aria-live":"polite",className:"wc-block-components-shipping-rates-control__no-shipping-address-message",children:(0,v.__)("Enter a shipping address to view shipping options.","woocommerce")}),Ic=({noShippingPlaceholder:e=null})=>{const{isEditor:t}=b(),{shippingRates:s,needsShipping:o,isLoadingRates:r,hasCalculatedShipping:n,isCollectable:i}=Xe(),{shippingAddress:a}=dt(),l=(0,d.useMemo)((()=>i?s.map((e=>({...e,shipping_rates:e.shipping_rates.filter((e=>!Le(e.method_id)))}))):s),[s,i]);if(!o)return null;const p=De(s);if(!n&&!p)return(0,c.jsx)(Ac,{});const m=ve(a);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ut.StoreNoticesContainer,{context:me.SHIPPING_METHODS}),t&&!p?e:(0,c.jsx)(Ec,{noResultsMessage:(0,c.jsx)(c.Fragment,{children:m?(0,c.jsx)(gr,{isDismissible:!1,className:"wc-block-components-shipping-rates-control__no-results-notice",status:"warning",children:(0,v.__)("No shipping options are available for this address. Please verify the address is correct or try a different address.","woocommerce")}):(0,c.jsx)(Ac,{})}),renderOption:Nc,collapsible:!1,shippingRates:l,isLoadingRates:r,context:"woocommerce/checkout"})]})};s(1393);const Rc={...Bs({defaultTitle:(0,v.__)("Shipping options","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},Tc=JSON.parse('{"DD":"Shipping Options","XV":3}');s(7693),(0,a.registerBlockType)("woocommerce/checkout-shipping-methods-block",{apiVersion:Tc.XV,title:Tc.DD,icon:{src:(0,c.jsx)(i.A,{icon:pc.A,className:"wc-block-editor-components-block-icon"})},attributes:Rc,edit:({attributes:e,setAttributes:t})=>{const s=(0,x.getSetting)("globalShippingMethods"),r=(0,x.getSetting)("activeShippingZones"),{showShippingMethods:n}=pt();return n?(0,c.jsxs)(zt,{attributes:e,setAttributes:t,className:(0,o.A)("wc-block-checkout__shipping-option",e?.className),children:[(0,c.jsxs)(l.InspectorControls,{children:[(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Shipping Calculations","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Options that control shipping can be managed in your store settings.","woocommerce")}),(0,c.jsx)(Bt.ExternalLink,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&section=options`,children:(0,v.__)("Manage shipping options","woocommerce")})," "]}),s.length>0&&(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Methods","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("The following shipping integrations are active on your store.","woocommerce")}),s.map((e=>(0,c.jsx)(tr,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&section=${e.id}`,title:e.title,description:e.description},e.id))),(0,c.jsx)(Bt.ExternalLink,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping`,children:(0,v.__)("Manage shipping methods","woocommerce")})]}),r.length&&(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Shipping Zones","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Shipping Zones can be made managed in your store settings.","woocommerce")}),r.map((e=>(0,c.jsx)(tr,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&zone_id=${e.id}`,title:e.title,description:e.description},e.id)))]})]}),(0,c.jsx)(Kt,{children:(0,c.jsx)(Ic,{noShippingPlaceholder:(0,c.jsx)(Xr,{icon:pc.A,label:(0,v.__)("Shipping options","woocommerce"),description:(0,v.__)("Your store does not have any Shipping Options configured. Once you have added your Shipping Options they will appear here.","woocommerce"),buttonLabel:(0,v.__)("Configure Shipping Options","woocommerce"),buttonHref:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping`})})}),(0,c.jsx)(qt,{block:jt.innerBlockAreas.SHIPPING_METHODS})]}):null},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Wt,{})})});const Mc=({title:e,selectedOption:t,pickupLocations:s,renderPickupLocation:o,packageCount:r,onChange:n})=>{const{shippingRates:i}=Xe(),a=(i?.length||1)>1||document.querySelectorAll(".wc-block-components-local-pickup-select .wc-block-components-radio-control").length>1;return(0,c.jsxs)("div",{className:"wc-block-components-local-pickup-select",children:[!(!a||!e)&&(0,c.jsx)("div",{children:e}),(0,c.jsx)(Ut.RadioControl,{onChange:n,highlightChecked:!0,selected:t,options:s.map((e=>o(e,r)))})]})};function Dc(e){let t,s,o,r=[];for(let c=0;c<e.length;c++)t=e.substring(c),s=t.match(/^&[a-z0-9#]+;/),s?(o=s[0],r.push(o),c+=o.length-1):r.push(e[c]);return r}const Bc=(e,t,s="...")=>{const o=function(e,t){const s=(t=t||{}).limit||100,o=void 0===t.preserveTags||t.preserveTags,r=void 0!==t.wordBreak&&t.wordBreak,c=t.suffix||"...",n=t.moreLink||"",i=t.moreText||"Â»",a=t.preserveWhiteSpace||!1,l=e.replace(/</g,"\n<").replace(/>/g,">\n").replace(/\n\n/g,"\n").replace(/^\n/g,"").replace(/\n$/g,"").split("\n");let d,p,m,u,h,g,_=0,k=[],b=!1;for(let e=0;e<l.length;e++){if(d=l[e],u=a?d:d.replace(/[ ]+/g," "),!d.length)continue;const t=Dc(u);if("<"!==d[0])if(_>=s)d="";else if(_+t.length>=s){if(p=s-_," "===t[p-1])for(;p&&(p-=1," "===t[p-1]););else m=t.slice(p).indexOf(" "),r||(-1!==m?p+=m:p=d.length);if(d=t.slice(0,p).join("")+c,n){const e=document.createElement("a");e.href=n,e.style.display="inline",e.textContent=i,d+=e.outerHTML}_=s,b=!0}else _+=t.length;else if(o){if(_>=s)if(h=d.match(/[a-zA-Z]+/),g=h?h[0]:"",g)if("</"!==d.substring(0,2))k.push(g),d="";else{for(;k[k.length-1]!==g&&k.length;)k.pop();k.length&&(d=""),k.pop()}else d=""}else d="";l[e]=d}return{html:l.join("\n").replace(/\n/g,""),more:b}}(e,{suffix:s,limit:t});return o.html},Oc=(e,t,s)=>(t<=s?e.start=e.middle+1:e.end=e.middle-1,e),Lc=(e,t,s,o)=>{const r=((e,t,s)=>{let o={start:0,middle:0,end:e.length};for(;o.start<=o.end;)o.middle=Math.floor((o.start+o.end)/2),t.innerHTML=Bc(e,o.middle),o=Oc(o,t.clientHeight,s);return o.middle})(e,t,s);return Bc(e,r-o.length,o)},Fc={className:"read-more-content",ellipsis:"&hellip;",lessText:(0,v.__)("Read less","woocommerce"),maxLines:3,moreText:(0,v.__)("Read more","woocommerce")};class Vc extends d.Component{static defaultProps=Fc;constructor(e){super(e),this.state={isExpanded:!1,clampEnabled:null,content:e.children,summary:"."},this.reviewContent=(0,d.createRef)(),this.reviewSummary=(0,d.createRef)(),this.getButton=this.getButton.bind(this),this.onClick=this.onClick.bind(this)}componentDidMount(){this.setSummary()}componentDidUpdate(e){e.maxLines===this.props.maxLines&&e.children===this.props.children||this.setState({clampEnabled:null,summary:"."},this.setSummary)}setSummary(){if(this.props.children){const{maxLines:e,ellipsis:t}=this.props;if(!this.reviewSummary.current||!this.reviewContent.current)return;const s=(this.reviewSummary.current.clientHeight+1)*e+1,o=this.reviewContent.current.clientHeight+1>s;this.setState({clampEnabled:o}),o&&this.setState({summary:Lc(this.reviewContent.current.innerHTML,this.reviewSummary.current,s,t)})}}getButton(){const{isExpanded:e}=this.state,{className:t,lessText:s,moreText:o}=this.props,r=e?s:o;if(r)return(0,c.jsx)("a",{href:"#more",className:t+"__read_more",onClick:this.onClick,"aria-expanded":!e,role:"button",children:r})}onClick(e){e.preventDefault();const{isExpanded:t}=this.state;this.setState({isExpanded:!t})}render(){const{className:e}=this.props,{content:t,summary:s,clampEnabled:o,isExpanded:r}=this.state;return t?!1===o?(0,c.jsx)("div",{className:e,children:(0,c.jsx)("div",{ref:this.reviewContent,children:t})}):(0,c.jsxs)("div",{className:e,children:[(!r||null===o)&&(0,c.jsx)("div",{ref:this.reviewSummary,"aria-hidden":r,dangerouslySetInnerHTML:{__html:s}}),(r||null===o)&&(0,c.jsx)("div",{ref:this.reviewContent,"aria-hidden":!r,children:t}),this.getButton()]}):null}}const $c=Vc,Uc=(e,t)=>{const s=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10),o=(e=>{if(e?.meta_data){const t=e.meta_data.find((e=>"pickup_location"===e.key));return t?t.value:""}return""})(e),r=(e=>{if(e?.meta_data){const t=e.meta_data.find((e=>"pickup_address"===e.key));return t?t.value:""}return""})(e),n=(e=>{if(e?.meta_data){const t=e.meta_data.find((e=>"pickup_details"===e.key));return t?t.value:""}return""})(e),a=e?.selected;let l=(0,c.jsx)("em",{children:(0,v.__)("free","woocommerce")});return s>0&&(l=1===t?(0,c.jsx)(Ut.FormattedMonetaryAmount,{currency:(0,xo.getCurrencyFromPriceResponse)(e),value:s}):(0,d.createInterpolateElement)(/* translators: <price/> is the price of the package, <packageCount/> is the number of packages. These must appear in the translated string. */ /* translators: <price/> is the price of the package, <packageCount/> is the number of packages. These must appear in the translated string. */
(0,v._n)("<price/> x <packageCount/> package","<price/> x <packageCount/> packages",t,"woocommerce"),{price:(0,c.jsx)(Ut.FormattedMonetaryAmount,{currency:(0,xo.getCurrencyFromPriceResponse)(e),value:s}),packageCount:(0,c.jsx)(c.Fragment,{children:t})})),{value:e.rate_id,label:o?(0,_e.decodeEntities)(o):(0,_e.decodeEntities)(e.name),secondaryLabel:l,description:r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.A,{icon:$t.A,className:"wc-block-editor-components-block-icon"}),(0,_e.decodeEntities)(r)]}):void 0,secondaryDescription:a&&n?(0,c.jsx)($c,{maxLines:2,children:(0,_e.decodeEntities)(n)}):void 0}},Hc=()=>{const{shippingRates:e,selectShippingRate:t}=Xe(),s=(0,d.useMemo)((()=>(e[0]?.shipping_rates||[]).filter(Oe)),[e]),[o,r]=(0,d.useState)((()=>{var e;return null!==(e=s.find((e=>e.selected))?.rate_id)&&void 0!==e?e:s[0]?.rate_id})),n=(0,d.useCallback)((e=>{r(e),t(e)}),[r,t]);(0,d.useEffect)((()=>{o&&t(o)}),[]),(0,d.useEffect)((()=>{const e=s.find((e=>e.selected)),t=e?.rate_id;t&&t!==o&&r(t)}),[s]);const{extensions:i,receiveCart:a,...l}=Me(),p={extensions:i,cart:l,components:{ShippingRatesControlPackage:Cc,LocalPickupSelect:Mc},renderPickupLocation:Uc};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(jt.ExperimentalOrderLocalPickupPackages.Slot,{...p}),(0,c.jsx)(jt.ExperimentalOrderLocalPickupPackages,{children:(0,c.jsx)(Mc,{title:e[0].name,selectedOption:null!=o?o:"",renderPickupLocation:Uc,pickupLocations:s,packageCount:De(e),onChange:e=>n(e)})})]})},zc={...Bs({defaultTitle:(0,v.__)("Pickup locations","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},qc=JSON.parse('{"DD":"Pickup Method","XV":3}');s(5991),(0,a.registerBlockType)("woocommerce/checkout-pickup-options-block",{apiVersion:qc.XV,title:qc.DD,icon:{src:(0,c.jsx)(i.A,{icon:mc.A,className:"wc-block-editor-components-block-icon"})},attributes:zc,edit:({attributes:e,setAttributes:t})=>{const{prefersCollection:s}=(0,_.useSelect)((e=>({prefersCollection:e(X.checkoutStore).prefersCollection()}))),{className:r}=e;return s&&A?(0,c.jsxs)(zt,{attributes:e,setAttributes:t,className:(0,o.A)("wc-block-checkout__shipping-method",r),children:[(0,c.jsx)(Bt.Disabled,{children:(0,c.jsx)(Hc,{})}),(0,c.jsx)(qt,{block:jt.innerBlockAreas.PICKUP_LOCATION})]}):null},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Wt,{})})});const Wc=({className:e=""})=>{const{cartTotals:t}=Me(),{isLoading:s}=Oo(),o=(0,xo.getCurrencyFromPriceResponse)(t);return(0,c.jsx)(Ut.TotalsWrapper,{className:e,children:(0,c.jsx)(Ut.Subtotal,{currency:o,values:t,showSkeleton:s})})},Xc=JSON.parse('{"DD":"Subtotal","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-subtotal-block",{apiVersion:Xc.XV,title:Xc.DD,icon:{src:(0,c.jsx)(i.A,{icon:Io,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,s=(0,l.useBlockProps)();return(0,c.jsx)("div",{...s,children:(0,c.jsx)(Wc,{className:t})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const Yc=({className:e=""})=>{const{cartFees:t,cartTotals:s}=Me(),o=(0,xo.getCurrencyFromPriceResponse)(s);return(0,c.jsx)(Ut.TotalsWrapper,{className:e,children:(0,c.jsx)(Ut.TotalsFees,{currency:o,cartFees:t})})};(0,a.registerBlockType)("woocommerce/checkout-order-summary-fee-block",{apiVersion:3,title:"Fees",icon:{src:(0,c.jsx)(i.A,{icon:Io,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,s=(0,l.useBlockProps)();return(0,c.jsx)("div",{...s,children:(0,c.jsx)(Yc,{className:t})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const Gc=()=>{const{extensions:e,receiveCart:t,...s}=Me(),o={extensions:e,cart:s,context:"woocommerce/checkout"};return(0,c.jsx)(jt.ExperimentalDiscountsMeta.Slot,{...o})},Jc=({className:e=""})=>{const{cartTotals:t,cartCoupons:s}=Me(),{removeCoupon:o,isRemovingCoupon:r}=Bo("wc/checkout"),{isLoading:n}=Oo(),i=(0,xo.getCurrencyFromPriceResponse)(t);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ut.TotalsWrapper,{className:e,children:(0,c.jsx)(Do,{cartCoupons:s,currency:i,isRemovingCoupon:r,removeCoupon:o,values:t,isLoading:n})}),(0,c.jsx)(Gc,{})]})},Kc=JSON.parse('{"DD":"Discount","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-discount-block",{apiVersion:Kc.XV,title:Kc.DD,icon:{src:(0,c.jsx)(i.A,{icon:Io,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,s=(0,l.useBlockProps)();return(0,c.jsx)("div",{...s,children:(0,c.jsx)(Jc,{className:t})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const Zc=({className:e=""})=>{const{cartNeedsShipping:t,shippingRates:s,shippingAddress:o}=Me(),r=(0,_.useSelect)((e=>e(X.checkoutStore).prefersCollection()));if(!t)return null;const n=(e=>!!Fe(e)&&e.every((e=>e.shipping_rates.every((e=>!e.selected||Oe(e))))))(((e,t)=>e.map((e=>({...e,shipping_rates:e.shipping_rates.filter((e=>{const s=Le(e.method_id);return t?s:!s}))}))))(s,null!=r&&r)),i=ve(o);return(0,c.jsx)(jt.TotalsWrapper,{className:e,children:(0,c.jsx)(Ho,{label:n?(0,v.__)("Pickup","woocommerce"):(0,v.__)("Delivery","woocommerce"),placeholder:(0,c.jsx)("span",{className:"wc-block-components-shipping-placeholder__value",children:i?(0,v.__)("No available delivery option","woocommerce"):(0,v.__)("Enter address to calculate","woocommerce")})})})},Qc=JSON.parse('{"DD":"Shipping","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-shipping-block",{apiVersion:Qc.XV,title:Qc.DD,icon:{src:(0,c.jsx)(i.A,{icon:Io,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,s=(0,l.useBlockProps)();return(0,c.jsx)("div",{...s,children:(0,c.jsx)(Kt,{children:(0,c.jsx)(Zc,{className:t})})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});var en=s(1686);const tn=({className:e=""})=>{const t=(0,x.getSetting)("couponsEnabled",!0),{applyCoupon:s,isApplyingCoupon:o}=Bo("wc/checkout");return t?(0,c.jsx)(Ut.TotalsWrapper,{className:e,children:(0,c.jsx)(To,{onSubmit:s,isLoading:o,instanceId:"coupon"})}):null},sn=JSON.parse('{"DD":"Coupon Form","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-coupon-form-block",{apiVersion:sn.XV,title:sn.DD,icon:{src:(0,c.jsx)(i.A,{icon:en.A,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,s=(0,l.useBlockProps)();return(0,c.jsx)("div",{...s,children:(0,c.jsx)(Kt,{children:(0,c.jsx)(tn,{className:t})})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const on=({className:e,showRateAfterTaxName:t})=>{const{cartTotals:s}=Me(),{isLoading:o}=Oo();if((0,x.getSetting)("displayCartPricesIncludingTax",!1)||parseInt(s.total_tax,10)<=0)return null;const r=(0,xo.getCurrencyFromPriceResponse)(s);return(0,c.jsx)(Ut.TotalsWrapper,{className:e,children:(0,c.jsx)(Ut.TotalsTaxes,{showRateAfterTaxName:t,currency:r,values:s,showSkeleton:o})})},rn={showRateAfterTaxName:{type:"boolean",default:(0,x.getSetting)("displayCartPricesIncludingTax",!1)},lock:{type:"object",default:{remove:!0,move:!0}}},cn=JSON.parse('{"DD":"Taxes","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-taxes-block",{apiVersion:cn.XV,title:cn.DD,icon:{src:(0,c.jsx)(i.A,{icon:Io,className:"wc-block-editor-components-block-icon"})},attributes:rn,edit:({attributes:e,setAttributes:t})=>{const{className:s,showRateAfterTaxName:o}=e,r=(0,l.useBlockProps)(),n=(0,x.getSetting)("taxesEnabled"),i=(0,x.getSetting)("displayItemizedTaxes",!1),a=(0,x.getSetting)("displayCartPricesIncludingTax",!1);return(0,c.jsxs)("div",{...r,children:[(0,c.jsx)(l.InspectorControls,{children:n&&i&&!a&&(0,c.jsx)(Bt.PanelBody,{title:(0,v.__)("Taxes","woocommerce"),children:(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Show rate after tax name","woocommerce"),help:(0,v.__)("Show the percentage rate alongside each tax line in the summary.","woocommerce"),checked:o,onChange:()=>t({showRateAfterTaxName:!o})})})}),(0,c.jsx)(on,{className:s,showRateAfterTaxName:o})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const nn=(0,c.jsxs)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,c.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),(0,c.jsx)("path",{d:"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45zM6.16 6h12.15l-2.76 5H8.53L6.16 6zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"})]});s(359),s(7826),s(2336);const an=({rows:e=2})=>(0,c.jsx)("div",{className:"wc-block-components-order-summary","aria-live":"polite","aria-label":(0,v.__)("Loading products in cartâ¦","woocommerce"),children:(0,c.jsx)("div",{className:"wc-block-components-skeleton wc-block-components-skeleton--cart-line-items-checkout wc-block-components-order-summary__content",children:Array.from({length:e}).map(((e,t)=>(0,c.jsxs)("div",{className:"wc-block-components-order-summary-item",children:[(0,c.jsx)("div",{className:"wc-block-components-order-summary-item__image",children:(0,c.jsx)(Lo,{width:"48px",height:"48px"})}),(0,c.jsxs)("div",{className:"wc-block-components-order-summary-item__description",children:[(0,c.jsx)(Lo,{width:"90%",maxWidth:"173px",height:".875em"}),(0,c.jsx)(Lo,{width:"50%",maxWidth:"85px",height:".875em"})]}),(0,c.jsx)("div",{className:"wc-block-components-order-summary-item__total-price",children:(0,c.jsx)(Lo,{width:"45px",height:".875em"})})]},t)))})});s(8501);const ln=({currency:e,maxPrice:t,minPrice:s,priceClassName:r,priceStyle:n={}})=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"screen-reader-text",children:(0,v.sprintf)(/* translators: %1$s min price, %2$s max price */ /* translators: %1$s min price, %2$s max price */
(0,v.__)("Price between %1$s and %2$s","woocommerce"),(0,xo.formatPrice)(s),(0,xo.formatPrice)(t))}),(0,c.jsxs)("span",{"aria-hidden":!0,children:[(0,c.jsx)(Ut.FormattedMonetaryAmount,{className:(0,o.A)("wc-block-components-product-price__value",r),currency:e,value:s,style:n}),"Â âÂ ",(0,c.jsx)(Ut.FormattedMonetaryAmount,{className:(0,o.A)("wc-block-components-product-price__value",r),currency:e,value:t,style:n})]})]}),dn=({currency:e,regularPriceClassName:t,regularPriceStyle:s,regularPrice:r,priceClassName:n,priceStyle:i,price:a})=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Previous price:","woocommerce")}),(0,c.jsx)(Ut.FormattedMonetaryAmount,{currency:e,renderText:e=>(0,c.jsx)("del",{className:(0,o.A)("wc-block-components-product-price__regular",t),style:s,children:e}),value:r}),(0,c.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Discounted price:","woocommerce")}),(0,c.jsx)(Ut.FormattedMonetaryAmount,{currency:e,renderText:e=>(0,c.jsx)("ins",{className:(0,o.A)("wc-block-components-product-price__value","is-discounted",n),style:i,children:e}),value:a})]}),pn=({align:e,className:t,currency:s,format:r="<price/>",maxPrice:n,minPrice:i,price:a,priceClassName:l,priceStyle:p,regularPrice:m,regularPriceClassName:u,regularPriceStyle:h,style:g})=>{const _=(0,o.A)(t,"price","wc-block-components-product-price",{[`wc-block-components-product-price--align-${e}`]:e});r.includes("<price/>")||(r="<price/>",console.error("Price formats need to include the `<price/>` tag."));const k=m&&a&&a<m;let b=(0,c.jsx)("span",{className:(0,o.A)("wc-block-components-product-price__value",l)});return k?b=(0,c.jsx)(dn,{currency:s,price:a,priceClassName:l,priceStyle:p,regularPrice:m,regularPriceClassName:u,regularPriceStyle:h}):void 0!==i&&void 0!==n?b=(0,c.jsx)(ln,{currency:s,maxPrice:n,minPrice:i,priceClassName:l,priceStyle:p}):(a||0===a)&&(b=(0,c.jsx)(Ut.FormattedMonetaryAmount,{className:(0,o.A)("wc-block-components-product-price__value",l),currency:s,value:a,style:p})),(0,c.jsx)("span",{className:_,style:g,children:(0,d.createInterpolateElement)(r,{price:b})})};s(959);const mn=({className:e="",disabled:t=!1,name:s,permalink:r="",target:n,rel:i,style:a,onClick:l,disabledTagName:d="span",...p})=>{const m=(0,o.A)("wc-block-components-product-name",e),u=d;if(t){const e=p;return(0,c.jsx)(u,{className:m,...e,dangerouslySetInnerHTML:{__html:s}})}return(0,c.jsx)("a",{className:m,href:r,target:n,...p,dangerouslySetInnerHTML:{__html:s},style:a})};var un=s(6513);s(7605);const hn=({children:e,className:t})=>(0,c.jsx)("div",{className:(0,o.A)("wc-block-components-product-badge",t),children:e}),gn=()=>(0,c.jsx)(hn,{className:"wc-block-components-product-backorder-badge",children:(0,v.__)("Available on backorder","woocommerce")}),kn=({image:e={},fallbackAlt:t="",width:s,height:o})=>{const r=e.thumbnail?{src:e.thumbnail,alt:(0,_e.decodeEntities)(e.alt)||t||"Product Image"}:{src:x.PLACEHOLDER_IMG_SRC,alt:""};return(0,c.jsx)("img",{src:r.src,alt:r.alt,width:s,height:o})},bn=({lowStockRemaining:e})=>e?(0,c.jsx)(hn,{className:"wc-block-components-product-low-stock-badge",children:(0,v.sprintf)(/* translators: %d stock amount (number of items in stock for product) */ /* translators: %d stock amount (number of items in stock for product) */
(0,v.__)("%d left in stock","woocommerce"),e)}):null;var wn=s(7356);s(3692);const yn=({details:e=[]})=>{if(!Array.isArray(e))return null;if(0===(e=e.filter((e=>!e.hidden))).length)return null;let t="ul",s="li";return 1===e.length&&(t="div",s="div"),(0,c.jsx)(t,{className:"wc-block-components-product-details",children:e.map((e=>{const t=e?.key||e.name||"",o=e?.className||(t?`wc-block-components-product-details__${(0,wn.c)(t)}`:"");return(0,c.jsxs)(s,{className:o,children:[t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("span",{className:"wc-block-components-product-details__name",children:[(0,_e.decodeEntities)(t),":"]})," "]}),(0,c.jsx)("span",{className:"wc-block-components-product-details__value",children:(0,_e.decodeEntities)(e.display||e.value)})]},t+(e.display||e.value))}))})},xn=window.wp.wordcount,vn=["a","b","em","i","strong","p","br","ul","ol","li","h1","h2","h3","h4","h5","h6","pre","blockquote","img"],fn=["target","href","rel","name","download","src","class","alt","style"],Sn=({source:e,maxLength:t=15,countType:s="words",className:o="",style:r={}})=>{const n=(0,d.useMemo)((()=>((e,t=15,s="words")=>{const o=(0,sr.autop)(e);if((0,xn.count)(o,s)<=t)return o;const r=(e=>{const t=e.indexOf("</p>");return-1===t?e:e.substr(0,t+4)})(o);return(0,xn.count)(r,s)<=t?r:"words"===s?cr(r,t):nr(r,t,"characters_including_spaces"===s)})(e,t,s)),[e,t,s]);return(0,c.jsx)(d.RawHTML,{style:r,className:o,children:(0,us.sanitizeHTML)(n,{tags:vn,attr:fn})})},jn=({className:e,shortDescription:t="",fullDescription:s=""})=>{const o=t||s;return o?(0,c.jsx)(Sn,{className:e,source:o,maxLength:15,countType:f.wordCountType||"words"}):null};s(8879);const Cn=({shortDescription:e="",fullDescription:t="",itemData:s=[],variation:o=[]})=>(0,c.jsxs)("div",{className:"wc-block-components-product-metadata",children:[(0,c.jsx)(jn,{className:"wc-block-components-product-metadata__description",shortDescription:e,fullDescription:t}),(0,c.jsx)(yn,{details:s}),(0,c.jsx)(yn,{details:o.map((({attribute:e="",value:t})=>({key:e,value:t})))})]}),Pn=({cartItem:e,disableProductDescriptions:t})=>{const{images:s,low_stock_remaining:r,show_backorder_badge:n,name:i,permalink:a,prices:l,quantity:p,short_description:m,description:u,item_data:h,variation:g,totals:_,extensions:k}=e,{receiveCart:b,...w}=Me(),y=(0,d.useMemo)((()=>({context:"summary",cartItem:e,cart:w})),[e,w]),f=(0,xo.getCurrencyFromPriceResponse)(l),S=(0,jt.applyCheckoutFilter)({filterName:"itemName",defaultValue:i,extensions:k,arg:y}),j=(0,un.A)({amount:parseInt(l.raw_prices.regular_price,10),precision:(0,pe.isString)(l.raw_prices.precision)?parseInt(l.raw_prices.precision,10):l.raw_prices.precision}).convertPrecision(f.minorUnit).getAmount(),C=(0,un.A)({amount:parseInt(l.raw_prices.price,10),precision:(0,pe.isString)(l.raw_prices.precision)?parseInt(l.raw_prices.precision,10):l.raw_prices.precision}).convertPrecision(f.minorUnit).getAmount(),P=(0,xo.getCurrencyFromPriceResponse)(_);let E=parseInt(_.line_subtotal,10);(0,x.getSetting)("displayCartPricesIncludingTax",!1)&&(E+=parseInt(_.line_subtotal_tax,10));const N=(0,un.A)({amount:E,precision:P.minorUnit}).getAmount(),A=(0,jt.applyCheckoutFilter)({filterName:"subtotalPriceFormat",defaultValue:"<price/>",extensions:k,arg:y,validation:jt.productPriceValidation}),I=(0,jt.applyCheckoutFilter)({filterName:"cartItemPrice",defaultValue:"<price/>",extensions:k,arg:y,validation:jt.productPriceValidation}),R=(0,jt.applyCheckoutFilter)({filterName:"cartItemClass",defaultValue:"",extensions:k,arg:y}),T=t?{itemData:h,variation:g}:{itemData:h,variation:g,shortDescription:m,fullDescription:u};return(0,c.jsxs)("div",{className:(0,o.A)("wc-block-components-order-summary-item",R),children:[(0,c.jsxs)("div",{className:"wc-block-components-order-summary-item__image",children:[(0,c.jsx)("div",{className:"wc-block-components-order-summary-item__quantity",children:(0,c.jsx)(Ut.Label,{label:p.toString(),screenReaderLabel:(0,v.sprintf)(/* translators: %d number of products of the same type in the cart */ /* translators: %d number of products of the same type in the cart */
(0,v._n)("%d item","%d items",p,"woocommerce"),p)})}),(0,c.jsx)(kn,{image:s.length?s[0]:{},fallbackAlt:S,width:48,height:48})]}),(0,c.jsxs)("div",{className:"wc-block-components-order-summary-item__description",children:[(0,c.jsx)(mn,{disabled:!0,name:S,permalink:a,disabledTagName:"h3"}),(0,c.jsx)(pn,{currency:f,price:C,regularPrice:j,className:"wc-block-components-order-summary-item__individual-prices",priceClassName:"wc-block-components-order-summary-item__individual-price",regularPriceClassName:"wc-block-components-order-summary-item__regular-individual-price",format:A}),n?(0,c.jsx)(gn,{}):!!r&&(0,c.jsx)(bn,{lowStockRemaining:r}),(0,c.jsx)(Cn,{...T})]}),(0,c.jsx)("span",{className:"screen-reader-text",children:(0,v.sprintf)(/* translators: %1$d is the number of items, %2$s is the item name and %3$s is the total price including the currency symbol. */ /* translators: %1$d is the number of items, %2$s is the item name and %3$s is the total price including the currency symbol. */
(0,v._n)("Total price for %1$d %2$s item: %3$s","Total price for %1$d %2$s items: %3$s",p,"woocommerce"),p,S,(0,xo.formatPrice)(N,P))}),(0,c.jsx)("div",{className:"wc-block-components-order-summary-item__total-price","aria-hidden":"true",children:(0,c.jsx)(pn,{currency:P,format:I,price:N})})]})};s(6161);const En=({cartItems:e=[],disableProductDescriptions:t=!1})=>{const{isLarge:s}=u(),{cartIsLoading:r,hasPendingItemsOperations:n}=Me(),i=r||n;return(0,c.jsx)(Fo,{isLoading:i,skeleton:(0,c.jsx)(an,{rows:e?.length||2}),children:(0,c.jsx)("div",{className:(0,o.A)("wc-block-components-order-summary",{"is-large":s}),children:(0,c.jsx)("div",{className:"wc-block-components-order-summary__content",children:e.map((e=>(0,c.jsx)(Pn,{disableProductDescriptions:t,cartItem:e},e.key)))})})})},Nn=({className:e="",disableProductDescriptions:t=!1})=>{const{cartItems:s}=Me();return(0,c.jsx)(Ut.TotalsWrapper,{className:e,children:(0,c.jsx)(En,{cartItems:s,disableProductDescriptions:t})})},An=JSON.parse('{"DD":"Cart Items","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-cart-items-block",{apiVersion:An.XV,title:An.DD,icon:{src:(0,c.jsx)(i.A,{icon:nn,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e,setAttributes:t})=>{const{className:s="",disableProductDescriptions:o=!1}=e,r=(0,l.useBlockProps)();return(0,c.jsxs)("div",{...r,children:[H()&&(0,c.jsx)(l.InspectorControls,{children:(0,c.jsx)(Bt.PanelBody,{title:(0,v.__)("Settings","woocommerce"),children:(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Disable product descriptions","woocommerce"),help:(0,v.__)("Disable display of product descriptions.","woocommerce"),checked:o,onChange:()=>t({disableProductDescriptions:!o})})})}),(0,c.jsx)(Nn,{disableProductDescriptions:o,className:s})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const In=JSON.parse('{"DD":"Totals","XV":3}');s(2739),(0,a.registerBlockType)("woocommerce/checkout-order-summary-totals-block",{apiVersion:In.XV,title:In.DD,icon:{src:(0,c.jsx)(i.A,{icon:Io,className:"wc-block-editor-components-block-icon"})},edit:({clientId:e})=>{const t=(0,l.useBlockProps)(),s=Mt(jt.innerBlockAreas.CHECKOUT_ORDER_SUMMARY_TOTALS),o=[["woocommerce/checkout-order-summary-subtotal-block",{},[]],["woocommerce/checkout-order-summary-fee-block",{},[]],["woocommerce/checkout-order-summary-discount-block",{},[]],["woocommerce/checkout-order-summary-shipping-block",{},[]],["woocommerce/checkout-order-summary-taxes-block",{},[]]];return Dt({clientId:e,registeredBlocks:s,defaultTemplate:o}),(0,c.jsx)("div",{...t,children:(0,c.jsx)(l.InnerBlocks,{allowedBlocks:s,template:o})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(l.InnerBlocks.Content,{})})}),s(4259);var Rn=s(8558);const Tn=(e,t=!0)=>{t?window.document.body.classList.add(e):window.document.body.classList.remove(e)},Mn=({attributes:e,setAttributes:t})=>{const{hasDarkControls:s,showFormStepNumbers:o}=e;return(0,c.jsx)(l.InspectorControls,{children:(0,c.jsxs)(Bt.PanelBody,{title:(0,v.__)("Style","woocommerce"),children:[(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Show form step numbers","woocommerce"),checked:o,onChange:()=>t({showFormStepNumbers:!o})}),(0,c.jsx)(Bt.ToggleControl,{label:(0,v.__)("Dark mode inputs","woocommerce"),help:(0,v.__)("Inputs styled specifically for use on dark background colors.","woocommerce"),checked:s,onChange:()=>t({hasDarkControls:!s})})]})})},Dn=window.wp.editor;function Bn({block:e}){const t="checkout"===e?j:E,s="checkout"===e?"woocommerce_checkout_page_id":"woocommerce_cart_page_id",{saveEntityRecord:o}=(0,_.useDispatch)(Pt.store),{editPost:r,savePost:n}=(0,_.useDispatch)(Dn.store),{slug:i,postPublished:a,currentPostId:l}=(0,_.useSelect)((s=>{const{getEntityRecord:o}=s(Pt.store),{isCurrentPostPublished:r,getCurrentPostId:c}=s(Dn.store);return{slug:o("postType","page",t)?.slug||e,postPublished:r(),currentPostId:c()}}),[]),[p,m]=(0,d.useState)("pristine"),u=(0,d.useCallback)((()=>{m("updating"),Promise.resolve().then((()=>it()({path:`/wc/v3/settings/advanced/${s}`,method:"GET"}))).catch((e=>{"rest_setting_setting_invalid"===e.code&&m("error")})).then((()=>{if(!a)return r({status:"publish"}),n()})).then((()=>it()({path:`/wc/v3/settings/advanced/${s}`,method:"POST",data:{value:l.toString()}}))).then((()=>{if(0!==t)return o("postType","page",{id:t,slug:`${i}-2`})})).then((()=>r({slug:i}))).then((()=>n())).then((()=>m("updated")))}),[a,r,n,s,l,t,o,i]);let h;return h="checkout"===e?(0,d.createInterpolateElement)((0,v.__)("If you would like to use this block as your default checkout, <a>update your page settings</a>.","woocommerce"),{a:(0,c.jsx)("a",{href:"#",onClick:u,children:(0,v.__)("update your page settings","woocommerce")})}):(0,d.createInterpolateElement)((0,v.__)("If you would like to use this block as your default cart, <a>update your page settings</a>.","woocommerce"),{a:(0,c.jsx)("a",{href:"#",onClick:u,children:(0,v.__)("update your page settings","woocommerce")})}),"string"==typeof pagenow&&"site-editor"===pagenow||l===t||"dismissed"===p?null:(0,c.jsx)(Bt.Notice,{className:"wc-default-page-notice",status:"updated"===p?"success":"info",onRemove:()=>m("dismissed"),spokenMessage:"updated"===p?(0,v.__)("Page settings updated","woocommerce"):h,children:"updated"===p?(0,v.__)("Page settings updated","woocommerce"):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("p",{children:h})})})}s(3650);const On=[],Ln=e=>{const[t,s,o]=(()=>{const e={};(0,x.getSetting)("incompatibleExtensions")&&(0,x.getSetting)("incompatibleExtensions").forEach((t=>{e[t.id]=t.title}));const t=Object.keys(e),s=t.length;return[e,t,s]})(),[r,c,n]=(()=>{const{incompatiblePaymentMethods:e}=(0,_.useSelect)((e=>{const{getIncompatiblePaymentMethods:t}=e(X.paymentStore);return{incompatiblePaymentMethods:t()}}),[]),t=Object.keys(e);return[e,t,t.length]})(),i={...t,...r},a=[...s,...c],l=o+n,[p,m]=((e,t)=>{const[s,o]=(0,d.useState)((()=>{const s=window.localStorage.getItem(e);if(s)try{return JSON.parse(s)}catch{console.error(`Value for key '${e}' could not be retrieved from localStorage because it can't be parsed.`)}return t}));return(0,d.useEffect)((()=>{try{window.localStorage.setItem(e,JSON.stringify(s))}catch{console.error(`Value for key '${e}' could not be saved in localStorage because it can't be converted into a string.`)}}),[e,s]),[s,o]})("wc-blocks_dismissed_incompatible_extensions_notices",On),[u,h]=(0,d.useState)(!1),g=p.some((t=>{return Object.keys(t).includes(e)&&(s=t[e],o=a,s.length===o.length&&new Set([...s,...o]).size===s.length);var s,o})),k=0===l||g;return(0,d.useEffect)((()=>{h(!k),k||g||m((t=>t.reduce(((t,s)=>(Object.keys(s).includes(e)||t.push(s),t)),[])))}),[k,g,m,e]),[u,()=>{const t=new Set(p);t.add({[e]:a}),m([...t])},(b=i,Object.fromEntries(Object.entries(b).sort((([,e],[,t])=>e.localeCompare(t))))),l];var b};var Fn=s(1244),Vn=s.n(Fn);Vn()("wc-admin:tracks:stats");const $n=Vn()("wc-admin:tracks");function Un(e,t){if($n("recordevent %s %o","wcadmin_"+e,t,{_tqk:window._tkq,shouldRecord:!!window._tkq&&!!window.wcTracks&&!!window.wcTracks.isEnabled}),!window.wcTracks||"function"!=typeof window.wcTracks.recordEvent)return!1;window.wcTracks.recordEvent(e,t)}const Hn=({blocks:e,findCondition:t})=>{for(const s of e){if(t(s))return s;if(s.innerBlocks){const e=Hn({blocks:s.innerBlocks,findCondition:t});if(e)return e}}},zn=({blockType:e="woocommerce/cart"})=>"woocommerce/cart"===e?(0,c.jsx)("p",{children:(0,v.__)("If you continue, the cart block will be replaced with the classic experience powered by shortcodes. This means that you may lose customizations that you made to the cart block.","woocommerce")}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:(0,v.__)("If you continue, the checkout block will be replaced with the classic experience powered by shortcodes. This means that you may lose:","woocommerce")}),(0,c.jsxs)("ul",{className:"cross-list",children:[(0,c.jsx)("li",{children:(0,v.__)("Customizations and updates to the block","woocommerce")}),(0,c.jsx)("li",{children:(0,v.__)("Additional local pickup options created for the new checkout","woocommerce")})]})]});function qn({block:e,clientId:t,type:s}){const{createInfoNotice:o}=(0,_.useDispatch)(tt.store),{replaceBlock:r,selectBlock:n}=(0,_.useDispatch)(l.store),[i,p]=(0,d.useState)(!1),m=()=>p(!1),{undo:u}=(0,_.useDispatch)(Pt.store),[,,h,g]=Ln(e),k="woocommerce/cart"===e,b=k?(0,v.__)("Switch to classic cart","woocommerce"):(0,v.__)("Switch to classic checkout","woocommerce"),w=k?(0,v.__)("Switched to classic cart.","woocommerce"):(0,v.__)("Switched to classic checkout.","woocommerce"),y=k?"cart":"checkout",x={shortcode:y,notice:"incompatible"===s?"incompatible_notice":"generic_notice",incompatible_extensions_count:g,incompatible_extensions_names:JSON.stringify(h)},{getBlocks:f}=(0,_.useSelect)((e=>({getBlocks:e(l.store).getBlocks})),[]),S=()=>{u(),Un("switch_to_classic_shortcode_undo",x)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Bt.Button,{variant:"secondary",onClick:()=>{Un("switch_to_classic_shortcode_click",x),p(!0)},children:b}),i&&(0,c.jsxs)(Bt.Modal,{size:"medium",title:b,onRequestClose:m,className:"wc-blocks-switch-to-classic-shortcode-modal-content",children:[(0,c.jsx)(zn,{blockType:e}),(0,c.jsxs)(Bt.TabbableContainer,{className:"wc-blocks-switch-to-classic-shortcode-modal-actions",children:[(0,c.jsx)(Bt.Button,{variant:"primary",isDestructive:!0,onClick:()=>{r(t,(0,a.createBlock)("woocommerce/classic-shortcode",{shortcode:y})),Un("switch_to_classic_shortcode_confirm",x),(()=>{const e=Hn({blocks:f(),findCondition:e=>"woocommerce/classic-shortcode"===e.name});e&&n(e.clientId)})(),o(w,{actions:[{label:(0,v.__)("Undo","woocommerce"),onClick:S}],type:"snackbar"}),m()},children:(0,v.__)("Switch","woocommerce")})," ",(0,c.jsx)(Bt.Button,{variant:"secondary",onClick:()=>{Un("switch_to_classic_shortcode_cancel",x),m()},children:(0,v.__)("Cancel","woocommerce")})]})]})]})}function Wn({block:e,clientId:t}){const[s,o,r,n]=Ln(e);if(!s)return null;const a=(0,c.jsx)(c.Fragment,{children:n>1?(0,d.createInterpolateElement)((0,v.__)("Some active extensions do not yet support this block. This may impact the shopper experience. <a>Learn more</a>","woocommerce"),{a:(0,c.jsx)(Bt.ExternalLink,{href:"https://woocommerce.com/document/woocommerce-store-editing/customizing-cart-and-checkout/#incompatible-extensions/"})}):(0,d.createInterpolateElement)((0,v.sprintf)(
// translators: %s is the name of the extension.
// translators: %s is the name of the extension.
(0,v.__)("<strong>%s</strong> does not yet support this block. This may impact the shopper experience. <a>Learn more</a>","woocommerce"),Object.values(r)[0]),{strong:(0,c.jsx)("strong",{}),a:(0,c.jsx)(Bt.ExternalLink,{href:"https://woocommerce.com/document/woocommerce-store-editing/customizing-cart-and-checkout/#incompatible-extensions/"})})}),l=Object.entries(r),p=l.length-2;return(0,c.jsx)(Bt.Notice,{className:"wc-blocks-incompatible-extensions-notice",status:"warning",onRemove:o,spokenMessage:a,children:(0,c.jsxs)("div",{className:"wc-blocks-incompatible-extensions-notice__content",children:[(0,c.jsx)(i.A,{className:"wc-blocks-incompatible-extensions-notice__warning-icon",icon:(0,c.jsx)(er,{})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{children:a}),n>1&&(0,c.jsx)("ul",{children:l.slice(0,2).map((([e,t])=>(0,c.jsx)("li",{className:"wc-blocks-incompatible-extensions-notice__element",children:t},e)))}),l.length>2&&(0,c.jsxs)("details",{children:[(0,c.jsxs)("summary",{children:[(0,c.jsx)("span",{children:(0,v.sprintf)(
// translators: %s is the number of incompatible extensions.
// translators: %s is the number of incompatible extensions.
(0,v._n)("%s more incompatibility","%s more incompatibilities",p,"woocommerce"),p)}),(0,c.jsx)(i.A,{icon:Zt.A})]}),(0,c.jsx)("ul",{children:l.slice(2).map((([e,t])=>(0,c.jsx)("li",{className:"wc-blocks-incompatible-extensions-notice__element",children:t},e)))})]}),(0,c.jsx)(qn,{block:e,clientId:t,type:"incompatible"})]})]})})}s(4490),s(6342);var Xn=s(3791);s(4268);const Yn=({text:e,title:t=(0,v.__)("Feedback?","woocommerce"),url:s})=>{const[o,r]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{r(!0)}),[]),(0,c.jsx)(c.Fragment,{children:o&&(0,c.jsxs)("div",{className:"wc-block-feedback-prompt",children:[(0,c.jsx)(i.A,{icon:Xn.A}),(0,c.jsx)("h2",{className:"wc-block-feedback-prompt__title",children:t}),(0,c.jsx)("p",{className:"wc-block-feedback-prompt__text",children:e}),(0,c.jsxs)("a",{href:s,className:"wc-block-feedback-prompt__link",rel:"noreferrer noopener",target:"_blank",children:[(0,v.__)("Give us your feedback.","woocommerce"),(0,c.jsx)(i.A,{icon:Zo.A,size:16})]})]})})},Gn=()=>(0,c.jsx)(Yn,{text:(0,v.__)("We are currently working on improving our cart and checkout blocks to provide merchants with the tools and customization options they need.","woocommerce"),url:"https://github.com/woocommerce/woocommerce/discussions/new?category=checkout-flow&labels=type%3A+product%20feedback"}),Jn=({clientId:e})=>{const{isCart:t,isCheckout:s,parentId:o}=(0,_.useSelect)((t=>{const{getBlockParentsByBlockName:s,getBlockName:o}=t(l.store),r=s(e,["woocommerce/cart","woocommerce/checkout"]).reduce(((e,t)=>(e[o(t)]=t,e)),{}),c=o(e),n=Object.keys(r).includes("woocommerce/cart"),i=Object.keys(r).includes("woocommerce/checkout"),a="woocommerce/cart"===c||n,d=a?"woocommerce/cart":"woocommerce/checkout";return{isCart:a,isCheckout:"woocommerce/checkout"===c||i,parentId:c===d?e:r[d]}}),[e]);return(t||s)&&(0,c.jsxs)(l.InspectorControls,{children:[(0,c.jsx)(Wn,{block:t?"woocommerce/cart":"woocommerce/checkout",clientId:o}),(0,c.jsx)(Bn,{block:s?"checkout":"cart"}),(0,c.jsx)(Gn,{})]})},Kn=(0,p.createHigherOrderComponent)((e=>t=>{const{clientId:s,name:o,isSelected:r}=t;return(0,c.jsxs)(c.Fragment,{children:[o.startsWith("woocommerce/")&&r&&(0,c.jsx)(Jn,{clientId:s}),(0,c.jsx)(e,{...t},"edit")]})}),"withSidebarNotices");(0,qe.hasFilter)("editor.BlockEdit","woocommerce/add/sidebar-compatibility-notice")||(0,qe.addFilter)("editor.BlockEdit","woocommerce/add/sidebar-compatibility-notice",Kn,11),(0,qe.hasFilter)("blocks.registerBlockType","core/lock/addAttribute")||(0,_.subscribe)((()=>{const e=(0,_.select)(l.store);if(!e)return;const t=e.getSelectedBlock();t&&(Tn("wc-lock-selected-block--remove",!!t?.attributes?.lock?.remove),Tn("wc-lock-selected-block--move",!!t?.attributes?.lock?.move))}));const Zn=["woocommerce/checkout-fields-block","woocommerce/checkout-totals-block"],Qn={hasDarkControls:{type:"boolean",default:(0,x.getSetting)("hasDarkEditorStyleSupport",!1)},showRateAfterTaxName:{type:"boolean",default:(0,x.getSetting)("displayCartPricesIncludingTax",!1)}},ei={showOrderNotes:{type:"boolean",default:!0},showPolicyLinks:{type:"boolean",default:!0},showReturnToCart:{type:"boolean",default:!0},cartPageId:{type:"number",default:0},showCompanyField:{type:"boolean",default:!1},requireCompanyField:{type:"boolean",default:!1},showApartmentField:{type:"boolean",default:!0},requireApartmentField:{type:"boolean",default:!1},showPhoneField:{type:"boolean",default:!0},requirePhoneField:{type:"boolean",default:!1}},ti=JSON.parse('{"name":"woocommerce/checkout","version":"1.0.0","title":"Checkout","description":"Display a checkout form so your customers can submit orders.","category":"woocommerce","keywords":["WooCommerce"],"supports":{"align":["wide"],"html":false,"multiple":false},"example":{"attributes":{"isPreview":true},"viewportWidth":800},"attributes":{"isPreview":{"type":"boolean","default":false,"save":false},"align":{"type":"string","default":"wide"},"showFormStepNumbers":{"type":"boolean","default":false}},"textdomain":"woocommerce","apiVersion":3,"$schema":"https://schemas.wp.org/trunk/block.json"}'),si={icon:{src:(0,c.jsx)(i.A,{icon:n,className:"wc-block-editor-components-block-icon"})},attributes:{...ti.attributes,...Qn,...ei},edit:({clientId:e,attributes:t,setAttributes:s})=>{const{showOrderNotes:r,showPolicyLinks:n,showReturnToCart:i,showRateAfterTaxName:p,cartPageId:m,isPreview:u=!1,showFormStepNumbers:h=!1,hasDarkControls:k=!1}=t,b=(0,_.useSelect)((e=>e(Pt.store).getEditedEntityRecord("root","site")),[]),y={...x.defaultFields,...Object.fromEntries(Object.entries({phone:"optional",company:"hidden",address_2:"optional"}).map((([e,t])=>{const s=b[`woocommerce_checkout_${e}_field`]||t;return[e,{...x.defaultFields[e],required:"required"===s,hidden:"hidden"===s}]})))},v=(0,d.useRef)((0,Ct.getQueryArg)(window.location.href,"focus"));(0,d.useEffect)((()=>{"checkout"!==v.current||(0,_.select)("core/block-editor").hasSelectedBlock()||((0,_.dispatch)("core/block-editor").selectBlock(e),(0,_.dispatch)("core/interface").enableComplementaryArea("core/edit-site","edit-site/block-inspector"))}),[e]);const f=((e={})=>{const t=(0,d.useRef)(),s=(0,l.useBlockProps)({ref:t,...e});return(({ref:e})=>{const t=(0,qe.hasFilter)("blocks.registerBlockType","core/lock/addAttribute"),s=e.current;(0,d.useEffect)((()=>{if(s&&!t)return s.addEventListener("keydown",e,{capture:!0,passive:!1}),()=>{s.removeEventListener("keydown",e,{capture:!0})};function e(e){const{keyCode:t,target:s}=e;if(!(s instanceof HTMLElement))return;if(t!==Rn.BACKSPACE&&t!==Rn.DELETE)return;if((0,Yt.isTextField)(s))return;const o=s;if(void 0===o.dataset.block)return;const r=(e=>{if(!e)return!1;const{getBlock:t}=(0,_.select)(l.store),s=t(e);if("boolean"==typeof s?.attributes?.lock?.remove)return s.attributes.lock.remove;const o=(0,a.getBlockType)(s.name);return"boolean"==typeof o?.attributes?.lock?.default?.remove&&o?.attributes?.lock?.default?.remove})(o.dataset.block);r&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}}),[s,t])})({ref:t}),s})();return(0,c.jsxs)("div",{...f,children:[(0,c.jsx)(l.InspectorControls,{children:(0,c.jsx)(Mn,{attributes:t,setAttributes:s})}),(0,c.jsx)(w,{isPreview:!!u,previewData:{previewCart:ft,previewSavedPaymentMethods:St,defaultFields:y},children:(0,c.jsx)(jt.SlotFillProvider,{children:(0,c.jsx)(ut,{children:(0,c.jsx)(g,{className:(0,o.A)("wc-block-checkout",{"has-dark-controls":k}),children:(0,c.jsx)(It.Provider,{value:{showOrderNotes:r,showPolicyLinks:n,showReturnToCart:i,cartPageId:m,showRateAfterTaxName:p,showFormStepNumbers:h,defaultFields:y},children:(0,c.jsx)(l.InnerBlocks,{allowedBlocks:Zn,template:[["woocommerce/checkout-totals-block",{},[]],["woocommerce/checkout-fields-block",{},[]]],templateLock:"insert"})})})})})})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save({className:"wc-block-checkout is-loading"}),children:(0,c.jsx)(l.InnerBlocks.Content,{})}),transforms:{to:[{type:"block",blocks:["woocommerce/classic-shortcode"],transform:e=>(0,a.createBlock)("woocommerce/classic-shortcode",{shortcode:"checkout",align:e.align},[])}]},deprecated:[{attributes:{...ti.attributes,...Qn,...ei},save:({attributes:e})=>(0,c.jsx)("div",{className:(0,o.A)("is-loading",e.className)}),migrate:e=>{const{showOrderNotes:t,showPolicyLinks:s,showReturnToCart:o,cartPageId:r}=e;return[e,[(0,a.createBlock)("woocommerce/checkout-fields-block",{},[(0,a.createBlock)("woocommerce/checkout-express-payment-block",{},[]),(0,a.createBlock)("woocommerce/checkout-contact-information-block",{},[]),(0,a.createBlock)("woocommerce/checkout-shipping-address-block",{},[]),(0,a.createBlock)("woocommerce/checkout-billing-address-block",{},[]),(0,a.createBlock)("woocommerce/checkout-shipping-methods-block",{},[]),(0,a.createBlock)("woocommerce/checkout-payment-block",{},[]),(0,a.createBlock)("woocommerce/checkout-additional-information-block",{},[]),!!t&&(0,a.createBlock)("woocommerce/checkout-order-note-block",{},[]),!!s&&(0,a.createBlock)("woocommerce/checkout-terms-block",{},[]),(0,a.createBlock)("woocommerce/checkout-actions-block",{showReturnToCart:o,cartPageId:r},[])].filter(Boolean)),(0,a.createBlock)("woocommerce/checkout-totals-block",{})]]},isEligible:(e,t)=>!t.some((e=>"woocommerce/checkout-fields-block"===e.name))},{save:({attributes:e})=>(0,c.jsx)("div",{className:(0,o.A)("is-loading",e.className)}),isEligible:(e,t)=>{const s=t.find((e=>"woocommerce/checkout-fields-block"===e.name));return!!s&&!s.innerBlocks.some((e=>"woocommerce/checkout-additional-information-block"===e.name))},migrate:(e,t)=>{const s=t.findIndex((e=>"woocommerce/checkout-fields-block"===e.name));if(-1===s)return!1;const o=t[s],r=o.innerBlocks.findIndex((e=>"wp-block-woocommerce-checkout-payment-block"===e.name));return-1!==r&&(t[s]=o.innerBlocks.slice(0,r).concat((0,a.createBlock)("woocommerce/checkout-additional-information-block",{},[])).concat(t.slice(r+1,t.length)),[e,t])}}]};(0,a.registerBlockType)(ti,si)},5893:()=>{},6882:()=>{},4927:()=>{},359:()=>{},2770:()=>{},6161:()=>{},6713:()=>{},6983:()=>{},9287:()=>{},7605:()=>{},3692:()=>{},8879:()=>{},2840:()=>{},2793:()=>{},1962:()=>{},619:()=>{},8413:()=>{},6562:()=>{},4249:()=>{},9961:()=>{},7575:()=>{},959:()=>{},8501:()=>{},8306:()=>{},9163:()=>{},2336:()=>{},9249:()=>{},1215:()=>{},2405:()=>{},2831:()=>{},4147:()=>{},5193:()=>{},7215:()=>{},7826:()=>{},8796:()=>{},1121:()=>{},2862:()=>{},8599:()=>{},7883:()=>{},6715:()=>{},4793:()=>{},9003:()=>{},4255:()=>{},6229:()=>{},2739:()=>{},5991:()=>{},6336:()=>{},1393:()=>{},7693:()=>{},6223:()=>{},5763:()=>{},6811:()=>{},4259:()=>{},3650:()=>{},4459:()=>{},4268:()=>{},6342:()=>{},4490:()=>{},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},195:e=>{"use strict";e.exports=window.wp.a11y},9491:e=>{"use strict";e.exports=window.wp.compose},4040:e=>{"use strict";e.exports=window.wp.deprecated},8107:e=>{"use strict";e.exports=window.wp.dom},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},8558:e=>{"use strict";e.exports=window.wp.keycodes},5573:e=>{"use strict";e.exports=window.wp.primitives}},r={};function c(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return o[e](s,s.exports,c),s.exports}c.m=o,e=[],c.O=(t,s,o,r)=>{if(!s){var n=1/0;for(d=0;d<e.length;d++){for(var[s,o,r]=e[d],i=!0,a=0;a<s.length;a++)(!1&r||n>=r)&&Object.keys(c.O).every((e=>c.O[e](s[a])))?s.splice(a--,1):(i=!1,r<n&&(n=r));if(i){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,o,r]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var r=Object.create(null);c.r(r);var n={};t=t||[null,s({}),s([]),s(s)];for(var i=2&o&&e;"object"==typeof i&&!~t.indexOf(i);i=s(i))Object.getOwnPropertyNames(i).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,c.d(r,n),r},c.d=(e,t)=>{for(var s in t)c.o(t,s)&&!c.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.j=251,(()=>{var e={251:0};c.O.j=t=>0===e[t];var t=(t,s)=>{var o,r,[n,i,a]=s,l=0;if(n.some((t=>0!==e[t]))){for(o in i)c.o(i,o)&&(c.m[o]=i[o]);if(a)var d=a(c)}for(t&&t(s);l<n.length;l++)r=n[l],c.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return c.O(d)},s=globalThis.webpackChunkwebpackWcBlocksMainJsonp=globalThis.webpackChunkwebpackWcBlocksMainJsonp||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=c.O(void 0,[94],(()=>c(8470)));n=c.O(n),((this.wc=this.wc||{}).blocks=this.wc.blocks||{}).checkout=n})();